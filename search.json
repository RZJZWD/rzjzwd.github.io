[{"title":"ARMGCC工具链下DMA接收不到数据的原因与解决方法","url":"/2025/08/03/ARMGCC%E5%B7%A5%E5%85%B7%E9%93%BE%E4%B8%8BDMA%E6%8E%A5%E6%94%B6%E4%B8%8D%E5%88%B0%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8E%9F%E5%9B%A0%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","content":"&#x524D;&#x8A00;&#x5E73;&#x53F0;&#xFF1A;STM32H750vbt6&#x5C06;&#x539F;&#x6765;&#x5728;keil&#x4E0B;&#x914D;&#x7F6E;&#x7684;DCMI&#x6444;&#x50CF;&#x5934;&#x4F8B;&#x7A0B;&#xFF08;DMA1&#x642C;&#x6570;&#x636E;&#xFF0C;SPI&#x9A71;&#x52A8;&#x5C4F;&#x5E55;&#x5237;&#x65B0;&#xFF09;&#x8FC1;&#x79FB;&#x5230;arm-gnu-toolchain&#x540E;&#xFF0C;&#x51FA;&#x73B0;&#x4E86;DCMI&#x65E0;&#x6CD5;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E00;&#x5F00;&#x59CB;&#x4EE5;&#x4E3A;&#x662F;&#x5DE5;&#x5177;&#x94FE;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E00;&#x756A;&#x6392;&#x67E5;&#x540E;&#x53D1;&#x73B0;&#x662F;DCMI&#x914D;&#x7F6E;&#x7684;DMA&#x4F20;&#x8F93;&#x5931;&#x8D25;&#x3002;&#x7F51;&#x4E0A;&#x641C;&#x7D22;&#x540E;&#x53D1;&#x73B0;&#x6709;&#x7C7B;&#x4F3C;&#x95EE;&#x9898;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;DMA&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;DTCM&#x533A;&#xFF0C;&#x800C;ST&#x7684;cubemx&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;makefile&#x5DE5;&#x7A0B;&#x91CC;&#x81EA;&#x5E26;&#x7684; .ld &#x94FE;&#x63A5;&#x6587;&#x4EF6;&#x9ED8;&#x8BA4;&#x5C06;&#x7533;&#x8BF7;&#x7684;&#x9759;&#x6001;&#x6570;&#x7EC4;&#x90FD;&#x653E;&#x5728;DTCM&#x533A;&#x3002;\n/* Initialized data sections goes into RAM, load LMA copy after code */.data : {  . = ALIGN(4);  _sdata = .;        /* create a global symbol at data start */  *(.data)           /* .data sections */  *(.data*)          /* .data* sections */  . = ALIGN(4);  _edata = .;        /* define a global symbol at data end */} &gt;DTCMRAM AT&gt; FLASH/* Uninitialized data section */. = ALIGN(4);.bss :{  /* This is used by the startup in order to initialize the .bss secion */  _sbss = .;         /* define a global symbol at bss start */  __bss_start__ = _sbss;  *(.bss)  *(.bss*)  *(COMMON)  . = ALIGN(4);  _ebss = .;         /* define a global symbol at bss end */  __bss_end__ = _ebss;} &gt;DTCMRAM/* User_heap_stack section, used to check that there is enough RAM left */._user_heap_stack :{  . = ALIGN(8);  PROVIDE ( end = . );  PROVIDE ( _end = . );  . = . + _Min_Heap_Size;  . = . + _Min_Stack_Size;  . = ALIGN(8);} &gt;DTCMRAM\n\n&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5F00;cache&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x4FEE;&#x6539; .ld &#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x6BB5;.AXI_RAM_D1 &#x6BB5;&#x540D;&#xFF0C; RAM_D1 &#x5728; .ld &#x6587;&#x4EF6;&#x5F00;&#x5934;\n/* &#x6307;&#x5411;RAM&#xFF0C;RAM_D1 (xrw)      : ORIGIN = 0x24000000, LENGTH = 512K *//* &#x9002;&#x7528;&#x4E8E;dma&#x8BBF;&#x95EE;&#x6570;&#x636E;&#xFF0C;dma1 2&#x90FD;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;AXI SRAM&#xFF0C;&#x6240;&#x4EE5;&#x5B9A;&#x4E49;&#x7684;&#x6570;&#x7EC4;&#x4E4B;&#x7C7B;&#x7684;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x5230;&#x6B64;&#x533A;&#x57DF; *//* (NOLOAD)&#x6307;&#x5B9A;&#x6B64;&#x6BB5;&#x4E0D;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316; */.AXI_RAM_D1(NOLOAD) :{  /* &#x56DB;&#x5B57;&#x8282;&#x5BF9;&#x9F50; */  /*. = ALIGN(4);  . = ALIGN(4);*/  *(.AXI_RAM_D1)} &gt;RAM_D1\n\n&#x5728;&#x4E00;&#x4E2A;&#x5408;&#x9002;&#x7684;&#x4F4D;&#x7F6E;&#x7F16;&#x5199;&#x4E00;&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF0C;&#x8FD9;&#x91CC;&#x7684; .AXI_RAM_D1 &#x4E0E;&#x4E0A;&#x9762;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6BB5;&#x5FC5;&#x987B;&#x8981;&#x4E00;&#x6837;&#xFF0C; __attribute__ &#x548C;&#x4E4B;&#x540E;&#x7684;&#x4E1C;&#x897F;&#x53EA;&#x8981;&#x653E;&#x5728; &#x4EE3;&#x7801;&#x7ED3;&#x675F;&#x7B26;&#x53F7;**; ** &#x4E4B;&#x524D;&#x5C31;&#x884C; __attribute__((section(&quot;.AXI_RAM_D1&quot;))) uint16_t pic0[160 * 120];\n&#x4E3A;&#x4EC0;&#x4E48;keil&#x4E0B;&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x8FD9;&#x95EE;&#x9898;&#x5982;&#x56FE;&#x6240;&#x793A; IRAM1 &#x7684;&#x5730;&#x65B9;&#x6253;&#x52FE;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x53D6;&#x6D88;&#x52FE;&#x9009;&#xFF0C;&#x90A3;&#x4E48;keil&#x4E0B;&#x4E5F;&#x4E00;&#x6837;&#x65E0;&#x6CD5;&#x5411;&#x5206;&#x914D;&#x7684;&#x5728;DTCM&#x533A;&#x7684;&#x6570;&#x7EC4;&#x5199;&#x6570;&#x636E;\n\n&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5B9E;&#x7528;&#x6587;&#x6863;LAT0816_STM32CubeIDE&#x5B9E;&#x7528;&#x6280;&#x5DE7;&#x4E4B;ld&#x94FE;&#x63A5;&#x6587;&#x4EF6;_v1.0\n","categories":["STM32"],"tags":["ARMGCC","STM32"]},{"title":"深度学习笔记","url":"/2025/11/21/Deep-Learning-Note/","content":"&#x524D;&#x8A00;&#x4E3B;&#x8981;&#x9605;&#x8BFB;&#x6750;&#x6599;&#x4E3A;RethinkFun&#x5927;&#x4F6C;&#x7684;RethinkFun&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x4E00;&#x4E66;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x6709;&#x611F;&#x609F;&#x7684;&#x7AE0;&#x8282;&#x8FDB;&#x884C;&#x8BB0;&#x5F55;\n&#x6A21;&#x578B;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x7279;&#x5F81;&#x503C;&#x662F;&#x8F93;&#x5165;&#xFF0C;&#x9884;&#x6D4B;&#x503C;&#x662F;&#x8F93;&#x51FA;&#xFF0C;&#x6807;&#x7B7E;&#x7528;&#x4E8E;&#x8861;&#x91CF;&#x9884;&#x6D4B;&#x503C;&#x7684;&#x63A5;&#x8FD1;&#x7A0B;&#x5EA6;&#xFF0C;&#x53C2;&#x6570;&#x7528;&#x5728;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x8BA1;&#x7B97;&#xFF0C;&#x540C;&#x65F6;&#x63A5;&#x6536;&#x8F93;&#x51FA;&#x4E0E;&#x6807;&#x7B7E;&#x8BEF;&#x5DEE;&#x7684;&#x4FEE;&#x6B63;&#x540E;&#x6587;&#x6211;&#x90FD;&#x4F1A;&#x5C3D;&#x91CF;&#x7528;&#x51FD;&#x6570;&#x76F8;&#x5173;&#x6765;&#x63CF;&#x8FF0;&#x5404;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x54EA;&#x4E2A;&#x73AF;&#x8282;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#x7684;\n&#x6570;&#x5B66;&#x5199;&#x5728;&#x9605;&#x8BFB;&#x5B8C;&#x524D;&#x4E09;&#x7AE0;&#x540E;&#xFF1A;\n&#x5411;&#x91CF;\n&#x7A7A;&#x95F4;&#x7684;&#x4FE1;&#x606F;&#x901A;&#x8FC7;&#x5411;&#x91CF;&#x6765;&#x63CF;&#x8FF0;&#xFF0C;&#x800C;&#x5411;&#x91CF;&#x662F;&#x7531;&#x57FA;&#x5411;&#x91CF;&#x901A;&#x8FC7;&#x5411;&#x91CF;&#x8FD0;&#x7B97;&#x7684;&#x6570;&#x4E58;&#x548C;&#x52A0;&#x51CF;&#x6784;&#x6210;&#x7684;&#x3002;&#x5E38;&#x89C1;&#x7684;&#x77E9;&#x9635;&#x8FD0;&#x7B97;&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;&#x628A;&#x5411;&#x91CF;&#x8FD0;&#x7B97;&#xFF08;&#x6570;&#x4E58;&#x548C;&#x52A0;&#x51CF;&#xFF09;&#x5199;&#x5230;&#x4E86;&#x4E00;&#x8D77;&#x6765;&#x7B80;&#x5316;&#x8868;&#x8FBE;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x6307;&#x5217;&#x5411;&#x91CF;&#x5199;&#x6CD5;&#xFF09;&#x3002;\n&#x8FD9;&#x5C31;&#x7C7B;&#x4F3C;&#x4E00;&#x4E2A;&#x6709;&#x4E25;&#x683C;&#x53C2;&#x6570;&#x8981;&#x6C42;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5F53; A * B &#x65F6;&#xFF0C;A&#x4E3A;&#x51FD;&#x6570; B&#x4E3A;&#x53C2;&#x6570;&#x3002;A &#x7684;&#x884C;&#x51B3;&#x5B9A;&#x4E86;&#x8F93;&#x51FA;&#x7684;&#x7EF4;&#x5EA6;&#xFF0C;&#x5217;&#x51B3;&#x5B9A;&#x4E86;&#x8F93;&#x5165;&#x7684;&#x7EF4;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x7684; B &#x81EA;&#x7136;&#x8981;&#x5C06;&#x8F93;&#x51FA;&#x7684;&#x7684;&#x7EF4;&#x5EA6;&#xFF08;&#x884C;&#xFF09;&#x4E0E; A &#x8F93;&#x5165;&#x7684;&#x7EF4;&#x5EA6;&#xFF08;&#x5217;&#xFF09;&#x5BF9;&#x5E94;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x8F93;&#x51FA;&#x65E2;&#x53EF;&#x4EE5;&#x662F;&#x505A;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x505A;&#x51FD;&#x6570;&#x3002;&#x4EE5;&#x4E0A;&#x7684;&#x60F3;&#x6CD5;&#x90FD;&#x662F;&#x5047;&#x8BBE;&#x77E9;&#x9635;&#x4E3A;&#x5217;&#x5411;&#x91CF;&#x7684;&#x60C5;&#x51B5;\n&#x70B9;&#x4E58; &#x7ED3;&#x679C;&#x4E3A;&#x6807;&#x91CF;&#xFF1A;&#x4E24;&#x5411;&#x91CF;&#x6A21;&#x76F8;&#x4E58;&#xFF0C;&#x518D;&#x4E58;&#x4E24;&#x5411;&#x91CF;&#x5939;&#x89D2;&#x4F59;&#x5F26;&#xFF1B;&#x4E5F;&#x7B49;&#x4E8E;&#x5404;&#x5411;&#x91CF;&#x5728;&#x4E0D;&#x540C;&#x65B9;&#x5411;&#x7684;&#x5206;&#x91CF;&#x76F8;&#x4E58;&#x518D;&#x76F8;&#x52A0;&#x3002;&#x591A;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x4E24;&#x5411;&#x91CF;&#x76F8;&#x4F3C;&#x5EA6;&#xFF0C;&#x4E24;&#x5411;&#x91CF;&#x5939;&#x89D2;&#x8D8A;&#x5C0F;&#x4F59;&#x5F26;&#x503C;&#x8D8A;&#x5927;&#x8D8A;&#x76F8;&#x4F3C;\n&#x53C9;&#x4E58; &#x7ED3;&#x679C;&#x4E3A;&#x77E2;&#x91CF;&#xFF1A;&#x4E24;&#x5411;&#x91CF;&#x6A21;&#x76F8;&#x4E58;&#xFF0C;&#x518D;&#x4E58;&#x4E24;&#x5411;&#x91CF;&#x5939;&#x89D2;&#x6B63;&#x5F26;&#xFF1B;&#x65B9;&#x5411;&#x7528;&#x53F3;&#x624B;&#x6CD5;&#x5219;&#xFF0C;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x540C;&#x65F6;&#x5782;&#x76F4;&#x4E8E;&#x4E24;&#x5411;&#x91CF;&#x7684;&#x6CD5;&#x5411;&#x91CF;\n\n&#x5FAE;&#x79EF;&#x5206;\n&#x5BFC;&#x6570;&#xFF0C;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5728;&#x4E00;&#x4E2A;&#x76EE;&#x6807;&#x70B9;&#x4E0A;&#x7684;&#x659C;&#x7387;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BF4;&#x662F;&#x6C42;&#x8FD9;&#x4E00;&#x76EE;&#x6807;&#x70B9;&#x5207;&#x7EBF;&#x3002;&#x5177;&#x4F53;&#x600E;&#x4E48;&#x6C42;&#xFF0C;&#x672C;&#x8D28;&#x8FD8;&#x662F;&#x4E24;&#x70B9;&#x786E;&#x5B9A;&#x5207;&#x7EBF;&#xFF0C;&#x4F46;&#x662F;&#x53E6;&#x4E00;&#x70B9;&#x5411;&#x76EE;&#x6807;&#x70B9;&#x65E0;&#x9650;&#x903C;&#x8FD1;&#xFF0C;&#x5C31;&#x80FD;&#x770B;&#x4F5C;&#x662F;&#x4E00;&#x70B9;&#x4E86;&#x4F46;&#x662F;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x51FD;&#x6570;&#x90FD;&#x80FD;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x8FDE;&#x7EED;&#xFF08;&#x51FD;&#x6570;&#x56FE;&#x50CF;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF09;&#x4E0D;&#x4E00;&#x5B9A;&#x53EF;&#x5BFC;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x56FE;&#x50CF;&#x53EF;&#x4EE5;&#x6C42;&#x5BFC;&#x6570;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x56FE;&#x50CF;&#x4E00;&#x5B9A;&#x662F;&#x8FDE;&#x7EED;&#x7684;\n&#x5FAE;&#x5206;&#xFF0C;&#x4EE5;&#x76F4;&#x4EE3;&#x66F2;&#xFF0C;&#x8FDE;&#x7EED;&#x7684;&#x975E;&#x76F4;&#x7EBF;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x5C1D;&#x8BD5;&#x5728;&#x4E00;&#x5B9A;&#x533A;&#x95F4;&#x5185;&#x7528;&#x76F4;&#x7EBF;&#x6765;&#x4EE3;&#x66FF;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x533A;&#x95F4;&#x53C8;&#x5F88;&#x5C0F;&#xFF0C;&#x5C06;&#x975E;&#x7EBF;&#x6027;&#x53D8;&#x5316;&#x8F6C;&#x4E3A;&#x7EBF;&#x6027;&#x53D8;&#x5316;\n&#x504F;&#x5BFC;&#x6570;&#xFF0C;&#x548C;&#x5BFC;&#x6570;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;&#x6C42;&#x5BFC;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x591A;&#x5143;&#x51FD;&#x6570;&#xFF0C;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#xFF08;&#x5077;&#x61D2;&#xFF09;&#x5C31;&#x5BF9;&#x5176;&#x4E2D;&#x4E00;&#x70B9;&#x6C42;&#x800C;&#x53E6;&#x4E00;&#x70B9;&#x4E0D;&#x52A8;&#xFF0C;&#x5176;&#x5B9E;&#x8FD8;&#x662F;&#x5728;&#x6C42;&#x5BF9;&#x5E94;&#x70B9;&#x5728;&#x51FD;&#x6570;&#x56FE;&#x50CF;&#x4E0A;&#x7684;&#x5207;&#x7EBF;&#x8FD9;&#x91CC;&#x653E;&#x4E00;&#x5F20;&#x539F;&#x56FE; &#x7EA2;&#x8272;&#x7EBF;&#x4E0A;&#x9762;&#x7684;&#x9ED1;&#x7EBF;&#x5C31;&#x662F;&#x5BF9;x&#x6C42;&#x504F;&#x5BFC;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E00;&#x6761;&#x5207;&#x7EBF;\n&#x5168;&#x5FAE;&#x5206;&#xFF0C;&#x4EE5;&#x5E73;&#x9762;&#x4EE3;&#x66F2;&#x9762;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x975E;&#x5E38;&#x6709;&#x8DA3;&#x7684;&#x5730;&#x65B9;&#xFF1A;\n&#x5168;&#x5FAE;&#x5206;&#x516C;&#x5F0F; dz=Adx+Bdy &#x5728; (x0,y0,z0) &#x70B9;&#x5904;&#xFF0C;&#x7ECF;&#x8FC7;&#x53D8;&#x6362;&#x540E;&#x80FD;&#x8868;&#x793A;&#x4E3A;A(x-x0)+B(y-y0)-(z-z0)=0&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5E73;&#x9762;&#xFF1B;  &#x8FD9;&#x8BF4;&#x660E;&#x6709;&#x4E00;&#x5E73;&#x9762;&#x8FC7; (x0,y0,z0) &#x4E14; [A,B,-1] &#x4E3A;&#x5E73;&#x9762;&#x6CD5;&#x5411;&#x91CF;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;A,B&#x503C;&#x6211;&#x4EEC;&#x90FD;&#x4E0D;&#x77E5;&#x9053;&#x554A;\n&#x8FD8;&#x8BB0;&#x5F97;&#x4E4B;&#x524D;&#x7684;&#x56FE;&#x5417;&#xFF0C;&#x4E24;&#x4E2A;&#x504F;&#x5BFC;&#x6B63;&#x597D;&#x5C31;&#x662F;&#x4E24;&#x6761;&#x8FC7; (x0,y0,z0) &#x7684;&#x5207;&#x7EBF;&#xFF0C;&#x4E24;&#x5207;&#x7EBF;&#x6784;&#x6210;&#x5207;&#x5E73;&#x9762;&#xFF0C;&#x518D;&#x7ED3;&#x5408;&#x5411;&#x91CF;&#x53C9;&#x4E58;&#x8BA1;&#x7B97;&#x5C31;&#x80FD;&#x8BA1;&#x7B97;&#x51FA;A,B&#x503C;&#xFF0C;  &#x53EF;&#x662F;&#x95EE;&#x9898;&#x53C8;&#x6765;&#x4E86;&#xFF0C;&#x5207;&#x7EBF;&#x7684;&#x5411;&#x91CF;&#x5982;&#x4F55;&#x8868;&#x793A;&#x5462;&#xFF1F;\n&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x539F;&#x6587;&#x7684;&#x8BB2;&#x89E3;&#x3002;  &#x6309;&#x6211;&#x7684;&#x7406;&#x89E3;&#x6765;&#x8BF4;&#xFF0C;&#x5148;&#x770B;&#x56FE;&#xFF1B;&#x4EE5;x&#x504F;&#x5BFC;&#x5207;&#x7EBF;&#x5411;&#x91CF;&#x4E3A;&#x4F8B;&#xFF0C;&#x7EA2;&#x8272;&#x7EBF;&#x4E0A;&#x65B9;&#x7684;&#x9ED1;&#x7EBF;&#x4E0E;x&#x8F74;&#x5E73;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x6CBF;&#x7740;x&#x8F74;&#x6B63;&#x65B9;&#x5411;&#x79FB;&#x52A8;1&#xFF0C;&#x5411;&#x91CF;&#x4E3A;[1,unkonw,unkonw]  &#x4F46;&#x662F;&#x5728;y&#x8F74;&#x65B9;&#x5411;&#x662F;&#x4E0D;&#x52A8;&#x7684;&#x4E5F;&#x5C31;&#x662F;0 &#x5411;&#x91CF;&#x4E3A;[1,0,unkonw]&#xFF0C;&#x5728;z&#x8F74;&#x65B9;&#x5411;&#x79FB;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#x5C31;&#x662F;&#x504F;&#x5BFC;&#x503C;&#xFF0C;&#x5411;&#x91CF;&#x4E3A;[1,0,fx]&#xFF08;fx&#x4E3A;&#x5BF9;x&#x7684;&#x504F;&#x5BFC;&#xFF09;  &#x76F8;&#x5E94;&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;y&#x504F;&#x5BFC;&#x5207;&#x7EBF;&#x5C31;&#x662F;[0,1,fy]&#xFF08;fy&#x4E3A;&#x5BF9;y&#x7684;&#x504F;&#x5BFC;&#xFF09;\n&#x8FD9;&#x4E0B;&#x6211;&#x4EEC;&#x6709;&#x4E86;&#x6784;&#x6210;&#x5207;&#x5E73;&#x9762;&#x7684;&#x5411;&#x91CF;&#xFF0C;&#x6709;&#x4E86;&#x6CD5;&#x7EBF;&#x7684;&#x4EE3;&#x6570;&#x516C;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x53C9;&#x4E58;&#x8BA1;&#x7B97;&#x7684;&#x53D1;&#x73B0;&#x5C31;&#x7B49;&#x4E8E;&#x6CD5;&#x7EBF;&#x4EE3;&#x6570;&#x516C;&#x5F0F;&#xFF0C;&#x5C31;&#x80FD;&#x6C42;&#x51FA;A,B&#x7684;&#x503C;  &#x8BA1;&#x7B97;&#x5F97;&#xFF1A;[-fx,-fy,1] &#x4E5F;&#x5C31;&#x662F; [fx,fy,-1]&#xFF0C;A=fx,B=fy&#xFF1B;&#x6240;&#x4EE5;&#x5168;&#x5FAE;&#x5206;&#x516C;&#x5F0F;dz=fxdx+fydy&#xFF0C;&#x53EF;&#x62D3;&#x5C55;&#x5230;&#x591A;&#x5143;&#xFF08;&#x591A;&#x7EF4;&#xFF09;&#x60C5;&#x51B5;\n\n\n&#x65B9;&#x5411;&#x5BFC;&#x6570;&#xFF0C;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x770B;&#x539F;&#x6587;&#x516C;&#x5F0F;&#x63A8;&#x5BFC;&#x3002;\n&#x6211;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x4E4B;&#x524D;&#x5F97;&#x5168;&#x5FAE;&#x5206;&#x53EA;&#x80FD;&#x770B;xy&#x4FE9;&#x65B9;&#x5411;&#xFF0C;&#x592A;&#x5F31;&#x4E86;&#xFF0C;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E0D;&#x53EF;&#x80FD;&#x53EA;&#x770B;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x7528;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x5355;&#x4F4D;&#x5411;&#x91CF; e &#x6765;&#x8868;&#x793A;&#x65B9;&#x5411;&#xFF0C;&#x5176;&#x6A21;&#x4E3A;1&#xFF0C;&#x4E14;&#x5B83;&#x4E0E;x&#x5939;&#x89D2;&#x4E3A;A&#xFF0C;&#x4E0E;y&#x5939;&#x89D2;&#x4E3A;B;  &#x4EE5;(x0,y0)&#x4E3A;&#x539F;&#x70B9;&#xFF0C;&#x7528;&#x5411;&#x91CF;[cosA,sinB]&#x6765;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x5355;&#x4F4D;&#x5411;&#x91CF;&#xFF0C;&#x5C31;&#x50CF;&#x662F;&#x4EE5;xy&#x4E3A;&#x57FA;&#x5411;&#x91CF;&#x6765;&#x7EC4;&#x5408;&#x51FA;&#x4E00;&#x4E2A;&#x5411;&#x91CF;  &#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65B9;&#x5411;&#x5BFC;&#x6570;&#x8BE5;&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x5462;&#xFF0C;&#x8BE6;&#x7EC6;&#x8FC7;&#x7A0B;&#x770B;&#x539F;&#x6587;  &#x7ED3;&#x8BBA;&#xFF1A;&#x6CBF;e&#x7684;&#x65B9;&#x5411;&#x5BFC;&#x6570;&#x4E3A; fxcosA+fysinB &#x53EF;&#x4EE5;&#x770B;&#x4F5C;[fx,fy]&#x548C;[cosA,sinB]&#x7684;&#x70B9;&#x4E58;\n\n\n&#x68AF;&#x5EA6;&#xFF0C;&#x539F;&#x6587;&#x4E2D;&#x8BF4;&#xFF1A;&#x65B9;&#x5411;&#x5BFC;&#x6570;&#x7814;&#x7A76;&#x7684;&#x662F;&#x81EA;&#x53D8;&#x91CF;&#x6CBF;&#x7740;&#x4E0D;&#x540C;&#x65B9;&#x5411;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x56E0;&#x53D8;&#x91CF;&#x7684;&#x53D8;&#x5316;&#x7387;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x81EA;&#x7136;&#x5C31;&#x5173;&#x5FC3;&#x81EA;&#x53D8;&#x91CF;&#x6CBF;&#x7740;&#x54EA;&#x4E2A;&#x65B9;&#x5411;&#x53D8;&#x5316;&#xFF0C;&#x56E0;&#x53D8;&#x91CF;&#x589E;&#x52A0;&#x6700;&#x5FEB;&#x3002;\n&#x6211;&#x7684;&#x7406;&#x89E3;  &#x68AF;&#x5EA6;&#x662F;&#x54EA;&#x4E2A;&#x5462;&#xFF1F;&#x5C31;&#x662F;&#x65B9;&#x5411;&#x68AF;&#x5EA6;&#x4E2D;&#x7684;&#x5411;&#x91CF;[fx,fy]&#x3002;&#x68AF;&#x5EA6;&#x4E00;&#x822C;&#x662F;&#x67D0;&#x70B9;&#x589E;&#x52A0;&#x6700;&#x5FEB;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x5411;&#x91CF;&#x53D6;&#x6A21;&#x5C31;&#x662F;&#x53D8;&#x5316;&#x7387;&#x3002;&#x5728;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x4E2D;&#xFF0C;&#x68AF;&#x5EA6;&#x51B3;&#x5B9A;&#x4E86;&#x5B66;&#x4E60;&#x65B9;&#x5411;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x6CBF;&#x7740;&#x68AF;&#x5EA6;&#x7684;&#x53CD;&#x5411;&#x4E5F;&#x5C31;&#x662F;&#x635F;&#x5931;&#x51CF;&#x5C0F;&#x6700;&#x5FEB;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x5C31;&#x50CF;&#x6CBF;&#x7740;&#x6700;&#x9661;&#x7684;&#x5761;&#x4E0B;&#x5C71;\n\n\n&#x5B9A;&#x79EF;&#x5206;&#xFF0C;&#x5C06;&#x6C42;&#x5927;&#x9762;&#x79EF;&#x8F6C;&#x4E3A;&#x6C42;&#x5C0F;&#x9762;&#x79EF;&#x7684;&#x548C;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x5934;&#x5230;&#x5C3E;&#x7684;&#x5C0F;&#x9762;&#x79EF;&#x52A0;&#x8D77;&#x6765;&#xFF0C;&#x5206;&#x5F97;&#x8D8A;&#x7EC6;&#x6C42;&#x5F97;&#x548C;&#x8D8A;&#x51C6;&#xFF0C;&#x8D8B;&#x8FD1;&#x4E8E;0&#x65F6;&#x5C0F;&#x9762;&#x79EF;&#x5C31;&#x662F;&#x4E4B;&#x524D;&#x7684;&#x5FAE;&#x5206;&#xFF0C;&#x90A3;&#x4E48;&#x5C0F;&#x9762;&#x79EF;&#x548C;&#x600E;&#x4E48;&#x6C42;&#xFF1F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x7528;&#x5FAE;&#x5206;&#x601D;&#x60F3;&#x201C;&#x4EE5;&#x76F4;&#x4EE3;&#x66F2;&#x201D;&#xFF0C;&#x8FD9;&#x91CC;&#x6C42;&#x4E00;&#x4E2A;&#x5C0F;&#x9762;&#x79EF; dy &#x76F8;&#x5F53;&#x4E8E; &#x659C;&#x7387;*dx&#xFF0C;\n\nml&#x540D;&#x8BCD;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x4E66;&#x4E2D;&#x66FE;&#x8FD9;&#x6837;&#x8BF4; &#x539F;&#x6587;&#x5F15;&#x7528;\n\n&#x524D;&#x4E24;&#x8282;&#x6211;&#x4EEC;&#x8BB2;&#x7684;&#x4F8B;&#x5B50;&#x91CC;&#xFF0C;&#x53EA;&#x6709;w&#x548C;b&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x9700;&#x8981;&#x627E;&#x51FA;&#x6700;&#x4F18;&#x89E3;&#x3002;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x7684;&#x5047;&#x8BBE;&#x51FD;&#x6570;&#x662F;&#x7EBF;&#x6027;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BA9;&#x635F;&#x5931;&#x51FD;&#x6570;&#x5BF9;w&#x548C;b&#x6C42;&#x504F;&#x5BFC;&#xFF0C;&#x5E76;&#x8BA9;&#x504F;&#x5BFC;&#x6570;&#x4E3A;0&#xFF0C;&#x8054;&#x7ACB;&#x65B9;&#x7A0B;&#x7EC4;&#x6765;&#x6C42;&#x51FA;&#x8BA9;loss&#x6700;&#x5C0F;&#x65F6;w&#x548C;b&#x7684;&#x6700;&#x4F18;&#x89E3;&#x3002;&#x4F46;&#x662F;&#x5728;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x91CC;&#xFF0C;&#x5BF9;&#x53C2;&#x6570;&#x6C42;&#x6700;&#x4F18;&#x89E3;&#x5374;&#x7528;&#x7684;&#x662F;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x7528;&#x5BF9;&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x6C42;&#x504F;&#x5BFC;&#x7B49;&#x4E8E;0&#xFF0C;&#x5E76;&#x8054;&#x7ACB;&#x65B9;&#x7A0B;&#x6C42;&#x89E3;&#x5462;&#xFF1F;&#x9AD8;&#x7EF4;&#x53C2;&#x6570;&#x7A7A;&#x95F4; &#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x91CC;&#x9700;&#x8981;&#x4F18;&#x5316;&#x7684;&#x53C2;&#x6570;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x5BF9;&#x4E8E;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x6709;&#x51E0;&#x767E;&#x4EBF;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x4E48;&#x591A;&#x53C2;&#x6570;&#x8054;&#x7ACB;&#x65B9;&#x7A0B;&#x6C42;&#x89E3;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x3002;&#x975E;&#x7EBF;&#x6027; &#x540E;&#x8FB9;&#x6211;&#x4EEC;&#x4F1A;&#x8BB2;&#x5230;&#xFF0C;&#x7531;&#x4E8E;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x91CC;&#x5F15;&#x5165;&#x4E86;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#xFF0C;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x662F;&#x975E;&#x7EBF;&#x6027;&#x7684;&#x53D8;&#x5316;&#x3002;&#x89E3;&#x65B9;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;&#x5C06;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x4EE5;&#x81F4;&#x65E0;&#x6CD5;&#x5B9E;&#x73B0;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x90FD;&#x5E0C;&#x671B;&#x635F;&#x5931;&#x8D8A;&#x5C0F;&#x8D8A;&#x597D;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x4E00;&#x4E2A;&#x51F9;&#x4E0B;&#x53BB;&#x7684;&#x4E00;&#x5143;&#x51FD;&#x6570;&#x56FE;&#x50CF;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6C42;&#x5BFC;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x5BFC;&#x6570;&#x7B49;&#x4E8E;&#x96F6;&#x6765;&#x8BA1;&#x7B97;&#x51FA;&#x6700;&#x5C0F;&#x503C;&#x3002;&#x4F46;&#x662F;&#x5982;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#xFF0C;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E2D;&#x662F;&#x5F88;&#x96BE;&#x505A;&#x5230;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x8D70;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8D70;&#x4E00;&#x6B65;&#x770B;&#x4E00;&#x6B65;&#x5BFC;&#x6570;&#x4E3A;&#x6B63;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8981;&#x589E;&#x5927;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x53CD;&#x7740;&#x8D70;&#x53BB;&#x51CF;&#x5C0F;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x5BFC;&#x6570;&#x4E3A;&#x8D1F;&#x5219;&#x76F8;&#x53CD;&#xFF1B;&#x90A3;&#x4E48;&#x6B65;&#x957F;&#x5C31;&#x662F;&#x5B66;&#x4E60;&#x7387;&#xFF0C;&#x592A;&#x957F;&#x5BB9;&#x6613;&#x8DE8;&#x8FC7;&#x6700;&#x4F4E;&#x70B9;&#xFF0C;&#x592A;&#x5C0F;&#x5219;&#x592A;&#x6162;&#x4E5F;&#x5373;&#x662F;&#x6807;&#x7B7E;&#x4E0E;&#x8F93;&#x51FA;&#x4EA7;&#x751F;&#x7684;&#x8BEF;&#x5DEE; &#x501F;&#x52A9;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; &#x53BB;&#x4FEE;&#x6B63;&#x53C2;&#x6570;\n\n\n&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x4E0A;&#x6587;&#x6240;&#x8BF4;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6BCF;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x7B97;&#x4E0A;&#xFF0C;&#x90FD;&#x53BB;&#x4FEE;&#x6B63;&#x53C2;&#x6570;\n&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x6BCF;&#x8D70;&#x4E00;&#x6B65;&#x90FD;&#x91CD;&#x65B0;&#x9009;&#x6837;&#x672C;&#xFF0C;&#x5FEB;&#x4F46;&#x662F;&#x6CE2;&#x52A8;&#x5927;\n&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x7ED3;&#x5408;&#x4E0A;&#x9762;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x968F;&#x673A;&#x7684;&#x6279;&#x91CF;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x968F;&#x673A;&#x9009;&#x4E00;&#x90E8;&#x5206;&#x6837;&#x672C;&#x4F5C;&#x4E3A;&#x4E00;&#x6279;&#xFF08;batch&#xFF09;&#xFF0C;&#x5047;&#x8BBE;10&#x4E2A;&#x6837;&#x672C;&#xFF0C;&#x6BCF;&#x6B21;&#x968F;&#x673A;&#x6279;&#x53D6;&#x4E24;&#x4E2A;&#x6837;&#x672C;&#xFF08;batch&#xFF09;&#xFF0C;&#x8BAD;&#x7EC3;&#x8FD9;&#x6279;&#xFF08;batch&#xFF09;&#x53EB;&#x4E00;&#x6B65;&#xFF08;step&#xFF09;&#xFF1B;&#x4E00;&#x5171;5&#x6B65;&#xFF0C;5&#x6B65;&#x8D70;&#x5B8C;&#x53EB;&#x4E00;&#x6B21;&#x8FED;&#x4EE3;&#xFF08;epoch&#xFF09;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5F88;&#x5E38;&#x7528;&#xFF0C;&#x6279;&#x5927;&#x5C0F;&#xFF08;batch size&#xFF09;&#x901A;&#x5E38;&#x4E3A;2&#x7684;&#x5E42;&#x6B21;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x786C;&#x4EF6;&#x8BBF;&#x95EE;\n\n&#x6837;&#x672C;&#x76F8;&#x5173;&#x6837;&#x672C;&#x2014;&#x2014;&#x6536;&#x96C6;&#x7684;&#x771F;&#x5B9E;&#x6570;&#x636E;\n\n\n\ncn\nen\n&#x89E3;&#x91CA;\n\n\n\n&#x7279;&#x5F81;\nfeature\n&#x6837;&#x672C;&#x4E2D;&#x7684;&#x8F93;&#x5165;\n\n\n&#x6807;&#x7B7E;\nlabel\n&#x5E0C;&#x671B;&#x6A21;&#x578B;&#x9884;&#x6D4B;&#x7684;&#x503C;\n\n\n&#x53C2;&#x6570;/&#x6743;&#x91CD;\nparameter/weight\n&#x6A21;&#x578B;&#x5185;&#x90E8;&#x7684;&#x91CF;\n\n\n&#x6570;&#x636E;&#x96C6;\n&#x8BAD;&#x7EC3;&#x96C6;&#xFF0C;&#x5C31;&#x662F;&#x5E26;&#x6807;&#x7B7E;&#x7684;&#x6837;&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x8BAD;&#x7EC3;\n&#x9A8C;&#x8BC1;&#x96C6;&#xFF0C;&#x4EE3;&#x6807;&#x7B7E;&#x7684;&#x6837;&#x672C;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x7528;&#x4E8E;&#x8BAD;&#x7EC3;&#xFF0C;&#x56E0;&#x4E3A;&#x548C;&#x8BAD;&#x7EC3;&#x96C6;&#x540C;&#x6839;&#x540C;&#x6E90;&#x53EF;&#x4EE5;&#x6765;&#x8BC4;&#x4F30;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x8BF4;&#x662F;&#x53C2;&#x4E0E;&#x4E86;&#x8BAD;&#x7EC3;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x822C;&#x5F71;&#x54CD;&#x8BAD;&#x7EC3;&#x8005;&#x5BF9;&#x8D85;&#x53C2;&#x6570;&#x7684;&#x9009;&#x62E9;\n&#x6D4B;&#x8BD5;&#x96C6;&#xFF0C;&#x8BAD;&#x7EC3;&#x597D;&#x7528;&#x6765;&#x6D4B;&#x8BD5;&#x6027;&#x80FD;&#xFF0C;&#x4E0D;&#x5BF9;&#x6A21;&#x578B;&#x4EA7;&#x751F;&#x5F71;&#x54CD;\n\n&#x8BAD;&#x7EC3;&#x96C6;&#x597D;&#x6BD4;&#x5E26;&#x7B54;&#x6848;&#x7684;&#x8BD5;&#x9898;&#xFF0C;&#x9A8C;&#x8BC1;&#x96C6;&#x662F;&#x505A;&#x5B8C;&#x540E;&#x6709;&#x4EBA;&#x7ED9;&#x4F60;&#x6539;&#x6B63;&#x7684;&#x8BD5;&#x9898;&#xFF0C;&#x6D4B;&#x8BD5;&#x96C6;&#x5C31;&#x662F;&#x9AD8;&#x8003;&#x7684;&#x8BD5;&#x9898;\n&#x62DF;&#x5408;\n&#x6B20;&#x62DF;&#x5408;&#xFF0C;&#x6A21;&#x578B;&#x6CA1;&#x5B66;&#x4F1A;\n&#x8FC7;&#x62DF;&#x5408;&#xFF0C;&#x5B66;&#x4F1A;&#x4E86;&#xFF0C;&#x4F46;&#x4E5F;&#x53EA;&#x5B66;&#x4F1A;&#x4E86;&#x8BAD;&#x7EC3;&#x96C6;&#x7684;&#x5185;&#x5BB9;\n&#x9002;&#x5EA6;&#x62DF;&#x5408;&#xFF0C;&#x5B66;&#x4F1A;&#x4E86;&#xFF0C;&#x9047;&#x5230;&#x65B0;&#x7684;&#x4E5F;&#x4F1A;&#x505A;&#xFF0C;&#x80FD;&#x628A;&#x89C4;&#x5F8B;&#x8FC1;&#x79FB;&#x5230;&#x5176;&#x4ED6;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x53EB;&#x6CDB;&#x5316;&#x80FD;&#x529B;\n\n&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x8FD9;&#x57FA;&#x672C;&#x4E0A;&#x7740;&#x91CD;&#x4E8E;&#x201C;&#x51FD;&#x6570;&#x201D;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x6D88;&#x9664;&#x7EBF;&#x6027;&#xFF0C;&#x589E;&#x52A0;&#x968F;&#x673A;&#x6027;\n&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x6211;&#x4EEC;&#x5148;&#x4E0D;&#x770B;&#x4EC0;&#x4E48;&#x662F;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#xFF0C;&#x5C31;&#x5355;&#x8BF4;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x3002;&#x8F93;&#x5165;&#x5230;&#x8F93;&#x51FA;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x7B97;&#x8FC7;&#x53BB;&#xFF0C;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x524D;&#x4E00;&#x5C42;&#x7EC4;&#x6210;&#xFF0C;&#x7B97;&#x5230;&#x6700;&#x540E;&#x5C82;&#x4E0D;&#x662F;&#x5F52;&#x5230;&#x4E00;&#x4E2A;&#x7EBF;&#x6027;&#x65B9;&#x7A0B;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x80FD;&#x53BB;&#x62DF;&#x5408;&#x4E00;&#x4E9B;&#x975E;&#x7EBF;&#x6027;&#x60C5;&#x51B5;&#x6240;&#x4EE5;&#x5F15;&#x5165;&#x4E86;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x8BA1;&#x7B97;&#x662F;&#x6839;&#x636E;&#x7ED3;&#x679C;&#x4F1A;&#x4F7F;&#x80FD;/&#x5931;&#x80FD;&#x90E8;&#x5206;&#x51FD;&#x6570;&#xFF08;&#x795E;&#x7ECF;&#x5143;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x975E;&#x7EBF;&#x6027;&#x7684;&#x6211;&#x8BA4;&#x4E3A;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x5C31;&#x5E72;&#x4E00;&#x4EF6;&#x4E8B;&#x2014;&#x2014;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x80FD;&#x901A;&#x8FC7;&#x5C31;&#x8F93;&#x51FA;&#x81EA;&#x8EAB;/1&#xFF0C;&#x53CD;&#x4E4B;&#x8F93;&#x51FA;0/-1&#xFF1B;&#x4E0D;&#x540C;&#x7684;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x65E0;&#x975E;&#x662F;&#x5BF9;&#x8FD9;&#x4E2A;&#x8FC7;&#x6EE4;&#x6CD5;&#x5219;&#x4E0D;&#x540C;&#xFF0C;&#x6709;&#x4E9B;&#x662F;&#x4E00;&#x4E2A;&#x786E;&#x5207;&#x7684;&#x6570;&#xFF0C;&#x6709;&#x4E9B;&#x662F;&#x66F2;&#x7EBF;\n&#x624B;&#x52A8;&#x63A8;&#x5BFC;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x6211;&#x63A8;&#x8350;&#x5148;&#x53BB;&#x770B;3B1B&#x7684;&#x89C6;&#x9891;&#x7136;&#x540E;&#x518D;&#x63A8;&#x5BFC;&#xFF0C;&#x63A8;&#x5BFC;&#x65F6;&#x53EF;&#x4EE5;&#x4EFF;&#x7167;3B1B&#x7684;&#x8FD0;&#x7B97;&#x5C42;&#x964D;&#x7EF4;&#x5904;&#x7406;&#x4EE5;&#x53CA;&#x635F;&#x5931;&#x51FD;&#x6570;&#x7B80;&#x5316;&#x4E3A;&#x5DEE;&#x5E73;&#x65B9;&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x7528;&#x56F0;&#x4E8E;&#x7E41;&#x7410;&#x7684;&#x8BA1;&#x7B97;&#x53C8;&#x80FD;&#x624B;&#x52A8;&#x63A8;&#x5BFC;&#x3002;\n\n&#x524D;&#x5411;&#x4F20;&#x64AD;&#xFF0C;&#x5C31;&#x662F;&#x4ECE;&#x8F93;&#x5165;&#x7B97;&#x5230;&#x8F93;&#x51FA;\n&#x53CD;&#x5411;&#x4F20;&#x64AD;&#xFF0C;&#x672C;&#x8D28;&#x662F;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#xFF0C;&#x8FD9;&#x91CC;&#x7C98;&#x8D34;&#x4E00;&#x4E2A;3B1B&#x89C6;&#x9891;&#x4E0B;&#x7684;&#x8BC4;&#x8BBA;\n&#x3010;&#x4F8B;&#x3011;&#x8BBE;&#x51FD;&#x6570;y=f(u,v)&#xFF0C;&#x5176;&#x4E2D;u=g(x)&#xFF0C;v=h(w)&#xFF0C;&#x800C;w=l(x)&#x3002;&#x6C42;dy/dx&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x8FD9;&#x79CD;&#x9898;&#x8001;&#x5E08;&#x80AF;&#x5B9A;&#x8BB2;&#x8FC7;&#x3002;&#x4E00;&#x4E0A;&#x6765;&#x8001;&#x5E08;&#x80AF;&#x5B9A;&#x8981;&#x4F60;&#x4EEC;&#x5148;&#x753B;&#x4E00;&#x4E2A;&#x6709;&#x5411;&#x56FE;&#xFF0C;&#x7BAD;&#x5C3E;&#x662F;&#x81EA;&#x53D8;&#x91CF;&#xFF0C;&#x7BAD;&#x5934;&#x6307;&#x5411;&#x56E0;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x7BAD;&#x5934;&#x5C31;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x7136;&#x540E;&#x4E0B;&#x4E00;&#x6B65;&#x8001;&#x5E08;&#x5C31;&#x8981;&#x6211;&#x4EEC;&#x4ECE;&#x6709;&#x5411;&#x56FE;&#x7684;&#x672B;&#x5C3E;&#x5F80;&#x201C;&#x524D;&#x201D;&#x53CD;&#x7740;&#x201C;&#x5012;&#x201D;&#xFF0C;&#x4E00;&#x76F4;&#x201C;&#x5012;&#x201D;&#x5230;&#x8981;&#x6C42;&#x5199;&#x51FA;&#x7684;&#x5BFC;&#x6570;&#x7684;&#x81EA;&#x53D8;&#x91CF;&#x5904;&#xFF0C;&#x7136;&#x540E;&#x6309;&#x8D70;&#x8FC7;&#x7684;&#x8DEF;&#x5F84;&#x7528;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#x5199;&#x51FA;&#x504F;&#x5BFC;&#x6570;&#x4E58;&#x79EF;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x6761;&#x8DEF;&#x5F84;&#x5C31;&#x6C42;&#x5404;&#x8DEF;&#x5F84;&#x6240;&#x5F97;&#x4E58;&#x79EF;&#x4E4B;&#x548C;&#x3002;&#x600E;&#x4E48;&#x6837;&#xFF0C;&#x60F3;&#x8D77;&#x6765;&#x4E86;&#x6CA1;&#xFF1F;&#x597D;&#x4E86;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x7B97;&#x6CD5;&#x554A;&#x554A;&#x554A;&#xFF01;\n\n\n\n&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x5C31;&#x662F;&#x5229;&#x7528;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#x6C42;&#x5BFC;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F60;&#x4F1A;&#x7528;&#x5230; &#x201C;&#x4E4B;&#x524D;&#x201D; &#x7684; &#x201C;&#x5185;&#x5BB9;&#x201D;&#xFF0C;&#x6362;&#x79CD;&#x770B;&#x6CD5;&#x4E0D;&#x5C31;&#x662F;&#x201C;&#x53CD;&#x76F8;&#x201D;&#x5417;\n&#x68AF;&#x5EA6;&#x6D88;&#x5931;&#x4E0E;&#x7206;&#x70B8;&#x1F4A5;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x5C31;&#x662F;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#xFF0C;&#x90A3;&#x4E48;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#x4E3A;&#x4E86;&#x6C42;&#x51FA;&#x7ED3;&#x679C;&#x52BF;&#x5FC5;&#x4F1A;&#x5E26;&#x7740;&#x4E00;&#x5927;&#x4E32;&#x6570;&#x6765;&#x8FDE;&#x4E58;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x6570;&#x5F88;&#x5C0F;&#xFF0C;&#x90A3;&#x5B8C;&#x4E86;&#xFF0C;&#x8FDE;&#x4E58;&#x5B8C;&#x68AF;&#x5EA6;&#x90FD;&#x6CA1;&#x4E86;&#xFF1B;&#x5982;&#x679C;&#x5927;&#x4E8E;1&#xFF0C;&#x68AF;&#x5EA6;&#x592A;&#x5927;&#x5C31;&#x7206;&#x70B8;&#x1F4A5;&#x4E86;&#x90A3;&#x4E48;&#x4E00;&#x5927;&#x4E32;&#x6570;&#x90FD;&#x662F;&#x54EA;&#x91CC;&#x6765;&#x7684;&#x5462;&#xFF0C;&#x592A;&#x574F;&#x4E86;&#x3002;&#x89C2;&#x5BDF;&#x68AF;&#x5EA6;&#x94FE;&#x5F0F;&#x6CD5;&#x5219;&#x5C55;&#x5F00;&#x7684;&#x516C;&#x5F0F;&#xFF08;&#x5982;&#x679C;&#x4F60;&#x770B;&#x89C6;&#x9891;&#x4E86;&#x7684;&#x8BDD;&#xFF09;&#x4E0D;&#x96BE;&#x53D1;&#x73B0;&#xFF0C;\n\n&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x5BFC;&#x6570;&#xFF0C;&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#x4E0D;&#x540C;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x56FE;&#x50CF;&#xFF0C;&#x627E;&#x90A3;&#x79CD;&#x8F93;&#x51FA;&#x503C;&#x4E0D;&#x662F;1&#x5C31;&#x662F;0&#x7684;&#x6700;&#x597D;\n&#x53C2;&#x6570;/&#x6743;&#x91CD;&#x503C;&#xFF0C;\n&#x901A;&#x8FC7;&#x968F;&#x673A;&#x5316;&#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x76F8;&#x540C;&#x7684;&#x53C2;&#x6570;&#x610F;&#x5473;&#x7740;&#x540E;&#x9762;&#x7684;&#x795E;&#x7ECF;&#x5143;&#x8F93;&#x5165;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x54EA;&#x6709;&#x4EC0;&#x4E48;&#x610F;&#x4E49;&#x5462;\n&#x63A7;&#x5236;&#x65B9;&#x5DEE;&#xFF0C;&#x8FD9;&#x91CC;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x770B;&#x539F;&#x6587;&#xFF0C;&#x5F88;&#x6E05;&#x695A;&#x3002;&#x603B;&#x4E4B;&#x4E00;&#x822C;&#x7528;&#x6B63;&#x6001;&#x5206;&#x5E03;&#x521D;&#x59CB;&#x5316;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;pytorch&#x4F1A;&#x81EA;&#x52A8;&#x5E2E;&#x4F60;&#x521D;&#x59CB;&#x5316;&#x597D;\n\n\n\npytorch&#x5B9E;&#x73B0;&#x6CA1;&#x4EC0;&#x4E48;&#x597D;&#x8BF4;&#x7684;&#xFF0C;&#x624B;&#x6572;&#x4E00;&#x904D;&#xFF0C;&#x7740;&#x91CD;&#x7406;&#x89E3;&#x524D;&#x5411;&#x53CD;&#x5411;&#x4F20;&#x64AD;&#x90E8;&#x5206;\n&#x4F18;&#x5316;&#x6DF1;&#x5EA6;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E3A;&#x4EC0;&#x4E48;&#x662F;&#x6DF1;&#x5EA6;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x7528;&#x4E00;&#x4E2A;&#x5927;&#x5E73;&#x5C42;&#x6765;&#x8BA1;&#x7B97;&#x592A;&#x8D39;&#x7B97;&#x529B;&#x548C;&#x5B58;&#x50A8;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x7684;&#x7279;&#x6027;&#x5C31;&#x662F;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5C42;&#x7EA7;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#xFF1B;&#x4E00;&#x5C42;&#x63D0;&#x53D6;&#x7B80;&#x5355;&#x7279;&#x5F81;&#xFF0C;&#x7136;&#x540E;&#x540E;&#x9762;&#x9010;&#x5C42;&#x7684;&#x52A0;&#x6DF1;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#xFF0C;&#x6700;&#x7EC8;&#x5C31;&#x80FD;&#x63D0;&#x53D6;&#x51FA;&#x660E;&#x786E;&#x7684;&#x7279;&#x5F81;&#x6765;&#x3002;&#x6240;&#x4EE5;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x8981;&#x6DF1;&#x800C;&#x7A84;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6D45;&#x800C;&#x5BBD;\n&#x6B63;&#x5219;&#x5316;&#x9632;&#x6B62;&#x8FC7;&#x62DF;&#x5408;\n\nL1&#xFF0C;&#x635F;&#x5931;&#x52A0;&#x4E00;&#x5B9A;&#x6BD4;&#x4F8B;&#x7684;&#x6A21;&#x578B;&#x6240;&#x6709;&#x53C2;&#x6570;&#x7EDD;&#x5BF9;&#x503C;&#x4E4B;&#x548C;&#xFF0C;&#x7EDD;&#x5BF9;&#x503C;&#x51FD;&#x6570;&#x7684;&#x5BFC;&#x6570;&#x5728;x&#x5927;&#x4E8E;0&#x4E3A;1&#xFF0C;x&#x5C0F;&#x4E8E;0&#x4E3A;-1&#xFF0C;&#x5728;0&#x5904;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;&#x3002;&#x6240;&#x4EE5;&#x5B83;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x56FA;&#x5B9A;&#x901F;&#x5EA6;&#x964D;&#x4F4E;&#x53C2;&#x6570;&#x7684;&#x7EDD;&#x5BF9;&#x503C;&#xFF0C;&#x76F4;&#x5230;&#x4E3A;0&#x3002;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;\nL2&#xFF0C;&#x635F;&#x5931;&#x52A0;&#x4E00;&#x5B9A;&#x6BD4;&#x4F8B;&#x7684;&#x6A21;&#x578B;&#x6240;&#x6709;&#x53C2;&#x6570;&#x5E73;&#x65B9;&#x548C;&#xFF0C;&#x800C;&#x5E73;&#x65B9;&#x9879;&#x7684;&#x5BFC;&#x6570;&#x4E3A;2x&#xFF0C;x&#x8D8A;&#x63A5;&#x8FD1;&#x96F6;&#xFF0C;&#x68AF;&#x5EA6;&#x4F1A;&#x8D8A;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x53C2;&#x6570;&#x53EA;&#x4F1A;&#x63A5;&#x8FD1;0&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x7B49;&#x4E8E;0&#x3002;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;\n\n&#x4F18;&#x5316;&#x7684;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x4E3B;&#x8981;&#x662F;&#x9488;&#x5BF9;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#xFF0C;&#x6291;&#x5236;&#x9707;&#x8361;&#xFF0C;&#x60EF;&#x6027;&#x52A0;&#x901F;\n\n&#x52A8;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x4E0D;&#x7528;&#x53C2;&#x6570;&#x68AF;&#x5EA6;&#x6765;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x8BA1;&#x7B97;&#x53C2;&#x6570;&#x68AF;&#x5EA6;&#x7684;&#x6307;&#x6570;&#x52A0;&#x6743;&#x5E73;&#x5747; V&#xFF0C;&#x518D;&#x7528;&#x53C2;&#x6570;&#x68AF;&#x5EA6;&#x51CF;&#x53BB;&#x5B66;&#x4E60;&#x7387;&#x4E58;V&#x6765;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#xFF0C;w = w - lr * V&#x3002;&#x514B;&#x670D;&#x4F20;&#x7EDF;&#x65B9;&#x6CD5;&#x7684;&#x8D8B;&#x8FD1;&#x6700;&#x5C0F;&#x70B9;&#x65F6;&#x7684;&#x9707;&#x8361;&#x548C;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#x3002;&#x6307;&#x6570;&#x52A0;&#x6743;&#x5E73;&#x5747;&#x548C;&#x5C31;&#x662F;&#x5C06;&#x8FC7;&#x53BB;&#x503C;&#x5F97;&#x6743;&#x91CD;&#x964D;&#x4F4E;&#xFF0C;&#x6570;&#x636E;&#x8D8A;&#x65B0;&#x9C9C;&#x8D8A;&#x91CD;&#x89C6;&#x3002;&#x4E00;&#x53E5;&#x8BDD;&#x6765;&#x8BF4;&#x52A8;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x6291;&#x5236;&#x9707;&#x8361;&#xFF0C;&#x60EF;&#x6027;&#x52A0;&#x901F;&#x3002;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;\n\n&#x5747;&#x65B9;&#x6839;&#x4F18;&#x5316;&#xFF0C;&#x5BF9;&#x52A8;&#x91CF;&#x8FDB;&#x884C;&#x6539;&#x8FDB;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x81EA;&#x9002;&#x5E94;&#x5B66;&#x4E60;&#x7387;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x52A8;&#x6001;&#x7684;&#x8C03;&#x6574;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x6B65;&#x957F;&#x3002;&#x5982;&#x4F55;&#x52A8;&#x6001;&#x8C03;&#x6574;&#xFF1A;&#x8FD8;&#x662F;&#x6307;&#x6570;&#x52A0;&#x6743;&#x5E73;&#x5747;&#xFF0C;&#x5148;&#x8BA1;&#x7B97;&#x68AF;&#x5EA6;g_w&#xFF1B;&#x7136;&#x540E;&#x8BA1;&#x7B97;g_w^2&#x7684;&#x6307;&#x6570;&#x52A0;&#x6743;&#x5E73;&#x5747; V&#xFF0C;&#x66F4;&#x65B0;&#x53C2;&#x6570; w = w - (g_w * lr)/(sqrt(V) + t) t&#x5F88;&#x5C0F;1e-8&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x770B;&#x4F5C;w = w - (g_w * lr)/sqrt(V)&#x8FD9;&#x6837;&#xFF0C;&#x53C2;&#x6570;&#x68AF;&#x5EA6;&#x5982;&#x679C;&#x4E00;&#x76F4;&#x5F88;&#x5927;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5B66;&#x6162;&#x4E00;&#x70B9;&#xFF1B;&#x53CD;&#x4E4B;&#x68AF;&#x5EA6;&#x5C0F;&#x7684;&#x5C31;&#x5B66;&#x5FEB;&#x70B9;\n\nAdam&#xFF0C;&#x7ED3;&#x5408;&#x4E0A;&#x9762;&#x4E24;&#x8005;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x4F18;&#x5316;&#x5668;&#xFF0C;&#x5148;&#x7B97;&#x52A8;&#x91CF;&#x7684;V1&#x518D;&#x7B97;&#x5747;&#x65B9;&#x6839;&#x7684;V2&#xFF0C;&#x7136;&#x540E;&#x4FEE;&#x6B63;&#x8FD9;&#x4FE9;&#xFF0C;&#x518D;&#x66F4;&#x65B0;&#x53C2;&#x6570;\n\n\n&#x6743;&#x91CD;&#x8870;&#x51CF;&#x9632;&#x6B62;&#x8FC7;&#x62DF;&#x5408;&#x4F20;&#x7EDF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x65F6;&#xFF0C;&#x548C;&#x6B63;&#x5219;&#x5316;&#x7684;L2&#x7C7B;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x76F4;&#x63A5;&#x5BF9;&#x53C2;&#x6570;&#x505A;&#x624B;&#x811A;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;Adam&#x5C31;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5E94;&#x4E3A;L2&#x662F;&#x7528;&#x5728;&#x635F;&#x5931;&#x51FD;&#x6570;&#x8FD9;&#x4E00;&#x7EA7;&#xFF0C;Adam&#x4E2D;&#x4F1A;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#x68AF;&#x5EA6;&#xFF0C;&#x548C;&#x76F4;&#x63A5;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#x7684;&#x6743;&#x91CD;&#x8870;&#x51CF;&#x4E0D;&#x4E00;&#x81F4;\nDropout&#x9632;&#x6B62;&#x8FC7;&#x62DF;&#x5408;&#x8FD9;&#x4E2A;&#x5389;&#x5BB3;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x6309;p&#x6982;&#x7387;&#x7981;&#x7528;&#x9690;&#x85CF;&#x5C42;&#x795E;&#x7ECF;&#x5143;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x4F7F;&#x80FD;&#x7684;&#x795E;&#x7ECF;&#x5143;&#x8FDB;&#x884C;&#x9664;&#x4EE5;&#xFF08;1-p&#xFF09;&#x7684;&#x7F29;&#x653E;&#xFF0C;&#x4FDD;&#x8BC1;&#x671F;&#x671B;&#x503C;&#x4E0D;&#x53D8;&#x3002;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x795E;&#x7ECF;&#x5143;&#x90FD;&#x80FD;&#x5B66;&#x5230;&#x7279;&#x5F81;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x67D0;&#x51E0;&#x4E2A;&#x795E;&#x7ECF;&#x5143;&#x3002;&#x4F46;&#x662F;&#x63A8;&#x7406;&#x9636;&#x6BB5;&#x4E0D;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5207;&#x6362;\n&#x6279;&#x91CF;&#x5F52;&#x4E00;&#x5316;&#x8BAD;&#x7EC3;&#x66F4;&#x7A33;&#x5B9A;&#xFF0C;&#x6536;&#x655B;&#x66F4;&#x5FEB;&#x3002;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5BF9;&#x8F93;&#x5165;&#x5F52;&#x4E00;&#x5316;&#xFF0C;&#x4F46;&#x662F;&#x9690;&#x85CF;&#x5C42;&#x4E2D;&#x8BA1;&#x7B97;&#x53C8;&#x4F1A;&#x62C9;&#x5927;&#x6570;&#x503C;&#x8303;&#x56F4;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x5565;&#x8981;&#x8FD9;&#x6837;&#x7528;&#xFF0C;&#x603B;&#x4E4B;&#x5C31;&#x662F;&#x7A33;&#x5B9A;&#x6BCF;&#x4E2A;&#x9636;&#x6BB5;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x80FD;&#x9632;&#x6B62;&#x8FC7;&#x62DF;&#x5408;&#x3002;&#x4F46;&#x662F;&#x63A8;&#x7406;&#x9636;&#x6BB5;&#x4E0D;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5207;&#x6362;\n&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x5927;&#x7684;&#x8981;&#x1F48A;&#x6765;&#x4E86;\n&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x6211;&#x89C9;&#x5F97;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8D85;&#x5927;&#x8F93;&#x5165;&#xFF08;&#x5982;&#x56FE;&#x7247;&#xFF09;&#xFF0C;&#x5C06;&#x8F93;&#x5165;&#x8FDB;&#x4E00;&#x6B65;&#x62C6;&#x5206;&#x4E3A;&#x4E00;&#x5C0F;&#x6B65;&#x4E00;&#x5C0F;&#x6B65;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x4E00;&#x5C0F;&#x6B65;&#x7EC4;&#x6210;&#x4E00;&#x5927;&#x6B65;&#x3002;&#x8FD9;&#x5C31;&#x7C7B;&#x4F3C;&#x4E8E;&#x7F16;&#x7A0B;&#x7684;&#x7EC4;&#x5408;&#x601D;&#x60F3;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x901A;&#x8FC7;&#x7EC4;&#x5408;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x80FD;&#x521B;&#x9020;&#x51FA;&#x9002;&#x7528;&#x4E8E;&#x4E0D;&#x540C;&#x60C5;&#x51B5;&#x7684;&#x65B0;&#x65B9;&#x6CD5;&#x3002;&#x5377;&#x79EF;&#x5C31;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x5F20;1000x1000&#x50CF;&#x7D20;&#x7684;RGB&#x56FE;&#x7247;&#xFF0C;&#x8FD8;&#x80FD;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x7684;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x5417;&#xFF0C;&#x8FD9;&#x56FE;&#x7247;&#x662F;300&#x4E07;&#x7684;&#x8F93;&#x5165;&#x7279;&#x5F81;&#xFF0C;&#x9690;&#x85CF;&#x5C42;1000&#x4E2A;&#x795E;&#x7ECF;&#x5143;&#x5C31;&#x662F;30&#x4EBF;&#x53C2;&#x6570;&#xFF0C;&#x592A;&#x54C8;&#x4EBA;&#x4E86;&#x6240;&#x4EE5;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x6B38;&#x1F600;&#x261D;&#xFE0F;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x4E00;&#x6B21;&#x53EA;&#x7B97;3x3&#x7684;&#x5757;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#xFF01;&#x4E00;&#x5757;&#x4E00;&#x5757;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x8BA1;&#x7B97;&#x53C2;&#x6570;&#x8FD9;&#x5C31;&#x662F;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#xFF0C;&#x5982;&#x679C;&#x5B66;&#x8FC7;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x5E94;&#x8BE5;&#x4E0D;&#x964C;&#x751F;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x7B97;&#x6CD5;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x5377;&#x79EF;\n&#x600E;&#x4E48;&#x5377;&#x79EF;&#x5BF9;&#x5E94;&#x4F4D;&#x7F6E;&#x76F8;&#x4E58;&#x518D;&#x76F8;&#x52A0;\n&#x540D;&#x8BCD;\n&#x611F;&#x53D7;&#x91CE;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;3x3&#x5377;&#x79EF;&#x751F;&#x6210;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#xFF08;&#x50CF;&#x7D20;&#xFF09;&#x7684;&#x611F;&#x53D7;&#x91CE;&#x662F;3x3&#xFF0C;&#x518D;&#x505A;3x3&#x5377;&#x79EF;&#xFF0C;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#xFF08;&#x50CF;&#x7D20;&#xFF09;&#x7684;&#x611F;&#x53D7;&#x91CE;&#x662F;5x5&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x611F;&#x53D7;&#x91CE;&#x7528;&#x6765;&#x8BF4;&#x660E;&#x6BCF;&#x4E2A;&#x7279;&#x5F81;&#x662F;&#x4ECE;&#x539F;&#x56FE;&#x50CF;&#x591A;&#x5C11;&#x50CF;&#x7D20;&#x6784;&#x6210;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x5C42;&#x7684;&#x7279;&#x5F81;&#x611F;&#x53D7;&#x91CE;&#x4E0D;&#x540C;\n&#x5377;&#x79EF;&#x6838;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;&#x5947;&#x6570;&#x6B63;&#x65B9;&#x5F62;\n&#x6B65;&#x957F;&#xFF0C;&#x79FB;&#x52A8;&#x50CF;&#x7D20;&#x70B9;&#x6570;&#x91CF;&#xFF0C;&#x6B65;&#x957F;&#x4E3A;1&#x5C31;&#x662F;&#x4E00;&#x6B21;&#x79FB;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x70B9;\n&#x586B;&#x5145;&#xFF0C;&#x8FB9;&#x7F18;&#x50CF;&#x7D20;&#x53C2;&#x4E0E;&#x8BA1;&#x7B97;&#x6B21;&#x6570;&#x5C11;&#xFF0C;&#x6240;&#x4EE5;&#x624B;&#x52A8;&#x5728;&#x539F;&#x56FE;&#x5916;&#x56F4;&#x586B;&#x5145;&#x50CF;&#x7D20;&#x6765;&#x786E;&#x4FDD;&#x8FB9;&#x7F18;&#x50CF;&#x7D20;&#x53C2;&#x4E0E;&#x8FD0;&#x7B97;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x80FD;&#x4FDD;&#x8BC1;&#x5377;&#x79EF;&#x540E;&#x56FE;&#x7247;&#x4E8E;&#x539F;&#x56FE;&#xFF08;&#x672A;&#x88AB;&#x586B;&#x5145;&#x65F6;&#xFF09;&#x5C3A;&#x5BF8;&#x76F8;&#x7B49;\n&#x4E0A;&#x91C7;&#x6837;&#xFF0C;&#x6269;&#x5927;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;\n&#x4E0B;&#x91C7;&#x6837;&#xFF0C;&#x51CF;&#x5C0F;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#xFF0C;&#x8B6C;&#x5982;&#x6C60;&#x5316;\n\n&#x7279;&#x5F81;&#x56FE;&#x8BA1;&#x7B97;&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5C3A;&#x5BF8;&#x6216;&#x8005;&#x8F93;&#x5165;&#x5C3A;&#x5BF8;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x53C8;&#x8981;&#x7ED3;&#x5408;&#x5377;&#x79EF;&#x6838;&#x6765;&#x8BA1;&#x7B97;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;\n\n&#x8F93;&#x5165; Wi Hi\n&#x5377;&#x79EF;&#x6838;&#x5C3A;&#x5BF8; K &#x586B;&#x5145;&#x503C; P &#x5377;&#x79EF;&#x64CD;&#x4F5C;&#x6B65;&#x957F; S\n&#x8F93;&#x51FA; Wo Ho\n\n\n&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x4E00;&#x4E2A;6x6&#x56FE;&#x7247;,&#x5377;&#x79EF;&#x6838;3x3&#xFF0C;&#x586B;&#x5145;0&#xFF0C;&#x6B65;&#x957F;1&#xFF1B;Wi=Hi=6&#xFF0C;K=3&#xFF0C;P=0&#xFF0C;S=1&#x90A3;&#x4E48;&#x8F93;&#x51FA;&#xFF1A;Wo = Ho = 1 + Wi - K&#x3002;&#x4ECE;&#x5BBD;&#x5EA6;&#x770B;&#xFF0C;&#x4E00;&#x4E2A;&#x5377;&#x79EF;&#x6838;&#x5148;&#x5360;&#x4E86;3&#xFF0C;&#x540E;&#x9762;&#x8FD8;&#x6709; Wi-K &#x4E2A;&#x50CF;&#x7D20;&#xFF0C;&#x6BCF;&#x79FB;&#x4E00;&#x4E2A;&#x50CF;&#x7D20;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x8F93;&#x51FA;&#xFF0C;&#x4E0D;&#x7406;&#x89E3;&#x7684;&#x53EF;&#x4EE5;&#x5728;&#x7EB8;&#x4E0A;&#x753B;&#x56FE;\n&#x5982;&#x679C;&#x8FD9;&#x4E2A;6x6&#x56FE;&#x7247;&#x5468;&#x56F4;&#x586B;&#x5145;&#x4E86;1&#x5462;&#xFF0C;Wi=Hi=6&#xFF0C;K=3&#xFF0C;P=1&#xFF0C;S=1&#x8F93;&#x51FA;Wo = Ho = 1 + (Wi+2P-K)/S&#x3002;&#x4ECE;&#x5BBD;&#x6765;&#x770B;&#xFF0C;&#x586B;&#x5145;&#x540E;&#x7684;&#x56FE;&#x7247;&#x5B9E;&#x9645;&#x5BBD;&#x4E3A; Wi+2P&#xFF0C;&#x548C;&#x4E0A;&#x9762;&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x4E00;&#x5F00;&#x59CB;&#x7684;&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x540E;&#x9762;&#x8FD8;&#x4F1A;&#x4EA7;&#x751F; Wi+2P-K &#x4E2A;&#x8F93;&#x51FA;&#xFF0C;&#x8FD9;&#x662F;&#x5047;&#x5B9A;&#x6B65;&#x957F;S=1&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6240;&#x4EE5;&#x5177;&#x4F53;&#x7684;&#x8F93;&#x51FA;&#x8FD8;&#x8981;&#x9664;&#x4EE5;S\n&#x8FD9;&#x65F6;&#x5019;&#x4F60;&#x53EF;&#x4EE5;&#x6709;&#x7591;&#x95EE;&#xFF0C;&#x5982;&#x679C;&#x9664;&#x4EE5;S&#x9664;&#x4E0D;&#x5C3D;&#x5462;&#xFF0C;&#x8B6C;&#x5982;&#x4E0A;&#x56FE;&#xFF0C;Wi+2P-K = 6+2x1-3=5&#xFF0C;&#x5982;&#x679C;S=2&#x5C31;&#x4F1A;&#x9664;&#x4E0D;&#x5C3D;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x5411;&#x4E0B;&#x53D6;&#x6574;\n\n&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x6709;&#x4EC0;&#x4E48;&#x7528;&#xFF1F;&#x55EF;&#x2026;&#x5982;&#x679C;&#x4F60;&#x5728;&#x786E;&#x5B9A;&#x4EE5;&#x4E0A;&#x90E8;&#x5206;&#x53C2;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8981;&#x6C42;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x5C31;&#x6709;&#x7528;&#x4E86;&#xFF1B;&#x6BD4;&#x5982;&#x8981;&#x5C06;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x5BBD;&#x5EA6;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x65F6;&#x586B;&#x5145;&#x503C;&#x5E94;&#x4E3A;&#x591A;&#x5C11;&#xFF0C;Wi = 1 + Wi + 2P -K&#xFF0C;&#x90A3;&#x4E48;P = (K - 1)/2\n&#x6C60;&#x5316;&#x5C42;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x8BA8;&#x8BBA;&#x7684;&#x90FD;&#x662F;&#x5377;&#x79EF;&#x5C42;&#xFF0C;&#x800C;&#x5728;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x4E2D;&#x8FD8;&#x8981;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x5C31;&#x662F;&#x6C60;&#x5316;&#x5C42;&#x3002;&#x6C60;&#x5316;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#xFF1F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x51CF;&#x5C11;&#x7279;&#x5F81;&#x56FE;&#x5927;&#x5C0F;&#xFF0C;&#x7528;&#x4E8E;&#x8FC7;&#x6EE4;&#x566A;&#x58F0;&#xFF0C;&#x63D0;&#x53D6;&#x6700;&#x5F3A;&#x503C;&#x901A;&#x5E38;&#x6C60;&#x5316;&#x5C42;&#x5927;&#x5C0F;&#x4E3A;2x2&#xFF0C;&#x6B65;&#x957F;&#x4E3A;2&#xFF0C;&#x4E0D;&#x586B;&#x5145;&#xFF0C;&#x63D0;&#x53D6;&#x7A97;&#x53E3;&#x5185;&#x6700;&#x5927;&#x503C;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x65E0;&#x91CD;&#x53E0;&#x7684;&#x63D0;&#x53D6;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x80FD;&#x51CF;&#x5C0F;&#x7279;&#x5F81;&#x56FE;&#x5C3A;&#x5BF8;&#xFF0C;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x5377;&#x79EF;&#x5C42;&#x540E;&#xFF0C;&#x800C;&#x4E14;&#x6C60;&#x5316;&#x4E0D;&#x7528;&#x8BA1;&#x7B97;&#xFF0C;&#x53EA;&#x662F;&#x63D0;&#x53D6;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x8FD0;&#x7B97;&#x5F88;&#x5FEB;&#x6B64;&#x5916;&#x8FD8;&#x8981;&#x4E00;&#x79CD;&#x6C60;&#x5316;&#x662F;&#x63D0;&#x53D6;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x79F0;&#x4E4B;&#x4E3A;&#x5E73;&#x5747;&#x6C60;&#x5316;\n&#x4ECE;&#x5377;&#x79EF;&#x5230;&#x56FE;&#x50CF;&#x5206;&#x7C7B;&#x5728;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x662F;&#x76F4;&#x63A5;&#x5C06;&#x56FE;&#x7247;&#x7684;&#x50CF;&#x7D20;&#x4FE1;&#x606F;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x7136;&#x540E;&#x7ECF;&#x8FC7;&#x5168;&#x8FDE;&#x63A5;&#x6765;&#x5206;&#x7C7B;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5148;&#x7528;&#x5377;&#x79EF;&#x63D0;&#x53D6;&#x9AD8;&#x7EA7;&#x7279;&#x5F81;&#xFF0C;&#x518D;&#x5C06;&#x9AD8;&#x7EA7;&#x7279;&#x5F81;&#x8F93;&#x5165;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x8FDB;&#x884C;&#x5206;&#x7C7B;&#x5377;&#x79EF;-&gt;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;-&gt;&#x6C60;&#x5316;-&gt;&#x5C55;&#x5E73;-&gt;&#x5168;&#x8FDE;&#x63A5;-&gt;Dropout\n&#x73B0;&#x5728;&#x6765;&#x8BA1;&#x7B97;&#x4E00;&#x4E0B;&#x5404;&#x5C42;&#x53C2;&#x6570;&#xFF0C;&#x7528;&#x4E0A;&#x4E4B;&#x524D;&#x7684;&#x7279;&#x5F81;&#x56FE;&#x8BA1;&#x7B97; Wo = 1 + (Wi+2P-K)/S\n\n&#x8F93;&#x5165;28x28x1\nc1&#xFF0C;&#x5377;&#x79EF;&#x5C42;1&#xFF1A;8&#x4E2A;3x3&#x5377;&#x79EF;&#x6838;&#xFF0C;P=1 S=1 &#x8F93;&#x51FA;28x28x8&#xFF0C;&#x540E;&#x9762;&#x7684;x8&#x662F;&#x56E0;&#x4E3A;8&#x4E2A;&#x5377;&#x79EF;&#x6838;&#xFF0C;Wo = 1+(28+2x1-3)/1 = 28\np1&#xFF0C;&#x6C60;&#x5316;&#x5C42;1&#xFF1A;&#x6C60;&#x5316;&#x6838;2x2&#xFF0C;S=2&#xFF0C;&#x8F93;&#x51FA;14x14x8&#xFF0C;Wo = 1+(28-2)/2 = 14\nc2&#xFF0C;&#x5377;&#x79EF;&#x5C42;2&#xFF1A;16&#x4E2A;3x3&#x5377;&#x79EF;&#x6838;&#xFF0C;P=1 S=1 &#x8F93;&#x51FA;14x14x16&#xFF0C;&#x540E;&#x9762;&#x7684;x16&#x662F;&#x56E0;&#x4E3A;16&#x4E2A;&#x5377;&#x79EF;&#x6838;&#xFF0C;Wo = 1+(14+2x1-3)/1 = 14\np2&#xFF0C;&#x6C60;&#x5316;&#x5C42;2&#xFF1A;&#x6C60;&#x5316;&#x6838;2x2&#xFF0C;S=2&#xFF0C;&#x8F93;&#x51FA;7x7x16&#xFF0C;Wo = 1+(14-2)/2 = 7\nc3&#xFF0C;&#x5377;&#x79EF;&#x5C42;3&#xFF1A;32&#x4E2A;3x3&#x5377;&#x79EF;&#x6838;&#xFF0C;P=0 S=1 &#x8F93;&#x51FA;5x5x32&#xFF0C;&#x540E;&#x9762;&#x7684;x32&#x662F;&#x56E0;&#x4E3A;32&#x4E2A;&#x5377;&#x79EF;&#x6838;&#xFF0C;Wo = 1+(7-3)/1 = 5\n&#x5C55;&#x5E73;&#x64CD;&#x4F5C;&#xFF1A;&#x9AD8;&#x7EF4;&#x964D;&#x4E3A;&#x4E00;&#x7EF4; 5x5x32 = 1x800&#x4E2A;&#x7279;&#x5F81;\nf1&#xFF0C;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#xFF1A;&#x8F93;&#x5165;800&#x7279;&#x5F81;&#xFF0C;&#x8F93;&#x51FA;64&#x7279;&#x5F81;\no1&#xFF0C;&#x8F93;&#x51FA;&#x5C42;&#xFF1A;&#x8F93;&#x5165;&#x7279;&#x5F81;64&#xFF0C;&#x8F93;&#x51FA;&#x7279;&#x5F81;10\n\n\n\n\n&#x5C42;\n&#x53C2;&#x6570;&#x91CF;\n&#x8BA1;&#x7B97;\n\n\n\nc1\n80\n&#x5377;&#x79EF;&#x6838;3x3x1 &#x504F;&#x7F6E;1 &#x53C2;&#x6570;10&#xFF0C;8&#x4E2A;&#x6838;&#xFF1B;(3x3x1+1)x8=80\n\n\nc2\n1168\nc1&#x7684;&#x5377;&#x79EF;&#x6838;3x3x8 &#x504F;&#x7F6E;1 &#x53C2;&#x6570;73&#xFF0C;16&#x4E2A;&#x6838;&#xFF1B;(3x3x8+1)x16=1168\n\n\nc3\n4640\n(3x3x16+1)x32=4640\n\n\nf1\n51264\n800x64+64=51264 &#x53C2;&#x6570;&#x52A0;&#x504F;&#x7F6E;\n\n\no1\n650\n64x10+10=650\n\n\n&#x53EF;&#x89C1;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x53C2;&#x6570;&#x91CF;&#x76F8;&#x5F53;&#x5927;\n&#x4ECE;&#x7279;&#x5F81;&#x56FE;&#x5C3A;&#x5BF8;&#x53D8;&#x5316;&#x4E5F;&#x80FD;&#x770B;&#x51FA;&#xFF0C;&#x968F;&#x7740;&#x7F51;&#x7EDC;&#x6DF1;&#x5EA6;&#x52A0;&#x6DF1;&#xFF0C;&#x7279;&#x5F81;&#x56FE;&#x51CF;&#x5C0F;&#x800C;&#x901A;&#x9053;&#x6570;&#x91CF;&#x589E;&#x52A0;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BC6;&#x522B;&#x51FA;&#x7684;&#x9AD8;&#x7EA7;&#x7279;&#x5F81;&#x53D8;&#x591A;&#x3002;&#x4F4E;&#x7EA7;&#x7684;&#x7279;&#x5F81;&#x56FE;&#x91CD;&#x89C6;&#x4F4D;&#x7F6E;&#xFF0C;&#x611F;&#x53D7;&#x91CE;&#x5C0F;&#xFF08;&#x5E9F;&#x8BDD;&#xFF0C;&#x5E95;&#x5C42;&#x611F;&#x53D7;&#x91CE;&#x80FD;&#x4E0D;&#x5C0F;&#x5417;&#xFF09;&#x9700;&#x8981;&#x5927;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x800C;&#x5230;&#x540E;&#x9762;&#x90FD;&#x662F;&#x9AD8;&#x7EA7;&#x7279;&#x5F81;&#xFF0C;&#x4F4D;&#x7F6E;&#x5DF2;&#x7ECF;&#x4E0D;&#x91CD;&#x8981;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x7279;&#x5F81;&#x5DF2;&#x7ECF;&#x88AB;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x4E86;\n&#x4F18;&#x5316;&#x4E00;&#x4E0B;&#x8FC7;&#x5927;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#x5C42;\n1x1&#x5377;&#x79EF;&#x6838;&#x4ECE;&#x4E4B;&#x524D;&#x7684;&#x8BA1;&#x7B97;&#x53C2;&#x6570;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x5B9E;&#x5728;&#x662F;&#x592A;&#x5927;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F7F;&#x7528;1x1&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x6BD4;&#x5982;&#x4E4B;&#x524D;&#x7684;c3&#x5C42;&#x8F93;&#x51FA;5x5x32&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5728;&#x540E;&#x9762;&#x4F7F;&#x7528;1x1x4&#x7684;&#x5377;&#x79EF;&#x5C42;&#xFF0C;&#x90A3;&#x8F93;&#x51FA;&#x5C31;&#x53D8;&#x6210;5x5x4&#xFF0C;&#x5C55;&#x5E73;&#x540E;&#x4E5F;&#x53EA;&#x6709;100&#x4E2A;&#x7279;&#x5F81;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x539F;&#x4E66;&#x7684;&#x4E00;&#x5F20;&#x56FE;&#x6765;&#x8BF4;&#x660E;1x1&#x662F;&#x5982;&#x4F55;&#x51CF;&#x5C11;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;2x2x4&#x7684;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x7528;&#x4E00;&#x4E2A;1x1&#x7684;&#x5377;&#x79EF;&#x6838;&#x8FDB;&#x884C;&#x5377;&#x79EF;&#x64CD;&#x4F5C;\n\n&#x5168;&#x5C40;&#x5E73;&#x5747;&#x6C60;&#x5316;&#x5C42;&#x5BF9;&#x6BCF;&#x4E2A;&#x901A;&#x9053;&#x7684;&#x6574;&#x4E2A;&#x7A7A;&#x95F4;&#x7EF4;&#x5EA6;&#x8FDB;&#x884C;&#x5E73;&#x5747;&#x8FD0;&#x7B97;&#xFF0C;&#x5C06; W&#xD7;H&#xD7;C &#x7684;&#x7279;&#x5F81;&#x56FE;&#x538B;&#x7F29;&#x4E3A; 1&#xD7;1&#xD7;C&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E00;&#x5F20;&#x5927;&#x5C0F;&#x4E3A; 5&#xD7;5&#xD7;32 &#x7684;&#x7279;&#x5F81;&#x56FE;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x5E73;&#x5747;&#x6C60;&#x5316;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A; 1&#xD7;1&#xD7;32 &#x7684;&#x8F93;&#x51FA;&#x3002;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;\n\n&#x4E24;&#x8005;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#x53BB;&#x6389;f1&#xFF0C;c3&#x540E;&#x63A5;1x1x10&#x5377;&#x79EF;-&gt;5x5x10&#xFF0C;&#x7136;&#x540E;&#x5168;&#x5C40;&#x5E73;&#x5747;&#x6C60;&#x5316;&#x5C42;-&gt;1x1x10&#xFF0C;&#x518D;&#x5C55;&#x5E73;&#x7136;&#x540E;softmax&#xFF0C;&#x76F4;&#x63A5;&#x5206;&#x7C7B;&#x6570;&#x5B57;\n\n&#x597D;&#x5904;&#xFF0C;&#x8F93;&#x5165;&#x56FE;&#x50CF;&#x4E0D;&#x9650;&#x5236;&#x3002;&#x56E0;&#x4E3A;&#x5168;&#x8FDE;&#x63A5;&#x9700;&#x8981;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x56FA;&#x5B9A;&#xFF0C;&#x800C;&#x5176;&#x53D7;&#x5230;&#x8F93;&#x5165;&#x7279;&#x5F81;&#x56FE;&#x5C3A;&#x5BF8;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x4ECE;&#x800C;&#x53CD;&#x5411;&#x56FA;&#x5B9A;&#x4E86;&#x8F93;&#x5165;&#x56FE;&#x7247;&#x7684;&#x5C3A;&#x5BF8;&#x3002;&#x800C;1x1&#x5377;&#x79EF;&#x548C;&#x5168;&#x5C40;&#x5E73;&#x5747;&#x6C60;&#x5316;&#x5C42;&#x5BF9;&#x8F93;&#x5165;&#x5C3A;&#x5BF8;&#x6CA1;&#x6709;&#x9650;&#x5236;\n\n\n&#x7ECF;&#x5178;&#x5377;&#x79EF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;LeNetin 32x32x1c1 5x5x6 P=0 S=1; out 28x28x6p1 avgpool out 14x14x6c2 5x5x16 P=0 S=1; out 10x10x16p2 avgpool out 5x5x16c3 5x5x120 P=0 S=1; out 1x1x120 &#x76F8;&#x5F53;&#x4E8E;&#x5168;&#x8FDE;&#x63A5;f1 in120 out84f2 in84 out10&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x4F7F;&#x7528;tanh\nAlexNet&#x4F7F;&#x7528;ReLU&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#xFF0C;&#x5F15;&#x5165;Dropout&#xFF0C;GPU&#x5E76;&#x884C;&#x8BAD;&#x7EC3;&#xFF0C;&#x56FE;&#x50CF;&#x589E;&#x5F3A;&#x6280;&#x672F;&#x8F93;&#x5165;-&#x5927;&#x5377;&#x79EF;&#x6838;&#x548C;&#x5927;&#x6B65;&#x957F;&#x6765;&#x63D0;&#x53D6;&#x521D;&#x59CB;&#x7279;&#x5F81;-&#x7F29;&#x5C0F;&#x5377;&#x79EF;&#x6838;&#x6765;&#x63D0;&#x53D6;&#x7279;&#x5F81;-&#x5168;&#x8FDE;&#x63A5;&#x5206;&#x7C7B;-dropout&#x9632;&#x8FC7;&#x62DF;&#x5408;\nGoogLeNetInception&#x6A21;&#x5757;&#xFF1A;&#x8F93;&#x5165;&#x4E00;&#x4E2A;28x28x192&#x7684;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x7136;&#x540E;&#x5E76;&#x884C;&#x7684;&#x5377;&#x79EF;1x1 3x3 5x5 &#x548C;&#x6700;&#x5927;&#x6C60;&#x5316;&#x3002;&#x4F46;&#x662F;3x3 5x5&#x53C2;&#x6570;&#x91CF;&#x8FC7;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5176;&#x524D;&#x9762;&#x4F7F;&#x7528;1x1&#x964D;&#x7EF4;&#xFF0C;&#x800C;&#x6700;&#x5927;&#x6C60;&#x5316;&#x540E;&#x4F7F;&#x7528;1x1&#x964D;&#x7EF4;&#x3002;&#x7531;&#x4E8E;&#x8FD9;&#x56DB;&#x6761;&#x5377;&#x79EF;&#x540E;&#x7684;&#x7279;&#x5F81;&#x56FE;&#x957F;&#x5BBD;&#x4E0D;&#x53D8;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x8FD9;&#x56DB;&#x6761;&#x5377;&#x79EF;&#x8DEF;&#x5F84;&#x7684;&#x503C;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x800C;&#x5728;&#x6574;&#x4F53;&#x4E0A;&#xFF0C;&#x5148;&#x901A;&#x8FC7;&#x5377;&#x79EF;&#x63D0;&#x53D6;&#x7279;&#x5F81;&#xFF0C;&#x7136;&#x540E;&#x63A5;&#x8FDE;&#x4F7F;&#x7528;Inception&#x6A21;&#x5757;&#x63A5;&#x4E00;&#x4E2A;&#x6700;&#x5927;&#x6C60;&#x5316;&#xFF0C;&#x6700;&#x7EC8;&#x4F7F;&#x7528;&#x5168;&#x8FDE;&#x63A5;&#x5206;&#x7C7B;&#xFF0C;&#x7EA2;&#x8272;&#x6846;&#x662F;&#x5BF9;&#x9690;&#x85CF;&#x5C42;&#x7684;&#x7279;&#x5F81;&#x8FDB;&#x884C;&#x5206;&#x7C7B;&#x6765;&#x786E;&#x4FDD;&#x7279;&#x5F81;&#x662F;&#x6709;&#x610F;&#x4E49;&#x7684;&#x67B6;&#x6784;&#x56FE;\nVGGNet&#x4E24;&#x4E2A;3x3=5x5&#xFF0C;&#x4E09;&#x4E2A;3x3=7x7 &#x4E14;&#x589E;&#x5F3A;&#x975E;&#x7EBF;&#x6027;&#xFF0C;&#x5168;&#x90E8;&#x4F7F;&#x7528;3x3&#x5377;&#x79EF;&#x6838;&#xFF0C;&#x5377;&#x79EF;&#x4E00;&#x6B21;&#x6C60;&#x5316;&#x4E00;&#x6B21;&#x7F51;&#x7EDC;&#x6DF1;&#x5EA6;&#x53EF;&#x53D8;&#xFF1A;&#x63D0;&#x51FA;&#x4E86; VGG-11&#x3001;VGG-13&#x3001;VGG-16&#x3001;VGG-19 &#x56DB;&#x79CD;&#x4E0D;&#x540C;&#x6DF1;&#x5EA6;&#x7684;&#x53D8;&#x4F53;&#xFF0C;&#x6570;&#x5B57;&#x4EE3;&#x8868;&#x5377;&#x79EF;&#x6216;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x6570;&#x91CF;&#x4E4B;&#x548C;&#x3002;&#x2014;&#x2014;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;&#x7528;&#x586B;&#x5145;&#x6765;&#x4FDD;&#x6301;&#x5377;&#x79EF;&#x65F6;&#x7684;&#x7279;&#x5F81;&#x56FE;&#x5927;&#x5C0F;&#x4E00;&#x81F4;&#xFF0C;&#x53EA;&#x6709;&#x6C60;&#x5316;&#x65F6;&#x4E0B;&#x91C7;&#x6837;\nResNet&#x8FD9;&#x4E00;&#x90E8;&#x5206;&#x5F3A;&#x70C8;&#x770B;&#x539F;&#x6587;ResNet&#x5B9E;&#x73B0;&#xFF0C;&#x6211;&#x8FD9;&#x662F;&#x5FEB;&#x901F;&#x8BB0;&#x5FC6;&#x4E00;&#x4E0B;\n&#x7F51;&#x7EDC;&#x6DF1;&#x5EA6;&#x589E;&#x52A0;&#x5230;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#xFF0C;&#x6A21;&#x578B;&#x9519;&#x8BEF;&#x7387;&#x4E0D;&#x964D;&#x53CD;&#x5347;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x68AF;&#x5EA6;&#x6D88;&#x5931;&#x68AF;&#x5EA6;&#x7206;&#x70B8;&#x7684;&#x95EE;&#x9898;&#x4EBA;&#x4E3A;&#x4FEE;&#x6539;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#xFF0C;&#x5C06;&#x6307;&#x5B9A;&#x4E24;&#x5C42;&#xFF08;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x76F8;&#x90BB;&#x5C42;&#xFF09;&#x8FDE;&#x63A5;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;l2&#x548C;l5&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;l5&#x7684;&#x8F93;&#x51FA;&#x5C06;&#x662F;l2&#x8F93;&#x5165;+ l2&#x5230;l5&#x7684;&#x6B8B;&#x5DEE;&#x6211;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#x6B8B;&#x5DEE;&#x5C31;&#x662F;&#x5DEE;&#xFF0C;&#x6BD4;&#x5982;l2&#x7684;&#x53C2;&#x6570;-l5&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x662F;&#x8FD9;&#x4E24;&#x5C42;&#x771F;&#x6B63;&#x5B66;&#x4E60;&#x5230;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x6211;&#x4EEC;&#x5E26;&#x7740;&#x5B83;&#x52A0;&#x4E0A;&#x8F93;&#x5165;&#x4F5C;&#x4E3A;&#x771F;&#x6B63;&#x7684;l5&#x8F93;&#x51FA;\n\n&#x5B9E;&#x73B0;&#x4EE5;ResNet-18&#x4E3A;&#x4F8B;\n\n&#x5206;&#x4E3A;Conv1-5&#x548C;Output&#xFF0C;Conv&#x6A21;&#x5757;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x6B8B;&#x5DEE;&#x6A21;&#x5757;&#xFF0C;&#x4E0D;&#x540C;&#x7684;ResNet&#x5927;&#x7684;&#x7ED3;&#x6784;&#x4E0D;&#x53D8;&#xFF0C;&#x53EA;&#x662F;&#x6BCF;&#x4E2A;Conv&#x4E2D;&#x7684;&#x6B8B;&#x5DEE;&#x4E2A;&#x6570;&#x4E0D;&#x4E00;&#x6837;\n\nResidual Block\n\n\nBasicBlock&#xFF0C;&#x7528;&#x4E8E;&#x8F83;&#x6D45;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x5982;ResNet-18&#xFF0C;ResNet-34\n\n&#x8FD9;&#x91CC;&#x4EE5;ResNet-18&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x9636;&#x6BB5;Conv2&#x4E3A;&#x4F8B;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4FE9;ResidualBlock&#xFF0C;  &#x5148;&#x770B;&#x7B2C;&#x4E00;&#x4E2A;block:\n\n\n&#x5148;&#x5C06;Conv1&#x7684;&#x7279;&#x5F81;&#x56FE;&#x6700;&#x5927;&#x6C60;&#x5316;&#x4E00;&#x4E0B;&#xFF0C;P=1 S=2&#xFF1B;\n&#x8FC7;3x3x64&#x5377;&#x79EF;&#x6838; P=1 S=1&#x4FDD;&#x6301;&#x7279;&#x5F81;&#x56FE;&#x4E0D;&#x53D8;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x5165;Batch Norm&#xFF0C;Batch Norm&#x662F;&#x6309;&#x901A;&#x9053;&#x8FDB;&#x884C;&#x7684;\n&#x518D;&#x7ECF;&#x8FC7;ReLU&#x6FC0;&#x6D3B;&#xFF0C;&#x91CD;&#x590D;&#x5377;&#x79EF;&#x548C;Batch Norm\n&#x6700;&#x540E;&#x628A;Conv1&#x7684;&#x7279;&#x5F81;&#x56FE; &#x52A0;&#x4E0A; Batch Norm&#x540E;&#x7684;&#x7279;&#x5F81;&#x56FE;&#xFF0C;&#x6C42;&#x548C;-ReLU-&#x8F93;&#x51FA;\n\n\n&#x518D;ResNet-18&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;Conv3&#x4E3A;&#x4F8B;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4FE9;ResidualBlock&#xFF0C;&#x4F46;&#x662F;&#x4E0E;Conv2&#x7A0D;&#x6709;&#x4E0D;&#x540C;  &#x524D;&#x4E09;&#x6B65;&#xFF1A;&#x4E0D;&#x6C60;&#x5316;&#xFF0C;&#x5377;&#x79EF;3&#xD7;3x128 P=1 S=1&#xFF0C;&#x5C06;&#x7279;&#x5F81;&#x56FE;&#x957F;&#x5BBD;&#x51CF;&#x534A;&#x901A;&#x9053;&#x6570;&#x52A0;&#x500D;&#xFF0C;&#x4E0E;Conv2&#x7684;&#x4FDD;&#x6301;&#x7279;&#x5F81;&#x56FE;&#x4E0D;&#x53D8;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x662F;Conv3&#x540E;&#x9762;&#x4E5F;&#x8FD8;&#x662F;&#x4FDD;&#x6301;&#x51CF;&#x534A;&#x7684;&#x957F;&#x5BBD;&#x4E0D;&#x53D8; &#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x56DE;&#x987E;Conv2&#x7684;&#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x662F;&#x76F4;&#x63A5;&#x52A0;&#x8D77;&#x6765;&#xFF1B;&#x800C;&#x8FD9;&#x91CC;&#x5219;&#x662F;&#x56E0;&#x4E3A;&#x4E00;&#x5F00;&#x59CB;&#x6539;&#x53D8;&#x4E86;&#x7279;&#x5F81;&#x56FE;&#x5C3A;&#x5BF8;&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;1&#xD7;1x128&#xFF0C;S=2 &#x5377;&#x79EF;&#x6765;&#x5C3A;&#x5BF8;&#x51CF;&#x534A;&#x901A;&#x9053;&#x52A0;&#x500D;&#x6765;&#x5339;&#x914D;&#x5377;&#x79EF;&#x540E;&#x7684;&#x7279;&#x5F81;&#x56FE;\n\n Conv2&#x548C;Conv3&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;Conv3&#x5BF9;&#x7279;&#x5F81;&#x56FE;&#x505A;&#x4E86;&#x5C3A;&#x5BF8;&#x51CF;&#x534A;&#x901A;&#x9053;&#x52A0;&#x500D;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x6B8B;&#x5DEE;&#x52A0;&#x548C;&#x65F6;&#x5339;&#x914D;&#x800C;&#x591A;&#x5904;&#x7406;&#x4E00;&#x4E0B;\n\nBottleneck&#xFF0C;&#x7528;&#x4E8E;&#x6DF1;&#x5C42;&#x7F51;&#x7EDC;&#xFF0C;\n\n&#x8FD9;&#x91CC;&#x4EE5;ResNet-50&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x9636;&#x6BB5;Conv2&#x4E3A;&#x4F8B;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4E09;&#x4E2A;Bottleneck&#xFF0C; \n\n\nblock1&#x628A;&#x901A;&#x9053;&#x6570;&#x7FFB;&#x56DB;&#x500D;&#xFF0C;&#x90A3;&#x4E48;&#x6B8B;&#x5DEE;&#x52A0;&#x548C;&#x524D;&#x8981;&#x5904;&#x7406;&#xFF0C;\nblock2&#x5148;&#x964D;&#x901A;&#x9053;&#x6570; &#x8FDB;&#x884C;3&#xD7;3&#x5377;&#x79EF; &#x518D;&#x5347;&#x56DE;&#x53BB;&#x6765;&#x5339;&#x914D;block&#x7684;&#x7279;&#x5F81;&#x56FE;\nblock3&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x52A8;&#x4F5C; &#x6240;&#x4EE5;&#x4E3A;&#x4EC0;&#x4E48;&#x53EB;Bottleneck&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;block&#x90FD;&#x4F1A;&#x964D;&#x901A;&#x9053;&#xFF0C;&#x5F62;&#x5982;&#x74F6;&#x9888;\n\n\n&#x518D;&#x4EE5;ResNet-50&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x9636;&#x6BB5;Conv3&#x4E3A;&#x4F8B;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x56DB;&#x4E2A;Bottleneck&#xFF0C; \n\n\nblock1&#x5148;&#x964D;&#x4E00;&#x534A;&#x901A;&#x9053;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5C3A;&#x5BF8;&#x518D;&#x51CF;&#x534A;&#xFF0C;&#x901A;&#x9053;&#x6570;&#x7FFB;&#x56DB;&#x500D;&#x3002;&#x6574;&#x4F53;&#x4E0A;&#x770B;&#x662F;&#x5C3A;&#x5BF8;&#x51CF;&#x534A;&#x901A;&#x9053;&#x52A0;&#x500D;&#xFF0C;&#x6B8B;&#x5DEE;&#x52A0;&#x548C;&#x524D;&#x4F9D;&#x65E7;&#x8981;&#x5339;&#x914D;\nblock2 3 4&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x5148;&#x964D;&#x56DB;&#x500D;&#x901A;&#x9053;&#xFF0C;3x3&#x5377;&#x79EF;&#xFF0C;&#x518D;&#x6062;&#x590D;&#x901A;&#x9053;&#x6570;\n\n\n\n&#x8FC1;&#x79FB;&#x5B66;&#x4E60;&#x5C06;&#x5177;&#x6709;&#x5927;&#x91CF;&#x53C2;&#x6570;&#x7684;&#x6A21;&#x578B;&#x7684;&#x80FD;&#x529B;&#x8FC1;&#x79FB;&#x5230;&#x5177;&#x4F53;&#x76EE;&#x6807;&#x4E0A;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x80FD;&#x8BC6;&#x522B;1000&#x7269;&#x4F53;&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x5C06;&#x5176;&#x8BC6;&#x522B;&#x80FD;&#x529B;&#x8FC1;&#x79FB;&#x5230;&#x8BC6;&#x522B;&#x67D0;&#x4E2A;&#x5177;&#x4F53;&#x7269;&#x4F53;&#x4E0A;&#x6B65;&#x9AA4;&#xFF1A;&#x2014;&#x2014;&#x6458;&#x81EA;&#x539F;&#x6587;\n\n&#x52A0;&#x8F7D;&#x9884;&#x8BAD;&#x7EC3;&#x6A21;&#x578B;&#xFF1A;&#x83B7;&#x53D6;&#x5DF2;&#x5728;ImageNet&#x4E0A;&#x8BAD;&#x7EC3;&#x597D;&#x7684;ResNet&#x6A21;&#x578B;&#x53CA;&#x5176;&#x6743;&#x91CD;&#x3002;\n&#x51BB;&#x7ED3;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#x5C42;&#xFF1A;&#x9501;&#x5B9A;ResNet&#x4E2D;&#x8D1F;&#x8D23;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#x7684;&#x5C42;&#xFF08;&#x901A;&#x5E38;&#x662F;&#x9664;&#x4E86;&#x6700;&#x540E;&#x7684;&#x5206;&#x7C7B;&#x5C42;&#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x5C42;&#xFF09;&#xFF0C;&#x4F7F;&#x5176;&#x53C2;&#x6570;&#x5728;&#x540E;&#x7EED;&#x8BAD;&#x7EC3;&#x4E2D;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#x3002;\n&#x66FF;&#x6362;&#x5206;&#x7C7B;&#x5934;&#xFF1A;&#x79FB;&#x9664;ResNet&#x539F;&#x6709;&#x7684;1000&#x7C7B;&#x5206;&#x7C7B;&#x5C42;&#xFF0C;&#x6839;&#x636E;&#x9762;&#x5305;&#x5206;&#x7C7B;&#x4EFB;&#x52A1;&#x7684;&#x9700;&#x6C42;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;10&#x79CD;&#x9762;&#x5305;&#xFF09;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x3001;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x5206;&#x7C7B;&#x5C42;&#x3002;\n&#x5FAE;&#x8C03;&#x65B0;&#x5206;&#x7C7B;&#x5934;&#xFF1A;&#x4F7F;&#x7528;&#x6807;&#x6CE8;&#x597D;&#x7684;&#x9762;&#x5305;&#x56FE;&#x50CF;&#x6570;&#x636E;&#x96C6;&#x8FDB;&#x884C;&#x8BAD;&#x7EC3;&#x3002;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EA;&#x66F4;&#x65B0;&#x65B0;&#x6DFB;&#x52A0;&#x7684;&#x5206;&#x7C7B;&#x5C42;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x9884;&#x8BAD;&#x7EC3;&#x7684;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#x5C42;&#x53C2;&#x6570;&#x4FDD;&#x6301;&#x51BB;&#x7ED3;\n\n&#x6211;&#x7684;&#x7406;&#x89E3;&#xFF1A;&#x7528;&#x522B;&#x4EBA;&#x8BAD;&#x7EC3;&#x597D;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x8D70;&#x5230;&#x5206;&#x7C7B;&#x5C42;&#x5C31;&#x505C;&#xFF0C;&#x5C06;&#x539F;&#x6765;&#x7684;&#x5206;&#x7C7B;&#x5C42;&#x6362;&#x6210;&#x4F60;&#x9700;&#x8981;&#x7684;&#x5177;&#x4F53;&#x7269;&#x4F53;&#x7684;&#x5206;&#x7C7B;&#x5C42;&#xFF0C;&#x6700;&#x540E;&#x5FAE;&#x8C03;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x8FC1;&#x79FB;&#x662F;&#x6709;&#x6761;&#x4EF6;&#x7684;&#xFF0C;&#x9996;&#x5148;&#x4EFB;&#x52A1;&#x5F97;&#x7C7B;&#x4F3C;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x5C11;&#x5C31;&#x6362;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5206;&#x7C7B;&#x5C42;&#xFF0C;&#x5B66;&#x4E60;&#x7387;&#x6BD4;&#x8F83;&#x5C0F;&#xFF1B;&#x6570;&#x636E;&#x4E2D;&#x7B49;&#x5C31;&#x6362;&#x6362;&#x540E;&#x9762;&#x6570;&#x5C42;&#x5206;&#x7C7B;&#x5C42;&#xFF0C;&#x7A0D;&#x5FAE;&#x52A0;&#x70B9;&#x5B66;&#x4E60;&#x7387;&#xFF1B;&#x6570;&#x636E;&#x5F88;&#x5927;&#x4E0D;&#x52A0;&#x6362;&#x5206;&#x7C7B;&#x5C42;&#x8FD8;&#x5F97;&#x66F4;&#x65B0;&#x7F51;&#x7EDC;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5B66;&#x4E60;&#x7387;&#x5927;&#x70B9;&#x6216;&#x8005;&#x4F7F;&#x7528;&#x5B66;&#x4E60;&#x7387;&#x8870;&#x51CF;\n&#x5FAA;&#x73AF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;RNN&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x9762;&#x8FD8;&#x6709;&#x66F4;&#x725B;&#x903C;&#x7684;Transformer&#x3002;&#x53EF;&#x662F;&#xFF0C;&#x4EC0;&#x4E48;&#x662F;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#xFF0C;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x6240;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x987A;&#x5E8F;&#x5173;&#x7CFB;&#x7684;&#x95EE;&#x9898;&#x7136;&#x540E;&#x6458;&#x81EA;&#x539F;&#x6587;&#x4E00;&#x4E0B;&#xFF1A;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#x7684;&#x7279;&#x70B9;&#x662F;&#xFF1A;\n\n&#x6570;&#x636E;&#x662F;&#x6309;&#x987A;&#x5E8F;&#x6392;&#x5217;&#x7684;&#xFF08;&#x987A;&#x5E8F;&#x6709;&#x610F;&#x4E49;&#xFF09;&#x3002;\n&#x6570;&#x636E;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF08;&#x540E;&#x9762;&#x7684;&#x503C;&#x4F9D;&#x8D56;&#x524D;&#x9762;&#x7684;&#x503C;&#xFF09;&#x3002;\n&#x8FDB;&#x884C;&#x5904;&#x7406;&#x65F6;&#x4E0D;&#x80FD;&#x7B80;&#x5355;&#x6253;&#x4E71;&#x6570;&#x636E;&#x987A;&#x5E8F;&#x3002;&#x5178;&#x578B;&#x7684;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#x6709;&#xFF1A;\n&#x81EA;&#x7136;&#x8BED;&#x8A00;&#x5904;&#x7406;&#xFF08;NLP&#xFF09;\n&#x65F6;&#x95F4;&#x5E8F;&#x5217;&#x9884;&#x6D4B;&#xFF08;&#x80A1;&#x4EF7;&#x3001;&#x5929;&#x6C14;&#xFF09;\n&#x8BED;&#x97F3;&#x8BC6;&#x522B;\n&#x89C6;&#x9891;&#x5206;&#x6790;\n&#x673A;&#x5668;&#x4EBA;&#x63A7;&#x5236;&#x800C;&#x5E8F;&#x5217;&#x95EE;&#x9898;&#x7684;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x4E00;&#x822C;&#x4E3A;&#x591A;&#x5BF9;&#x4E00;&#xFF0C;&#x5982;&#x6839;&#x636E;&#x6587;&#x672C;&#x5224;&#x65AD;&#x5176;&#x60C5;&#x7EEA;&#x7684;&#x6B63;&#x8D1F;&#xFF1B;&#x591A;&#x5BF9;&#x591A;&#xFF0C;&#x5982;&#x6839;&#x636E;&#x6587;&#x672C;&#x63D0;&#x70BC;&#x5173;&#x952E;&#x6587;&#x672C;\n\nToken &amp; Embedding&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x6587;&#x672C;&#x8FDB;&#x884C;&#x4E3E;&#x4F8B;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x5FC5;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;NLP&#x7684;&#x4E00;&#x4E9B;&#x6982;&#x5FF5;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x53EA;&#x5217;&#x51FA;&#x6211;&#x89C9;&#x5F97;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x5177;&#x4F53;&#x8BF7;&#x770B;&#x539F;&#x6587;\n\nToken&#xFF0C;&#x81EA;&#x7136;&#x8BED;&#x8A00;&#x5904;&#x7406;&#x7684;&#x6700;&#x5C0F;&#x5904;&#x7406;&#x5355;&#x4F4D;\nEmbedding&#xFF0C;&#x4E5F;&#x79F0;&#x8BCD;&#x5D4C;&#x5165;&#xFF08;Word Embedding&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x7F16;&#x7801;Token&#x7684;&#x6280;&#x672F;&#xFF0C;&#x65E8;&#x5728;&#x5C06;Token&#x7F16;&#x7801;&#x4E3A;&#x4F4E;&#x7EF4; &#x7A20;&#x5BC6;&#x5411;&#x91CF;&#x7684;&#x6280;&#x672F;&#x3002;&#x8BF4;&#x4EBA;&#x8BDD;&#x5C31;&#x662F;&#x5C06;Token&#x6570;&#x5B57;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4E0D;&#x540C;&#x7EF4;&#x5EA6;&#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x6743;&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#x4E24;&#x4E2A;&#x8BCD; &#x201C;&#x9A6C;&#x94C3;&#x85AF;&#x201D; &#x201C;&#x571F;&#x8C46;&#x201D; &#x5728;&#x6570;&#x4E2A;&#x7EF4;&#x5EA6;&#x4E0A;&#x7684;&#x6743;&#x503C;&#x5E94;&#x8BE5;&#x662F;&#x76F8;&#x8FD1;&#x7684;&#xFF0C;&#x5C31;&#x88AB;&#x6A21;&#x578B;&#x770B;&#x4F5C;&#x662F;&#x540C;&#x4E00;&#x4E8B;&#x7269;&#xFF0C;&#x800C;&#x7EF4;&#x5EA6;&#x8D8A;&#x9AD8;&#x6240;&#x80FD;&#x63CF;&#x8FF0;&#x548C;&#x62DF;&#x5408;&#x7684;&#x4E8B;&#x7269;&#x5C31;&#x8D8A;&#x51C6;&#x786E;&#x3002;&#x5B9E;&#x73B0;&#x8BCD;&#x5D4C;&#x5165;&#x7684;&#x6280;&#x672F;&#x6709;&#x4E24;&#x79CD;&#xFF1A;CBOW&#x548C;Skip-gram\nCBOW&#xFF0C;&#x5229;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x9884;&#x6D4B;&#x4E2D;&#x5FC3;&#x8BCD;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x5355;&#x4E2A;&#x8BCD;&#x5230;&#x6570;&#x4E2A;&#x8BCD;\nSkip-gram&#xFF0C;&#x5229;&#x7528;&#x4E2D;&#x5FC3;&#x8BCD;&#x9884;&#x6D4B;&#x4E0A;&#x4E0B;&#x6587;\n&#x8FD9;&#x91CC;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x5355;&#x4E2A;&#x8BCD;&#x5230;&#x6570;&#x4E2A;&#x8BCD;Embedding&#x53EF;&#x80FD;&#x5305;&#x542B;&#x597D;&#x51E0;&#x4E2A;&#x7EF4;&#x5EA6;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x6027;&#x522B;&#xFF0C;&#x662F;&#x5426;&#x662F;&#x98DF;&#x7269;&#xFF0C;&#x91CD;&#x91CF;&#x7B49;&#x7B49;&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x662F;&#x6211;&#x4EEC;&#x4EBA;&#x7C7B;&#x8D4B;&#x4E88;&#x7684;&#x201C;&#x7EF4;&#x5EA6;&#x201D;&#xFF0C;&#x5B9E;&#x9645;&#x8BAD;&#x7EC3;&#x65F6;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EF4;&#x5EA6;&#x5177;&#x4F53;&#x6307;&#x4EC0;&#x4E48;&#x53EA;&#x6709;&#x6A21;&#x578B;&#x77E5;&#x9053;\n\n\n\n\n\nRNN&#x7ED3;&#x6784;&#x5047;&#x5982;&#x6211;&#x4EEC;&#x5904;&#x7406;&#x4E00;&#x4E2A;NLP&#x4EFB;&#x52A1;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x53E5;&#x5B50;&#xFF1A;&#x6211;&#x662F;&#x674E;&#x5B81;&#x4E3A;&#x4E86;&#x8BA9;RNN&#x5904;&#x7406;&#xFF0C;&#x5C06;&#x5176;&#x8BBE;&#x8BA1;&#x4E3A;&#x5FAA;&#x73AF;&#x8C03;&#x7528;&#xFF0C;&#x4E00;&#x6B21;&#x53D6;&#x4E00;&#x4E2A;token(&#x5355;&#x4E2A;&#x6C49;&#x5B57;)&#x7684;Embedding&#x3002;&#x4F46;&#x8FD9;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x524D;&#x540E;&#x662F;&#x6709;&#x5F3A;&#x987A;&#x5E8F;&#x5173;&#x8054;&#x7684;&#xFF0C;&#x6240;&#x4EE5;\n\n&#x8BFB;&#x5165;Token1\nRNN&#x9700;&#x8981;&#x8BB0;&#x4E0B;&#x8FD9;&#x4E2A;Token1&#x9690;&#x85CF;&#x5C42;&#x7684;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;&#x8BB0;&#x5FC6;&#x4FE1;&#x606F;&#xFF0C;&#x6682;&#x5B58;&#x4E00;&#x4E0B;&#x3002;\n&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5904;&#x7406;Token2&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x8981;&#x52A0;&#x4E0A;Token1&#x7684;&#x8BB0;&#x5FC6;&#x7136;&#x540E;&#x5904;&#x7406;&#xFF0C;\n&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x8BB0;&#x5FC6;&#x4E3A;Token2&#x7684;&#x9690;&#x85CF;&#x5C42;&#x8F93;&#x51FA;&#xFF0C;&#x4E4B;&#x540E;&#x7684;&#x5FAA;&#x73AF;3 4&#x5BF9;&#x4E8E;&#x6CA1;&#x6709;&#x8BB0;&#x5FC6;&#x7684;Token1&#xFF0C;&#x8BB0;&#x5FC6;&#x8BBE;&#x7F6E;&#x4E3A;&#x5168;0&#x4F7F;&#x7528;tanh&#x505A;&#x6FC0;&#x6D3B;&#x51FD;&#x6570;&#x8FD9;&#x91CC;&#x6211;&#x4F7F;&#x7528;&#x7684; &#x201C;&#x8BB0;&#x5FC6;&#x201D;&#xFF0C;&#x4E00;&#x822C;&#x53EB;&#x505A;&#x9690;&#x72B6;&#x6001;&#x4E0A;&#x56FE;RNN&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x5FAA;&#x73AF;&#x5C42;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5B58;&#x8BB0;&#x5FC6;&#x7ED9;&#x4E0B;&#x6B21;&#x8F93;&#x51FA;&#x4F7F;&#x7528;&#x7684;&#x90A3;&#x4E00;&#x5C42;\n\n\n&#x591A;&#x5BF9;&#x4E00;&#xFF0C;&#x53EA;&#x6709;&#x6700;&#x540E;&#x4E00;&#x5C42;&#x8F93;&#x51FA;&#xFF0C;&#x5176;&#x4ED6;&#x5C42;&#x90FD;&#x662F;&#x66F4;&#x65B0;&#x9690;&#x72B6;&#x6001;\n&#x4E00;&#x5BF9;&#x591A;&#xFF0C;&#x8FD8;&#x662F;&#x6570;&#x5C42;&#xFF0C;&#x4E0D;&#x8FC7;&#x9664;&#x4E86;&#x7B2C;&#x4E00;&#x5C42;&#x8F93;&#x5165;&#x662F;&#x539F;&#x59CB;&#x8F93;&#x5165;&#xFF0C;&#x5176;&#x4ED6;&#x5C42;&#x7684;&#x8F93;&#x5165;&#x90FD;&#x662F;&#x4E0A;&#x4E00;&#x4E2A;Token&#x8F93;&#x51FA;&#xFF0C;&#x7136;&#x540E;&#x5404;&#x5C42;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;&#x6574;&#x4F53;&#x8F93;&#x51FA;\n&#x591A;&#x5BF9;&#x591A;\n&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x957F;&#x5EA6;&#x4E00;&#x81F4;&#xFF0C;&#x5404;&#x5C42;&#x8F93;&#x51FA;&#x5404;&#x5C42;&#x7684;  \n&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x957F;&#x5EA6;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x8F93;&#x5165;m&#xFF0C;&#x8F93;&#x51FA;n&#x3002;&#x7F16;&#x7801;&#x5668;&#x5148;&#x7F16;&#x7801;&#x4E0D;&#x8F93;&#x51FA;&#x53EA;&#x8F93;&#x5165;&#x66F4;&#x65B0;&#x9690;&#x72B6;&#x6001;&#x3002;&#x7F16;&#x7801;&#x7ED3;&#x675F;&#x540E;&#x89E3;&#x7801;&#xFF0C;&#x89E3;&#x7801;&#x548C;&#x4E00;&#x5BF9;&#x591A;&#x7C7B;&#x4F3C;  \n\n\n&#x4E00;&#x5BF9;&#x4E00;&#xFF0C;&#x4E0D;&#x7528;&#x8BB0;&#x5FC6;&#xFF0C;&#x9000;&#x5316;&#x6210;&#x5168;&#x8FDE;&#x63A5;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;\n\nLSTM &#x957F;&#x77ED;&#x671F;&#x8BB0;&#x5FC6;&#x5F53;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x957F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5F00;&#x5934;&#x7684;&#x4E8B;&#x7269;&#x6700;&#x540E;&#x8FD8;&#x8981;&#x63D0;&#x8D77;&#xFF0C;&#x6BD4;&#x5982;&#x201C;&#x5C0F;&#x660E;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x5B66;&#x751F;&#xFF0C;&#x6BCF;&#x6B21;&#x8003;&#x8BD5;&#x6210;&#x7EE9;&#x90FD;&#x5F88;&#x597D;&#xFF0C;&#x8FD8;&#x559C;&#x6B22;&#x5E2E;&#x52A9;&#x522B;&#x4EBA;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x5F88;&#x559C;&#x6B22;&#x4ED6;&#x201D;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5C0F;&#x660E;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x6700;&#x540E;&#x7684;&#x4ED6;&#x3002;&#x4F46;&#x662F;RNN&#x7684;&#x9690;&#x72B6;&#x6001;&#x53EA;&#x80FD;&#x8BB0;&#x4F4F;&#x77ED;&#x671F;&#x7684;&#x5173;&#x8054;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x80FD;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x7684;&#x2014;&#x2014;LSTM&#x6211;&#x4EEC;&#x5728;RNN&#x4E2D;&#x52A0;&#x4E00;&#x4E2A;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5B58;&#x50A8;&#x8BB0;&#x5FC6;&#x7684;&#x5730;&#x65B9;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x8BB0;&#x5FC6;&#x4E1C;&#x897F;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x4E09;&#x4E2A;&#x64CD;&#x4F5C;&#x8F93;&#x5165; &#x8BB0;&#x5FC6; &#x8F93;&#x51FA;&#xFF0C;\n\n&#x8F93;&#x5165;&#xFF0C;&#x5BF9;&#x4E8E;&#x65B0;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x6DFB;&#x52A0;&#x800C;&#x4E0D;&#x662F;&#x8986;&#x76D6;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5F00;&#x5173;&#x6765;&#x9009;&#x62E9;&#x54EA;&#x4E9B;&#x7EF4;&#x5EA6;&#x7684;&#x8BB0;&#x5FC6;&#x8FDB;&#x6765;&#x54EA;&#x4E9B;&#x4E0D;&#x80FD;&#x8FDB;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x5F00;&#x5173;&#x6211;&#x4EEC;&#x79F0;&#x4E3A;&#x8F93;&#x5165;&#x95E8;&#x987E;&#x540D;&#x601D;&#x4E49;&#x5C31;&#x662F;&#x63A7;&#x5236;&#x8F93;&#x5165;&#x7684;&#xFF0C;&#x5176;&#x672C;&#x8D28;&#x4E3A;sigmoid&#xFF0C;&#x5C31;&#x662F;&#x4E8C;&#x5206;&#x7C7B;&#x4E2D;&#x7528;&#x5230;&#x7684;\n&#x8BB0;&#x5FC6;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x4E86;&#x8F93;&#x5165;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x8BE5;&#x5B58;&#x5230;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x4E86;&#xFF0C;&#x53EF;&#x662F;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x4E0D;&#x662F;&#x65E0;&#x5E95;&#x6D1E;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x4E00;&#x4E9B;&#x6CA1;&#x6709;&#x7684;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x9057;&#x5FD8;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5F00;&#x5173;&#x6765;&#x9009;&#x62E9;&#x65E7;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x9057;&#x5FD8;&#x7684;&#x7EF4;&#x5EA6;&#xFF0C;&#x5C31;&#x662F;&#x9057;&#x5FD8;&#x95E8;&#xFF0C;&#x5176;&#x672C;&#x8D28;&#x4E5F;&#x662F;sigmod&#x3002;&#x5C06;&#x5DF2;&#x7ECF;&#x5904;&#x597D;&#x7684;&#x65B0;&#x4FE1;&#x606F;&#x4E0E;&#x9057;&#x5FD8;&#x4E86;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x5C31;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5C31;&#x662F;&#x65B0;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#xFF0C;&#x5B58;&#x5165;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;\n&#x8F93;&#x51FA;&#xFF0C;&#x65B0;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x5DF2;&#x7ECF;&#x5B58;&#x50A8;&#x597D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x8981;&#x7528;&#x5B83;&#x6765;&#x505A;&#x4E0B;&#x4E00;&#x6B21;&#x8F93;&#x5165;&#x7684;&#x9644;&#x52A0;&#x8BB0;&#x5FC6;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x6837;&#x7684;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5F00;&#x5173;&#x6765;&#x9009;&#x62E9;&#x54EA;&#x4E9B;&#x7EF4;&#x5EA6;&#x7684;&#x8BB0;&#x5FC6;&#x662F;&#x9700;&#x8981;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x8F93;&#x51FA;&#x95E8;&#xFF0C;&#x540C;&#x6837;&#x662F;sigmoid&#x3002;&#x603B;&#x7ED3;&#xFF0C;&#x603B;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x65B0;&#x8BB0;&#x5FC6;&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x8F93;&#x5165;&#x95E8;&#x5904;&#x7406;&#xFF0C;&#x52A0;&#x4E0A;&#x65E7;&#x8BB0;&#x5FC6;&#x7ECF;&#x8FC7;&#x9057;&#x5FD8;&#x95E8;&#x7684;&#x5904;&#x7406;&#x540E;&#x624D;&#x662F;&#x65B0;&#x7684;&#x8BB0;&#x5FC6;&#xFF0C;&#x800C;&#x5728;&#x4F7F;&#x7528;&#x8BB0;&#x5FC6;&#x65F6;&#x4E5F;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x8F93;&#x51FA;&#x95E8;&#x6765;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x54EA;&#x4E9B;&#x8BB0;&#x5FC6;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x80A1;&#x8111;&#x7684;&#x5168;&#x90E8;&#x90FD;&#x7528;&#x4E0A;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;&#x65B0;&#x4FE1;&#x606F;&#x548C;&#x8F93;&#x5165;&#x95E8;&#x662F;&#x8F93;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x9057;&#x5FD8;&#x95E8;&#x548C;&#x8F93;&#x5165;&#x662F;&#x8BB0;&#x5FC6;&#x64CD;&#x4F5C;&#x8F93;&#x51FA;&#x95E8;&#x662F;&#x8F93;&#x51FA;&#x64CD;&#x4F5C;&#x800C;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x7684;&#x72B6;&#x6001;&#x9760;&#x5404;&#x5C42;&#x95F4;&#x7684;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#xFF0C;&#x4F20;&#x9012;&#x65F6;&#x4E0D;&#x7ECF;&#x8FC7;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x800C;&#x63A7;&#x5236;&#x8FD9;&#x4E9B;&#x4EC0;&#x4E48;&#x4EC0;&#x4E48;&#x95E8;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x4E0A;&#x4E00;&#x6B21;&#x9690;&#x72B6;&#x6001;&#x3002;Z = [H(t-1) | Xt]W + B&#x5C06;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x7B80;&#x5316;&#x4E3A;&#x8F93;&#x5165;&#x8BB0;&#x5FC6;&#x8F93;&#x51FA;&#xFF0C;&#x8BB0;&#x5FC6;&#x7684;&#x4FE1;&#x606F;&#x76F4;&#x63A5;&#x5728;&#x5404;&#x5C42;&#x4F20;&#x64AD;&#x3002;&#x800C;RNN&#x7684;&#x9690;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x4ECE;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x91CC;&#x6765;&#x7684;&#xFF0C;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x5C31;&#x50CF;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x53D8;&#x91CF;\n\nGRU &#x95E8;&#x63A7;&#x5FAA;&#x73AF;&#x5355;&#x5143;&#x5BF9;LSTM&#x7684;&#x7B80;&#x5316;&#xFF0C;&#x53BB;&#x9664;&#x8BB0;&#x5FC6;&#x7EC6;&#x80DE;&#x95F4;&#x7684;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#xFF0C;&#x53EA;&#x4F7F;&#x7528;&#x9690;&#x72B6;&#x6001;&#x8FD8;&#x662F;&#x7C7B;&#x6BD4;LTSM&#x7684;&#x4E09;&#x79CD;&#x64CD;&#x4F5C;\n\n&#x8F93;&#x5165;&#xFF0C;&#x65B0;&#x4FE1;&#x606F;\n&#x8BB0;&#x5FC6;&#xFF0C;&#x5C06;&#x65B0;&#x4FE1;&#x606F;&#x548C;&#x9690;&#x72B6;&#x6001;&#x5408;&#x5E76;&#x8F93;&#x5165;&#x91CD;&#x7F6E;&#x95E8;(&#x9057;&#x5FD8;&#x95E8;)&#x518D;&#x8FC7;&#x7EBF;&#x6027;&#x5C42;&#x8FC7;sigmod&#x4F5C;&#x4E3A;&#x65B0;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x3002;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x548C;&#x65B0;&#x4FE1;&#x606F;&#x5408;&#x5E76;&#x518D;&#x8FC7;&#x7EBF;&#x6027;&#x5C42;&#x8FC7;tanh&#x7EC4;&#x4E3A;&#x5907;&#x7528;&#x957F;&#x671F;&#x8BB0;&#x5FC6;Hb&#xFF0C;&#x5907;&#x7528;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x7ECF;&#x8FC7;&#x66F4;&#x65B0;&#x95E8;(sigmod)&#x540E;&#x518D;&#x7528;1&#x51CF;&#x53BB;&#x6BCF;&#x4E2A;&#x7EF4;&#x5EA6;&#x5F97;&#x5230;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x8BB0;&#x5FC6;(&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x662F;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x4F46;&#x8FD8;&#x6CA1;&#x6709;&#x4FDD;&#x7559;)\n&#x8F93;&#x51FA;&#xFF0C;&#x5C06;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x8BB0;&#x5FC6;&#x548C;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x6309;&#x4F4D;&#x70B9;&#x4E58;&#x4F5C;&#x4E3A;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#xFF0C;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x4E0E;&#x65B0;&#x4FE1;&#x606F;&#x76F8;&#x52A0;&#x4F5C;&#x4E3A;**&#x9690;&#x72B6;&#x6001;(&#x957F;&#x671F;&#x8BB0;&#x5FC6;)**&#x8F93;&#x51FA;&#x603B;&#x7ED3;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x800C;&#x662F;&#x51FD;&#x6570;&#x5185;&#x539F;&#x5730;&#x66F4;&#x65B0;&#x3002;&#x66F4;&#x65B0;&#xFF1A;&#x5F53;&#x524D;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x9057;&#x5FD8;&#x4E00;&#x90E8;&#x5206;&#x518D;&#x5408;&#x5E76;&#x65B0;&#x4FE1;&#x606F;&#x5E76;&#x66F4;&#x65B0;&#xFF0C;&#x518D;&#x5408;&#x5E76;&#x65B0;&#x4FE1;&#x606F;&#x4F5C;&#x4E3A;&#x5907;&#x4EFD;&#xFF0C;&#x5728;&#x5907;&#x4EFD;&#x4E0A;&#x64CD;&#x4F5C;&#x83B7;&#x5F97;&#x9700;&#x4FDD;&#x7559;&#x8BB0;&#x5FC6;&#xFF0C;&#x5C06;&#x9700;&#x4FDD;&#x7559;&#x8BB0;&#x5FC6;&#x548C;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x6309;&#x4F4D;&#x70B9;&#x4E58;&#x4F5C;&#x4E3A;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#xFF0C;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;&#x52A0;&#x4E0A;&#x65B0;&#x4FE1;&#x606F;&#x5C31;&#x5F97;&#x5230;&#x4E86;&#x8F93;&#x51FA;&#x7684;&#x957F;&#x671F;&#x8BB0;&#x5FC6;\n\nGRU&#x6210;&#x672C;&#x4F4E;&#xFF0C;LSTM&#x6548;&#x679C;&#x597D;\nBiRNN &#x53CC;&#x5411;&#x5FAA;&#x73AF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x5BF9;&#x4E00;&#x4E2A;Token&#xFF0C;&#x4ECE;&#x6B63;&#x5411;&#x548C;&#x53CD;&#x5411;&#x90FD;&#x505A;RNN&#xFF0C;&#x7136;&#x540E;&#x5408;&#x5E76;&#x9690;&#x72B6;&#x6001;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x4E00;&#x5B9A;&#x8BED;&#x5883;&#x4E0B;&#x7684;&#x8BCD;&#x4E49;&#x9002;&#x7528;&#x4E8E;&#x6458;&#x8981;&#xFF0C;&#x603B;&#x7ED3;&#xFF0C;&#x5206;&#x7C7B;&#x3002;&#x4E0D;&#x9002;&#x5408;&#x751F;&#x6210;&#x4EFB;&#x52A1;\n&#x6DF1;&#x5EA6;&#x5FAA;&#x73AF;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;\n\n&#x589E;&#x52A0;&#x5FAA;&#x73AF;&#x5C42;&#xFF0C;&#x4EE5;&#x524D;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x53EA;&#x4F7F;&#x7528;&#x4E00;&#x5C42;&#x5FAA;&#x73AF;&#x5C42;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x65F6;&#x662F;&#x53EF;&#x4EE5;&#x53E0;&#x52A0;&#x591A;&#x5C42;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x539F;&#x5FAA;&#x73AF;&#x5C42;&#x4E0A;&#x8FDB;&#x884C;&#x62FC;&#x63A5;&#xFF0C;&#x518D;&#x5C06;&#x7B2C;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x5C42;&#x7684;&#x9690;&#x72B6;&#x6001;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E8C;&#x4E2A;&#x5FAA;&#x73AF;&#x5C42;&#x7684;&#x8F93;&#x5165;\n&#x589E;&#x52A0;&#x666E;&#x56FE;&#x5C42;&#xFF0C;&#x5C31;&#x662F;&#x589E;&#x52A0;&#x5168;&#x8FDE;&#x63A5;&#x5C42;&#x4E00;&#x822C;&#x5FAA;&#x73AF;&#x5C42;2-5&#x5C42;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x5168;&#x8FDE;&#x63A5;&#x53EF;&#x4EE5;&#x52A0;&#x591A;&#x70B9;\n\n&#x6CE8;&#x610F;&#x529B;&#x673A;&#x5236;&#x8FD9;&#x91CC;&#x8981;&#x5148;&#x56DE;&#x987E;&#x4E4B;&#x524D;&#x7684;&#x591A;&#x5BF9;&#x591A;&#x4F46;&#x662F;&#x4E0D;&#x5BF9;&#x79F0;&#x7684;RNN&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528; &#x7F16;&#x7801;-&#x89E3;&#x7801; &#x7ED3;&#x6784;&#x4F46;&#x662F;&#x9047;&#x5230;&#x957F;&#x53E5;&#x5B50;&#xFF0C;&#x91CC;&#x9762;&#x8FD8;&#x5939;&#x6742;&#x4E86;&#x65E0;&#x5173;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5F88;&#x96BE;&#x538B;&#x7F29;&#x5230;&#x4E00;&#x4E2A;&#x9690;&#x72B6;&#x6001;&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x4EFF;&#x7167;&#x4EBA;&#x7C7B;&#x8BFB;&#x957F;&#x53E5;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x4E00;&#x90E8;&#x5206;&#x8BFB;&#xFF0C;&#x6CE8;&#x610F;&#x529B;&#x96C6;&#x4E2D;&#x5728;&#x9700;&#x8981;&#x9605;&#x8BFB;&#x7684;&#x5730;&#x65B9;&#x5728;RNN&#x4E2D;&#x600E;&#x4E48;&#x505A;&#xFF1F;&#x7F16;&#x7801;&#x7684;&#x65F6;&#x5019;&#x5148;&#x5BF9;&#x6BCF;&#x4E2A;&#x5355;&#x8BCD;&#x7684;Token&#x7684;&#x9690;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x52A0;&#x6743;&#x6C42;&#x548C;&#xFF08;&#x6743;&#x503C;&#x4E4B;&#x548C;&#x4E3A;1&#xFF09;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6CE8;&#x610F;&#x529B;&#x5411;&#x91CF;&#x3002;&#x89E3;&#x7801;&#x65F6;&#x5C06; &#x6CE8;&#x610F;&#x529B;&#x5411;&#x91CF;&#x4E0E;token&#x7684;embedding&#x4E0E;&#x9690;&#x72B6;&#x6001; &#x8FDB;&#x884C;&#x62FC;&#x63A5;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x3002;&#x901A;&#x4FD7;&#x6765;&#x8BB2;&#x5C31;&#x662F;&#x5BF9;&#x53E5;&#x5B50;&#x4E2D;&#x4E00;&#x4E9B;&#x5355;&#x8BCD;&#x66F4;&#x4E3A;&#x770B;&#x91CD;&#xFF08;&#x901A;&#x8FC7;&#x52A0;&#x6743;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x9690;&#x72B6;&#x6001;&#x5C31;&#x66F4;&#x80FD;&#x8BB0;&#x4F4F;&#x5B83;&#x3002;&#x6240;&#x4EE5;&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;Token&#x7684;&#x6743;&#x503C;&#x5462;&#x3002;&#x5047;&#x5982;&#x6709;&#x4E00;&#x4E2A;3&#x8F93;&#x5165;3&#x8F93;&#x51FA;RNN&#x3002;&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5168;&#x8FDE;&#x63A5;&#x7F51;&#x7EDC;&#xFF0C;&#x8F93;&#x51FA;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x795E;&#x7ECF;&#x5143;&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x89E3;&#x7801;&#x5355;&#x5143;&#x89E3;&#x7801;&#x65F6;&#x5C06;&#x5176;&#x8F93;&#x5165;&#x9690;&#x72B6;&#x6001;0&#x4E0E;&#x7F16;&#x7801;&#x5668;&#x7684;3&#x4E2A;&#x9690;&#x72B6;&#x6001;&#x62FC;&#x63A5;&#x4E3A;3&#x4E2A;&#x8F93;&#x5165;&#x5411;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x522B;&#x7ECF;&#x8FC7;&#x5168;&#x8FDE;&#x63A5;&#x7F51;&#x7EDC;&#x518D;softmax&#x5C31;&#x5F97;&#x5230;&#x4E09;&#x4E2A;&#x6CE8;&#x610F;&#x529B;&#x6743;&#x91CD;&#xFF0C;&#x4E09;&#x4E2A;&#x6CE8;&#x610F;&#x529B;&#x6743;&#x91CD;&#x5408;&#x6210;&#x6CE8;&#x610F;&#x529B;&#x5411;&#x91CF;&#x3002;&#x540C;&#x6837;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x89E3;&#x7801;&#x5355;&#x5143;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x5229;&#x7528;&#x8F93;&#x5165;&#x9690;&#x72B6;&#x6001;1&#x6765;&#x6C42;&#xFF0C;&#x8FD9;&#x91CC;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#x524D;&#x540E;&#x5173;&#x7CFB;&#xFF0C;&#x89E3;&#x7801;&#x5355;&#x5143;1&#x7684;&#x8F93;&#x5165;&#x9690;&#x72B6;&#x6001;&#x662F;S0&#x4E0D;&#x662F;S1&#xFF1B;&#x8F93;&#x5165;&#x65B0;&#x4FE1;&#x606F;&#x662F;y0&#x4E0D;&#x662F;y1&#xFF0C;&#x5207;&#x8BB0;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E2D;&#x53EF;&#x5C06;RNN&#x66FF;&#x6362;&#x4E3A;LSTM&#x6216;&#x8005;GRU&#xFF0C;&#x800C;&#x4F5C;&#x4E3A;&#x8BA1;&#x7B97;&#x6CE8;&#x610F;&#x529B;&#x6743;&#x91CD;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#x4E5F;&#x4F1A;&#x52A0;&#x4E00;&#x5C42;&#x9690;&#x85CF;&#x5C42;\n","categories":["深度学习"],"tags":["深度学习","笔记"]},{"title":"FreeRTOS备忘","url":"/2025/05/26/FreeRTOS%E5%A4%87%E5%BF%98/","content":"&#x524D;&#x8A00;&#x672C;&#x6587;&#x7AE0;&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x5B66;&#x4E60;FreeRTOS&#x4E2D;&#x4F7F;&#x7528;&#x8FC7;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x529F;&#x80FD;&#x7B49;&#x5185;&#x5BB9;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x81EA;&#x5DF1;&#x5FEB;&#x901F;&#x67E5;&#x51FD;&#x6570;&#x7528;&#x6CD5;&#xFF0C;&#x5F52;&#x6863;&#x548C;&#x8E29;&#x5751;&#x8BB0;&#x5F55;&#x3002;\n\n&#x6587;&#x7AE0;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x677F;&#x5757;&#xFF1A;&#x4EFB;&#x52A1;&#x7BA1;&#x7406;&#xFF0C;&#x961F;&#x5217;&#x673A;&#x5236;&#xFF0C;&#x4E2D;&#x65AD;&#x7BA1;&#x7406;&#xFF08;&#x5F85;&#x8865;&#x5145;&#x2026;&#xFF09;&#x6BCF;&#x4E2A;&#x677F;&#x5757;&#x7684;&#x5927;&#x81F4;&#x7EC4;&#x7EC7;&#x7ED3;&#x6784;&#x4E3A;:1.&#x51FD;&#x6570;&#x540D;&#x79F0;2.&#x51FD;&#x6570;&#x53C2;&#x6570;3.&#x51FD;&#x6570;&#x4F5C;&#x7528;4.&#x51FD;&#x6570;&#x6CE8;&#x610F;&#x53CA;&#x8E29;&#x5751;\n\n\n&#x4EFB;&#x52A1;&#x7BA1;&#x7406;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;FreeRTOS&#x7684;&#x4EFB;&#x52A1;&#x7BA1;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4EFB;&#x52A1;&#x76F8;&#x5173;&#x51FD;&#x6570;&#x7684;&#x4F7F;&#x7528;\n&#x4EFB;&#x52A1;&#x521B;&#x5EFA;&#x52A8;&#x6001;&#x4EFB;&#x52A1;&#x521B;&#x5EFA;\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;xTaskCreate\nxTaskCreate(TaskFunction_t pxTaskCode,                  //&#x4EFB;&#x52A1;&#x51FD;&#x6570;&#x6307;&#x9488;            const char * const pcName,                  //&#x4EFB;&#x52A1;&#x540D;&#x79F0;            const configSTACK_DEPTH_TYPE usStackDepth,  //&#x6808;&#x5927;&#x5C0F;            void * const pvParameters,                  //&#x4EFB;&#x52A1;&#x53C2;&#x6570;            UBaseType_t uxPriority,                     //&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;            TaskHandle_t * const pxCreatedTask )        //&#x4EFB;&#x52A1;&#x53E5;&#x67C4;\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A;  &#x524D;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x662F;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x5728;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;  \n\n&#x51FD;&#x6570;&#x4F5C;&#x7528;&#xFF1A; &#x5982;&#x51FD;&#x6570;&#x540D;&#x79F0;&#x6240;&#x793A;&#xFF0C;&#x662F;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x4EFB;&#x52A1;&#x51FD;&#x6570;&#xFF0C;&#x4E0E;&#x4E4B;&#x76F8;&#x5BF9;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x521B;&#x5EFA;&#x4EFB;&#x52A1;&#x51FD;&#x6570;\n\n&#x6CE8;&#x610F;&#xFF1A; &#x5982;&#x53C2;&#x6570;&#x90E8;&#x5206;&#x6240;&#x793A;\n\n\n&#x793A;&#x4F8B;&#xFF1A;\n//&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;#define START_TASK_PRIO\t\t\t1//&#x4EFB;&#x52A1;&#x5806;&#x6808;&#xFF0C;&#x5B9E;&#x9645;&#x4E3A;*4&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E3A;uint32_t#define START_STACK_SIZE\t\t128//&#x4EFB;&#x52A1;&#x53E5;&#x67C4;&#xFF0C;&#x662F;&#x4EFB;&#x52A1;&#x5806;&#x6808;&#x6808;&#x9876;TaskHandle_t StartTask_Handler;//&#x4EFB;&#x52A1;&#x51FD;&#x6570;&#x58F0;&#x660E;void StartTask(void *pvParameters);\n&#xFF08;&#x5F85;&#x8865;&#x5145;&#x3002;&#x3002;&#x3002;&#xFF09;\n&#x4EFB;&#x52A1;&#x5220;&#x9664;&#x52A8;&#x6001;&#x4EFB;&#x52A1;&#x5220;&#x9664;\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;vTaskDelete\nvTaskDelete( TaskHandle_t xTaskToDelete )\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A;  &#x4F20;&#x5165;&#x60F3;&#x8981;&#x5220;&#x9664;&#x7684;&#x4EFB;&#x52A1;&#x7684;&#x53E5;&#x67C4;&#xFF0C;&#x5728;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;  \n\n&#x51FD;&#x6570;&#x4F5C;&#x7528;&#xFF1A; &#x5982;&#x51FD;&#x6570;&#x540D;&#x79F0;&#x6240;&#x793A;&#xFF0C;&#x662F;&#x52A8;&#x6001;&#x5220;&#x9664;&#x4EFB;&#x52A1;&#x51FD;&#x6570;&#xFF0C;&#x4E0E;&#x4E4B;&#x76F8;&#x5BF9;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x5220;&#x9664;&#x4EFB;&#x52A1;&#x51FD;&#x6570;\n\n&#x6CE8;&#x610F;&#xFF1A; &#x5982;&#x679C;&#x662F;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x540E;&#x4E00;&#x5B9A;&#x8981;&#x5220;&#x9664;&#x81EA;&#x5DF1;&#xFF0C;&#x91CA;&#x653E;&#x5185;&#x5B58;\n\n\n&#x793A;&#x4F8B;&#xFF1A;\nvTaskDelete(StartTask_Handler);\n\n&#xFF08;&#x5F85;&#x8865;&#x5145;&#x3002;&#x3002;&#x3002;&#xFF09;\n&#x4EFB;&#x52A1;&#x6302;&#x8D77;&#x4E0E;&#x6062;&#x590D;&#x4EFB;&#x52A1;&#x6302;&#x8D77;\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;vTaskSuspendvoid vTaskSuspend( TaskHandle_t xTaskToSuspend)\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A; &#x4F20;&#x5165;&#x4EFB;&#x52A1;&#x53E5;&#x67C4;&#xFF0C;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;\n&#x6CE8;&#x610F;&#xFF1A; &#x53C2;&#x6570;&#x4E3A;NULL&#x5219;&#x662F;&#x6302;&#x8D77;&#x81EA;&#x8EAB;&#xFF0C;&#x4EFB;&#x52A1;&#x53E5;&#x67C4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;xTaskGetHandle()&#x6839;&#x636E;&#x4EFB;&#x52A1;&#x540D;&#x6765;&#x83B7;&#x53D6;\n\n&#x4EFB;&#x52A1;&#x6062;&#x590D;\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;vTaskResume()void vTaskResume( TaskHandle_t xTaskToResume)\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A; &#x4F20;&#x5165;&#x4EFB;&#x52A1;&#x53E5;&#x67C4;&#xFF0C;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;\n\n&#x4EFB;&#x52A1;&#x6062;&#x590D;FromISR\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;vTaskResumeFromISR()BaseType_t xTaskResumeFromISR( TaskHandle_t xTaskToResume)\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A; &#x4F20;&#x5165;&#x4EFB;&#x52A1;&#x53E5;&#x67C4;&#xFF0C;&#x6CE8;&#x610F;&#x6570;&#x636E;&#x7C7B;&#x578B;\n&#x6CE8;&#x610F;&#xFF1A; &#x5728;&#x4E2D;&#x65AD;&#x670D;&#x52A1;&#x51FD;&#x6570;&#x4E2D;&#x4F7F;&#x7528;\n&#x8FD4;&#x56DE;&#x503C;pdTURE &#x8981;&#x6062;&#x590D;&#x7684;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x4E2D;&#x7684;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#xFF08;&#x88AB;&#x6253;&#x65AD;&#x7684;&#x4EFB;&#x52A1;&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x51FA;&#x4E2D;&#x65AD;&#x540E;&#x8981;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;pdFALSE &#x4E0E;&#x4E0A;&#x9762;&#x7684;&#x76F8;&#x53CD;&#xFF0C;&#x4E0D;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;\n\n&#x4E34;&#x754C;&#x533A;&#x4FDD;&#x62A4;&#x4E34;&#x754C;&#x533A;&#x662F;&#x4ECB;&#x4E8E;&#x5404;&#x4E2A;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x516C;&#x5171;&#x533A;&#x57DF;&#xFF0C;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x90FD;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5176;&#x5185;&#x90E8;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x52BF;&#x5FC5;&#x4F1A;&#x5BFC;&#x81F4;&#x8D44;&#x6E90;&#x7ADE;&#x4E89;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#x65F6;&#x8981;&#x8FDB;&#x884C;&#x4E34;&#x754C;&#x533A;&#x4FDD;&#x62A4;&#xFF0C;&#x5173;&#x95ED;&#x4E2D;&#x65AD;&#xFF0C;&#x4FDD;&#x62A4;&#x5185;&#x90E8;&#x5B8C;&#x6574;&#x6027;&#x6267;&#x884C;\n&#x8FDB;&#x5165;/&#x9000;&#x51FA;&#x4E34;&#x754C;&#x533A;\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;taskENTER_CRITICALtaskEXIT_CRITICAL\n\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A;  NULL\n\n&#x51FD;&#x6570;&#x4F5C;&#x7528;&#xFF1A; &#x5982;&#x51FD;&#x6570;&#x540D;&#x79F0;&#x6240;&#x793A;&#x6267;&#x884C;taskENTER_CRITICAL&#xFF0C;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#xFF0C;&#x5173;&#x4E2D;&#x65AD;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x4F9D;&#x8D56;&#x7684;systick&#x5B9A;&#x65F6;&#x5668;&#x4E5F;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x4EFB;&#x52A1;&#x6253;&#x65AD;&#x3002;&#x6267;&#x884C;taskENTER_CRITICAL&#xFF0C;&#x9000;&#x51FA;&#x4E34;&#x754C;&#x533A;&#xFF0C;&#x5F00;&#x4E2D;&#x65AD;&#xFF0C;&#x8C03;&#x5EA6;&#x6062;&#x590D;\n\n&#x6CE8;&#x610F;&#xFF1A; &#x4E34;&#x754C;&#x533A;&#x56E0;&#x4E3A;&#x4E0D;&#x80FD;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x4E34;&#x754C;&#x533A;&#x5185;&#x4EE3;&#x7801;&#x5C3D;&#x91CF;&#x7B80;&#x6D01;&#xFF0C;&#x6267;&#x884C;&#x8D8A;&#x5FEB;&#x8D8A;&#x597D;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x7684;&#x5B9E;&#x65F6;&#x6027;\n\n\n&#x793A;&#x4F8B;&#xFF1A; \ntaskENTER_CRITICAL();//&#x8BFB;&#x5199;&#x53D8;&#x91CF;&#xFF0C;&#x8C03;&#x7528;&#x516C;&#x5171;&#x51FD;&#x6570;taskEXIT_CRITICAL();\n&#x8FDB;&#x5165;/&#x9000;&#x51FA;&#x4E34;&#x754C;&#x533A;FromISR\n&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF1A;taskENTER_CRITICAL_FROM_ISR()taskEXIT_CRITICAL_FROM_ISR(x)&#x672C;&#x8D28;&#x662F;&#x5B8F;&#x5B9A;&#x4E49;&#xFF0C;&#x5728;portmacro.h&#x4E2D;&#x5B9A;&#x4E49;\n\n&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1A;  NULL&#xFF0C;x\n\n&#x51FD;&#x6570;&#x4F5C;&#x7528;&#xFF1A; &#x5982;&#x51FD;&#x6570;&#x540D;&#x79F0;&#x6240;&#x793A;&#x5728;&#x4E2D;&#x65AD;&#x5185;&#x6267;&#x884C;taskENTER_CRITICAL_FROM_ISR()&#xFF0C;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#xFF0C;&#x5173;&#x4E2D;&#x65AD;&#xFF0C;&#x4FDD;&#x5B58;&#x5F53;&#x524D;BASEPRI&#x5BC4;&#x5B58;&#x5668;&#x503C;&#xFF0C;&#x5199;&#x5165;configMAX_SYSCALL_INTERRUPT_PRIORITY&#xFF0C;&#x8FD4;&#x56DE;&#x4E4B;&#x524D;&#x7684;BASEPRI&#x5BC4;&#x5B58;&#x5668;&#x503C;(&#x624B;&#x52A8;&#x4FDD;&#x5B58;&#x4E2D;&#x65AD;&#x5C4F;&#x853D;&#x5BC4;&#x5B58;&#x5668;&#x4E0A;&#x4E0B;&#x6587;)&#xFF0C;&#x9000;&#x51FA;&#x4E34;&#x754C;&#x533A;&#x65F6;&#x8981;&#x7528;&#x5230;&#x5728;&#x4E2D;&#x65AD;&#x5185;&#x6267;&#x884C;taskEXIT_CRITICAL_FROM_ISR()&#xFF0C;&#x9000;&#x51FA;&#x4E34;&#x754C;&#x533A;&#xFF0C;&#x8BFB;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#xFF0C;&#x6062;&#x590D;&#x4E4B;&#x524D;&#x7684;&#x4E2D;&#x65AD;\n\n&#x6CE8;&#x610F;&#xFF1A; &#x4E34;&#x754C;&#x533A;&#x56E0;&#x4E3A;&#x4E0D;&#x80FD;&#x8C03;&#x5EA6;&#x4EFB;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x4E34;&#x754C;&#x533A;&#x5185;&#x4EE3;&#x7801;&#x5C3D;&#x91CF;&#x7B80;&#x6D01;&#xFF0C;&#x6267;&#x884C;&#x8D8A;&#x5FEB;&#x8D8A;&#x597D;&#xFF0C;&#x4E0D;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x7684;&#x5B9E;&#x65F6;&#x6027;\n\n\n&#x793A;&#x4F8B;&#xFF1A; \nBASEPRI_value = taskENTER_CRITICAL_FROM_ISR();//&#x8BFB;&#x5199;&#x53D8;&#x91CF;&#xFF0C;&#x8C03;&#x7528;&#x516C;&#x5171;&#x51FD;&#x6570;taskEXIT_CRITICAL(BASEPRI_value);\n\n&#x5EF6;&#x65F6;&#x76F8;&#x5BF9;&#x5EF6;&#x65F6;vTaskDelay()&#x53C2;&#x6570; xTicksToDelay&#x8981;&#x5EF6;&#x8FDF;&#x7684;&#x65F6;&#x95F4;&#x8BF4;&#x660E; &#x4EE5;&#x8C03;&#x7528;&#x6B64;&#x51FD;&#x6570;&#x7684;&#x65F6;&#x95F4;&#x4E3A;&#x8D77;&#x70B9;&#x8FDB;&#x884C;&#x5EF6;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x5EF6;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x53D7;&#x903B;&#x8F91;&#x8FD0;&#x884C;&#x5F71;&#x54CD;&#xFF0C;&#x4E0D;&#x7A33;&#x5B9A;&#x9002;&#x7528;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x975E;&#x5468;&#x671F;&#x4EFB;&#x52A1;&#xFF0C;&#x6216;&#x8005;&#x7B49;&#x5F85;&#x5916;&#x90E8;&#x4E8B;&#x4EF6;&#x7684;&#x56FA;&#x5B9A;&#x65F6;&#x957F;\n&#x7EDD;&#x5BF9;&#x5EF6;&#x65F6;xTaskDelayUntil()&#x53C2;&#x6570;pxPreviousWakeTime  &#x7B2C;&#x4E00;&#x6B21;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x5EF6;&#x8FDF;&#x51FD;&#x6570;&#x8981;&#x5C06;&#x6B64;&#x53C2;&#x6570;&#x5728;while&#x5FAA;&#x73AF;&#x5916;&#x521D;&#x59CB;&#x5316;\n\nTickType_t xLastWakeTime = xTaskGetTickCount(); // &#x6B63;&#x786E;&#x4E0D;&#x662F; TickType_t xLastWakeTime;&#xFF08;&#x672A;&#x521D;&#x59CB;&#x5316;&#xFF09; \n\nxTimeIncrement &#x4EFB;&#x52A1;&#x5EF6;&#x8FDF;&#x7684;&#x65F6;&#x95F4;&#x8282;&#x62CD;&#x6570;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;pxPreviousWakeTime&#x800C;&#x8A00;  \n&#x8BF4;&#x660E;&#x7EDD;&#x5BF9;&#x7684;&#x5468;&#x671F;&#x6267;&#x884C;&#xFF0C;&#x540C;&#x65F6;&#x4F1A;&#x963B;&#x585E;&#x4EFB;&#x52A1;&#xFF0C;&#x56E0;&#x4E3A;&#x8981;&#x4FDD;&#x8BC1;&#x7EDD;&#x5BF9;&#x7684;&#x5468;&#x671F;&#x3002;&#x4F46;&#x662F;&#x9047;&#x5230;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x548C;&#x4E2D;&#x65AD;&#x8FD8;&#x662F;&#x4E0D;&#x80FD;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x591F;&#x51FD;&#x6570;&#x4F1A;&#x81EA;&#x52A8;&#x8865;&#x507F;&#x65F6;&#x95F4;&#x60C5;&#x51B5;&#x4E00;&#xFF1A;&#x5982;&#x679C;100ms&#x7684;&#x5EF6;&#x65F6;&#xFF0C;&#x4F46;&#x662F;&#x6267;&#x884C;task1&#x6267;&#x884C;&#x4E86;20ms&#xFF0C;&#x90A3;&#x5C31;&#x5C06;task1&#x963B;&#x585E;80ms&#x6765;&#x4FDD;&#x8BC1;&#x7EDD;&#x5BF9;&#x5EF6;&#x65F6;&#x60C5;&#x51B5;&#x4E8C;&#xFF1A;&#x5982;&#x679C;100ms&#x7684;&#x5EF6;&#x65F6;&#xFF0C;&#x4F46;&#x662F;&#x6267;&#x884C;task1&#x88AB;&#x62A2;&#x5360;&#x8017;&#x65F6;10ms&#xFF0C;&#x90A3;&#x5C31;&#x5C06;task1&#x963B;&#x585E;90ms&#x6765;&#x4FDD;&#x8BC1;&#x7EDD;&#x5BF9;&#x5EF6;&#x65F6;  \n&#x6CE8;&#x610F;  \n\n&#x7EDD;&#x5BF9;&#x5EF6;&#x65F6;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x521D;&#x59CB;&#x5316;&#x5728;&#x5FAA;&#x73AF;&#x5916;\n&#x4E0D;&#x80FD;&#x5728;&#x4E34;&#x754C;&#x533A;&#x8C03;&#x7528;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4EFB;&#x52A1;&#x65E0;&#x6CD5;&#x5207;&#x6362;\n&#x4EFB;&#x52A1;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7;&#x5EF6;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x8DF3;&#x8FC7;&#x963B;&#x585E;&#x4E00;&#x76F4;&#x6267;&#x884C;\n\n&#x4EFB;&#x52A1;&#x4FE1;&#x606F;&#x5217;&#x8868;&#x3001;&#x961F;&#x5217;&#x4E2D;&#x65AD;&#x4E2D;&#x65AD;&#x7BA1;&#x7406;&#x5F00;&#x5173;&#x4E2D;&#x65AD;\n&#x51FD;&#x6570;&#x540D;&#x79F0; portENABLE_INTERRUPTS () portDISABLE_INTERRUPTS() &#x672C;&#x8D28;&#x4E0A;&#x662F;&#x5B8F;&#x5B9A;&#x4E49;&#xFF0C;&#x5728;portmacro.h&#x4E2D;&#x5B9A;&#x4E49;\n&#x6CE8;&#x610F; &#x5F00;&#x4E2D;&#x65AD;&#x5C31;&#x662F;&#x5411;BASEPRI&#x5BC4;&#x5B58;&#x5668;&#x5199;&#x5165;0&#xFF0C;BASEPRI&#x5BC4;&#x5B58;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x7F16;&#x7A0B;&#x7684;&#x4E2D;&#x65AD;&#x5C4F;&#x853D;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x5199;&#x5165;0&#x5C31;&#x662F;&#x505C;&#x6B62;&#x5C4F;&#x853D;&#x4E5F;&#x5C31;&#x662F;&#x5F00;&#xFF0C;&#x5173;&#x4E2D;&#x65AD;&#x5C31;&#x662F;&#x5199;&#x5165;configMAX_SYSCALL_INTERRUPT_PRIORITY,&#x6BD4;&#x5982;&#x5199;&#x5165;0x60&#x6765;&#x5C4F;&#x853D;&#x4F18;&#x5148;&#x7EA7;&#x4F4E;&#x4E8E;0x60&#x7684;&#x4E2D;&#x65AD;\n\n","categories":["FreeRTOS"],"tags":["STM32","笔记","FreeRTOS"]},{"title":"嵌入式驱动开发 记录驱动ST7735过程","url":"/2025/05/09/development%20of%20the%20st7735%20driver/","content":"&#x524D;&#x8A00;&#x5BD2;&#x5047;&#x56DE;&#x5BB6;&#x6CA1;&#x4E8B;&#x505A;&#xFF0C;&#x7279;&#x610F;&#x5E26;&#x4E86;&#x4E00;&#x5757;1.8&#x5BF8;&#x7684;TFT&#x5C4F;&#x6765;&#x7EC3;&#x4E60;&#x9A71;&#x52A8;&#x5F00;&#x53D1;&#xFF0C;&#x9A71;&#x52A8;&#x4E3A;ST7735&#xFF0C;&#x4E3B;&#x63A7;&#x4E3A;&#x662F;RCT6&#x3002;&#x7528;&#x4E86;&#x4E09;&#x5929;&#x52A0;&#x4E0A;&#x67E5;&#x9605;&#x7F51;&#x4E0A;&#x8D44;&#x6599;&#xFF0C;&#x7B97;&#x662F;&#x78D5;&#x78D5;&#x7ECA;&#x7ECA;&#x7684;&#x628A;&#x9A71;&#x52A8;&#x5199;&#x5B8C;&#x4E86;&#x3002;&#x628A;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x8FC7;&#x7A0B;&#x548C;&#x95EE;&#x9898;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#xFF0C;&#x505A;&#x4E2A;&#x5907;&#x5FD8;&#x3002;\nST7735&#x4ECB;&#x7ECD;ST7735&#x7684;&#x4ECB;&#x7ECD;&#x7F51;&#x4E0A;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x6211;&#x5C31;&#x4E0D;&#x518D;&#x91CD;&#x590D;&#x4E86;&#x3002;&#x5BF9;&#x4E8E;ST7735&#xFF0C;&#x5C4F;&#x5E55;&#x7684;&#x663E;&#x793A;&#x539F;&#x7406;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6DF1;&#x7A76;&#x7684;&#x5730;&#x65B9;&#x3002;&#x53EA;&#x8C08;&#x5E94;&#x7528;&#xFF0C;&#x6211;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x5176;&#x5185;&#x90E8;&#x7684;RAM&#xFF08;&#x59D1;&#x4E14;&#x8FD9;&#x4E48;&#x79F0;&#x547C;&#xFF09;&#x5F88;&#x6709;&#x610F;&#x601D;&#xFF0C;&#x8FD8;&#x6709;&#x5199;&#x5165;&#x6307;&#x4EE4;&#x4E00;&#x5B9A;&#x8981;&#x4ED4;&#x7EC6;&#xFF0C;&#x4EE5;&#x53CA;ST7735&#x7684;&#x662F;&#x5728;&#x4E0A;&#x5347;&#x6CBF;&#x8BFB;&#x5165;&#x6307;&#x4EE4;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x70B9;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x540E;&#x6587;&#x4F1A;&#x63D0;&#x5230;&#x3002;\n&#x786C;&#x4EF6;spi&#x9A71;&#x52A8;&#x9A71;&#x52A8;ST7735&#x7684;&#x8FC7;&#x7A0B;&#x4E5F;&#x662F;&#x5B66;&#x4E60;&#x914D;&#x7F6E;spi&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x786C;&#x4EF6;spi&#x3002;&#x9A71;&#x52A8;&#x5C4F;&#x5E55;&#x4E0D;&#x9700;&#x8981;&#x8BFB;&#x6570;&#x636E;&#xFF0C;&#x7528;&#x4E0D;&#x5230;MISO&#x7EBF;&#x3002;\n&#x5F15;&#x811A;&#x5B9A;&#x4E49;\n\n\nGPIO\nST7735\n&#x8BF4;&#x660E;\n\n\n\nPA7\nSDA\n&#x6570;&#x636E;&#x5199;&#x5165;\n\n\nPA5\nSCL\n&#x65F6;&#x949F;\n\n\nPA4\nCS\n&#x7247;&#x9009;&#xFF0C; 0&#x9009;&#x4E2D; 1&#x5FFD;&#x7565;\n\n\nPC4\nRESET\n&#x786C;&#x4EF6;&#x590D;&#x4F4D;\n\n\nPC5\nDC\n&#x6570;&#x636E;&#x547D;&#x4EE4;&#x9009;&#x62E9;&#xFF0C;0&#x5199;&#x547D;&#x4EE4; 1&#x5199;&#x6570;&#x636E;\n\n\nBLK&#x5F15;&#x811A;&#x63A5;&#x9AD8;&#x5373;&#x53EF;\n&#x521D;&#x59CB;&#x5316;spiSPI_InitStr.SPI_BaudRatePrescaler   = SPI_BaudRatePrescaler_2;// &#x4F7F;&#x5206;&#x9891;&#x503C;&#x8FBE;&#x5230;&#x6700;&#x5927;SPI_InitStr.SPI_CPHA\t\t\t    = SPI_CPHA_2Edge;\t\t  // &#x4E0A;&#x5347;&#x6CBF;&#x6709;&#x6548;SPI_InitStr.SPI_CPOL\t\t\t\t= SPI_CPOL_High;\t\t  // &#x4F4E;&#x7535;&#x5E73;&#x6709;&#x6548;,&#x7A7A;&#x95F2;&#x65F6;&#x4E3A;&#x9AD8;SPI_InitStr.SPI_CRCPolynomial\t    = 7;\t\t\t\t\t  // &#x65E0; CRC &#x6821;&#x9A8C;SPI_InitStr.SPI_DataSize\t\t\t= SPI_DataSize_8b;\t\t  // &#x53D1;&#x9001;&#x5B57;&#x957F;&#x4E3A; 8 &#x4F4D;SPI_InitStr.SPI_Direction\t\t    = SPI_Direction_1Line_Tx; // &#x65B9;&#x5411;&#x4E3A;&#x53D1;&#x9001;SPI_InitStr.SPI_FirstBit\t\t\t= SPI_FirstBit_MSB;\t\t  // &#x9AD8;&#x4F4D;&#x5148;&#x884C;SPI_InitStr.SPI_Mode\t\t\t\t= SPI_Mode_Master;\t\t  // &#x4E3B;&#x673A;&#x6A21;&#x5F0F;SPI_InitStr.SPI_NSS\t\t\t\t    = SPI_NSS_Soft;\t\t\t  // &#x8F6F;&#x4EF6;&#x63A7;&#x5236;\nCPHA&#x63A7;&#x5236;&#x5728;&#x90A3;&#x4E2A;&#xFF08;&#x7B2C;&#x4E00;or&#x7B2C;&#x4E8C;&#xFF09;&#x8FB9;&#x6CBF;&#x53D1;&#x9001;CPOL&#x63A7;&#x5236;spi&#x7A7A;&#x95F2;&#x65F6;&#x7684;&#x72B6;&#x6001;&#xFF08;&#x9AD8;or&#x4F4E;&#xFF09;&#x6A21;&#x5F0F;0 &#xFF1A;CPOL&#x8BBE;&#x7F6E;&#x7A7A;&#x95F2;&#x65F6;&#x4E3A;&#x4F4E;&#xFF0C;&#x5F53;&#x8981;&#x4F20;&#x6570;&#x636E;&#x65F6;MOSI&#x62C9;&#x9AD8;&#x518D;&#x62C9;&#x4F4E;&#x5B8C;&#x6210;&#x4E00;&#x4F4D;&#x6570;&#x636E;&#x4F20;&#x8F93;&#xFF0C;&#x4E0A;&#x5347;&#x6CBF;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x8FB9;&#x6CBF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;CPHA&#x8BBE;&#x7F6E;&#x4E3A;1edge&#x3002;&#x6A21;&#x5F0F;3 : CPOL&#x8BBE;&#x7F6E;&#x7A7A;&#x95F2;&#x65F6;&#x4E3A;&#x9AD8;&#xFF0C;&#x5F53;&#x8981;&#x4F20;&#x6570;&#x636E;&#x65F6;MOSI&#x62C9;&#x4F4E;&#x518D;&#x62C9;&#x9AD8;&#x5B8C;&#x6210;&#x4E00;&#x4F4D;&#x6570;&#x636E;&#x4F20;&#x8F93;&#xFF0C;&#x4E0A;&#x5347;&#x6CBF;&#x4E3A;&#x7B2C;&#x4E8C;&#x4E2A;&#x8FB9;&#x6CBF;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;CPHA&#x8BBE;&#x7F6E;&#x4E3A;2edge&#x3002;\n\nST7735&#x8981;&#x6C42;&#x4E0A;&#x5347;&#x6CBF;&#x63A5;&#x6536;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;SPI&#x914D;&#x7F6E;&#x4E3A;&#x6A21;&#x5F0F;0&#x548C;&#x6A21;&#x5F0F;3&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x3002;\n\n&#xFF08;ST7735&#x6570;&#x636E;&#x624B;&#x518C;104&#x9875;&#xFF09;\n&#x5728;&#x7F16;&#x5199;&#x53D1;&#x9001;&#x51FD;&#x6570;&#x65F6;&#x8981;&#x6CE8;&#x610F;&#xFF1A;&#x5BF9;st7735&#x8BFB;&#x5199;&#x90FD;&#x9700;&#x8981;&#x5728;&#x7247;&#x9009;&#x4FE1;&#x53F7;&#x62C9;&#x4F4E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FDB;&#x884C;&#xFF0C;&#x4E0D;&#x7136;st7735&#x4F1A;&#x5FFD;&#x7565;&#x65F6;&#x949F;SCL&#x4FE1;&#x53F7;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E0D;&#x8BBA;&#x8BFB;&#x5199;&#x90FD;&#x9700;&#x8981;&#x5148;&#x5C06;CS&#x7F6E;0&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6839;&#x636E;&#x8BFB;&#x5199;&#x60C5;&#x51B5;&#x5BF9;DC&#x7F6E;&#x590D;&#x4F4D;&#xFF0C;&#x8BFB;&#x5199;&#x7ED3;&#x675F;&#x540E;&#x5C06;CS&#x62C9;&#x9AD8;&#xFF0C;&#x8BE6;&#x60C5;&#x53EF;&#x53C2;&#x8003;&#x4E0B;&#x9762;&#x7684;&#x53D1;&#x9001;&#x51FD;&#x6570;\nspi&#x5199;&#x6570;&#x636E;&#x51FD;&#x6570;&#xFF1A;\nenum TFT_DATA_CMD{\tTFT_DC_CMD=0,\tTFT_DC_DATA=1};void SPI1_WriteData(uint8_t data){\tuint16_t timeout=0;\twhile(SPI_I2S_GetFlagStatus(SPI1,SPI_I2S_FLAG_TXE) == RESET){\t//&#x53D1;&#x9001;&#x7F13;&#x51B2;&#x533A;&#x4E3A;&#x7A7A;&#x65F6;&#xFF08;TXE=1&#xFF09;&#x624D;&#x53EF;&#x4EE5;&#x5199;&#x5165;\t\tif(++timeout &gt; 200)\t\t\t\t\t\t\t\t\t\t//&#x8D85;&#x65F6;200&#x76F4;&#x63A5;&#x9000;&#x51FA;\t\t\treturn;\t}\tSPI_I2S_SendData(SPI1,data);}void TFT_ST7735_Write(int c_d,uint8_t data){\tTFT_DC = c_d;\tSPI_CS = 0;\tSPI1_WriteData(data);\tSPI_CS = 1;}\n\n\nST7735&#x521D;&#x59CB;&#x5316;&#x7F51;&#x4E0A;&#x521D;&#x59CB;&#x5316;&#x547D;&#x4EE4;&#x7684;&#x6559;&#x7A0B;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x76F4;&#x63A5;&#x7167;&#x6284;&#x5373;&#x53EF;&#xFF0C;&#x4E0B;&#x4E3A;&#x6211;&#x7684;&#x914D;&#x7F6E;&#xFF1A;\nvoid TFT_ST7735_Config(void){\tTFT_ST7735_Reset();\tTFT_ST7735_Write(TFT_DC_CMD,TFT_SLPOUT);\tdelay_ms(120);\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_FRMCTR1);\tTFT_ST7735_Write(TFT_DC_DATA, 0x05);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_FRMCTR2);\tTFT_ST7735_Write(TFT_DC_DATA, 0x05);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_FRMCTR3);\tTFT_ST7735_Write(TFT_DC_DATA, 0x05);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\tTFT_ST7735_Write(TFT_DC_DATA, 0x05);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3C);\t\t//===============inversion of control=============\tTFT_ST7735_Write(TFT_DC_CMD, TFT_INVCRT);\tTFT_ST7735_Write(TFT_DC_DATA, 0x03);\t//===============power set========================\tTFT_ST7735_Write(TFT_DC_CMD, TFT_PWCTR1);\tTFT_ST7735_Write(TFT_DC_DATA, 0x28);\tTFT_ST7735_Write(TFT_DC_DATA, 0x08);\tTFT_ST7735_Write(TFT_DC_DATA, 0x04);\t\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_PWCTR2);\tTFT_ST7735_Write(TFT_DC_DATA, 0xC0);\tTFT_ST7735_Write(TFT_DC_CMD, TFT_PWCTR3);\tTFT_ST7735_Write(TFT_DC_DATA, 0x0D);\tTFT_ST7735_Write(TFT_DC_DATA, 0x00);\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_PWCTR4);\tTFT_ST7735_Write(TFT_DC_DATA, 0x8D);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2A);\t\tTFT_ST7735_Write(TFT_DC_CMD, TFT_PWCTR5);\tTFT_ST7735_Write(TFT_DC_DATA, 0x8D);\tTFT_ST7735_Write(TFT_DC_DATA, 0xEE);\t//===============vcom set=========================\tTFT_ST7735_Write(TFT_DC_CMD, TFT_VMCTR1);\tTFT_ST7735_Write(TFT_DC_DATA, 0x1A);\t\t//===============scanning direction set===========\t\tif(TFT_DIRECTION==0)\t\tTFT_ST7735_SetScanDirection(0x00);//&#x663E;&#x793A;&#x65B9;&#x5411;&#x9009;&#x62E9;\telse if(TFT_DIRECTION==1)\tTFT_ST7735_SetScanDirection(0xC0);\telse if(TFT_DIRECTION==2)\tTFT_ST7735_SetScanDirection(0xA0);\telse\t\t\t\t\t\tTFT_ST7735_SetScanDirection(0x70);\t\t//===============gamma sequence set===============\tTFT_ST7735_Write(TFT_DC_CMD, TFT_GMCTRP1);\tTFT_ST7735_Write(TFT_DC_DATA, 0x04);\tTFT_ST7735_Write(TFT_DC_DATA, 0x22);\tTFT_ST7735_Write(TFT_DC_DATA, 0x07);\tTFT_ST7735_Write(TFT_DC_DATA, 0x0A);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2E);\tTFT_ST7735_Write(TFT_DC_DATA, 0x30);\tTFT_ST7735_Write(TFT_DC_DATA, 0x25);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2A);\tTFT_ST7735_Write(TFT_DC_DATA, 0x28);\tTFT_ST7735_Write(TFT_DC_DATA, 0x26);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2E);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3A);\tTFT_ST7735_Write(TFT_DC_DATA, 0x00);\tTFT_ST7735_Write(TFT_DC_DATA, 0x01);\tTFT_ST7735_Write(TFT_DC_DATA, 0x03);\tTFT_ST7735_Write(TFT_DC_DATA, 0x13);\tTFT_ST7735_Write(TFT_DC_CMD, TFT_GMCTRN1);\tTFT_ST7735_Write(TFT_DC_DATA, 0x04);\tTFT_ST7735_Write(TFT_DC_DATA, 0x16);\tTFT_ST7735_Write(TFT_DC_DATA, 0x06);\tTFT_ST7735_Write(TFT_DC_DATA, 0x0D);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2D);\tTFT_ST7735_Write(TFT_DC_DATA, 0x26);\tTFT_ST7735_Write(TFT_DC_DATA, 0x23);\tTFT_ST7735_Write(TFT_DC_DATA, 0x27);\tTFT_ST7735_Write(TFT_DC_DATA, 0x27);\tTFT_ST7735_Write(TFT_DC_DATA, 0x25);\tTFT_ST7735_Write(TFT_DC_DATA, 0x2D);\tTFT_ST7735_Write(TFT_DC_DATA, 0x3B);\tTFT_ST7735_Write(TFT_DC_DATA, 0x00);\tTFT_ST7735_Write(TFT_DC_DATA, 0x01);\tTFT_ST7735_Write(TFT_DC_DATA, 0x04);\tTFT_ST7735_Write(TFT_DC_DATA, 0x13);\t//===============color format set=================\tTFT_ST7735_SetColorFormat(0x05);\t//===============display on=======================\tTFT_ST7735_Write(TFT_DC_CMD, TFT_DISPON);}\n&#x8E29;&#x5751;&#x8BB0;&#x5F55;&#x7F51;&#x4E0A;&#x521D;&#x59CB;&#x5316;&#x547D;&#x4EE4;&#x7684;&#x6559;&#x7A0B;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x6211;&#x4E3B;&#x8981;&#x8BF4;&#x4E00;&#x4E0B;&#x6211;&#x5728;&#x521D;&#x59CB;&#x5316;&#x4E2D;&#x6709;&#x8FC7;&#x7591;&#x60D1;&#x7684;&#x51E0;&#x4E2A;&#x70B9;\n\n0x36hMADCTL&#x547D;&#x4EE4;&#xFF08;ST7735&#x6570;&#x636E;&#x624B;&#x518C;142&#x9875;&#xFF09;spi&#x6570;&#x636E;&#x9AD8;&#x4F4D;&#x5148;&#x884C;&#xFF0C;RGB&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A;0&#x9009;&#x62E9;&#x4EE5; &#x201C;RGB&#x201D; &#x7684;&#x987A;&#x5E8F;&#x8BFB;&#x5165;&#x989C;&#x8272;&#x6570;&#x636E;\n\n&#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;&#x540E;&#x82B1;&#x5C4F;ST7735&#x7684;frame memory&#xFF08;&#x663E;&#x5B58;&#xFF09;&#x4E0A;&#x7535;&#x540E;&#x4E3A;&#x968F;&#x673A;&#x503C;&#xFF0C;&#x6545;&#x521D;&#x59CB;&#x5316;&#x540E;&#x82B1;&#x5C4F;&#xFF0C;&#x5168;&#x5C4F;&#x586B;&#x5145;&#x767D;&#x8272;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;ST7735&#x6570;&#x636E;&#x624B;&#x518C;89&#x9875;&#xFF09;\n\n\n","categories":["STM32"],"tags":["STM32","笔记","ST7735驱动"]},{"title":"ESP32学习记录","url":"/2025/08/13/esp32%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","content":"&#x524D;&#x8A00;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x5728;&#x5B66;&#x4E60;esp32&#x4E2D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x548C;&#x5916;&#x8BBE;&#x6A21;&#x5757;&#x9A71;&#x52A8;&#x5982;&#x4F55;&#x7F16;&#x5199;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x5728;&#x9605;&#x8BFB;&#x672C;&#x6587;&#x6863;&#x524D;&#x5148;&#x6253;&#x5F00;&#x5B98;&#x65B9;&#x624B;&#x518C;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x548C;&#x914D;&#x7F6E;&#x90FD;&#x662F;&#x53C2;&#x8003;&#x4E86;DuRuofu&#x5927;&#x4F6C;&#x7684;ESP32-Guide&#xFF0C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x8865;&#x5145;&#x9605;&#x8BFB;\nnote:&#x7B14;&#x8005;&#x5BF9;esp32&#x7684;&#x529F;&#x80FD;&#x4E5F;&#x4EC5;&#x4EC5;&#x662F;&#x5904;&#x5728;&#x4F1A;&#x8C03;&#x7528;api&#x800C;&#x5DF2;&#xFF0C;&#x5B9E;&#x529B;&#x6709;&#x9650;&#x3002;&#x5BF9;&#x4E8E;&#x672C;&#x6587;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x9519;&#x8BEF;&#x8FD8;&#x8BF7;&#x89C1;&#x8C05;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4EA4;&#x6D41;&#x53EF;&#x4EE5;&#x53D1;&#x90AE;&#x4EF6;(rzjzwd@outlook.com)&#x6216;&#x8005;&#x8BC4;&#x8BBA;&#x533A;&#x7559;&#x8A00;&#xFF08;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x8BC4;&#x8BBA;&#x533A;&#xFF09;\n\n&#x5916;&#x8BBE;LEDPWM&#x8FD9;&#x4E2A;&#x5916;&#x8BBE;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x63A7;&#x5236;LED&#x547C;&#x5438;&#x706F;&#xFF0C;&#x4F46;&#x662F;&#x672C;&#x6587;&#x6863;&#x4E2D;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5BF9;&#x8235;&#x673A;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x63A7;&#x5236;&#x76F8;&#x5173;&#x7684;&#x51FD;&#x6570;&#x5728;&quot;driver/ledc.h&quot;&#x4E2D;\n&#x53C2;&#x6570;&#x914D;&#x7F6E;\n&#x521D;&#x59CB;&#x5316;&#x5B9A;&#x65F6;&#x5668;ledc_timer_config_t timerCig = {    .speed_mode = LEDC_LOW_SPEED_MODE,      //&#x8BBE;&#x7F6E;&#x901F;&#x5EA6;    .duty_resolution = LEDC_TIMER_13_BIT,   //&#x7CBE;&#x5EA6;    .timer_num = LEDC_TIMER_0,              //&#x5B9A;&#x65F6;&#x5668;0    .freq_hz = 50,                          //&#x9891;&#x7387;50hz    .clk_cfg = LEDC_AUTO_CLK                //&#x65F6;&#x949F;&#x6E90;&#x8BBE;&#x7F6E;};ledc_timer_config(&amp;timerCig);          //&#x8BBE;&#x7F6E;\n&#x914D;&#x7F6E;&#x901A;&#x9053;ledc_channel_config_t channelCfg = {                        .gpio_num = gpioPin,                //gpio&#x53E3;            .speed_mode = LEDC_LOW_SPEED_MODE,  //&#x901F;&#x5EA6;            //&#x901A;&#x9053;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E00;&#x4E2A;&#x5B9A;&#x65F6;&#x5668;&#x6709;&#x516B;&#x4E2A;&#x9AD8;&#x901F;&#x901A;&#x9053;&#x548C;&#x516B;&#x4E2A;&#x4F4E;&#x901F;&#x901A;&#x9053;            .channel = i,                                   .timer_sel = LEDC_TIMER_0,          //&#x8BBE;&#x7F6E;&#x5B9A;&#x65F6;&#x5668;            .duty = 0        };ledc_channel_config(&amp;channelCfg);       //&#x8BBE;&#x7F6E;\n&#x8BBE;&#x7F6E;&#x5360;&#x7A7A;&#x6BD4;&#x51FD;&#x6570;ledc_set_duty(LEDC_LOW_SPEED_MODE, ch, duty);ledc_update_duty(LEDC_LOW_SPEED_MODE, ch);\nch&#x662F;&#x901A;&#x9053;&#xFF0C;&#x6BCF;&#x4E2A;&#x901A;&#x9053;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;pwm&#x8F93;&#x51FA;io,duty&#x5C31;&#x662F;&#x5360;&#x7A7A;&#x6BD4;\n\n&#x8235;&#x673A;&#x63A7;&#x5236;&#x5B9E;&#x6218;//servo_driver.h#ifndef _SERVO_DRIVER_H_#define _SERVO_DRIVER_H_#include &lt;stdint.h&gt;#define SERVO_NUMS (8)#ifdef __cplusplusextern &quot;C&quot; {#endif typedef struct{    uint8_t gpioPin;     float minAngleDeg;            float maxAngleDeg;            uint16_t minPulseOfUs;    uint16_t maxPulseOfUs;} servoConfig_t;//&#x9519;&#x8BEF;&#x7801;typedef enum {    SERVO_OK = 0,    SERVO_ERR_INVALID_ID,   //&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x8235;&#x673A;&#x53F7;    SERVO_ERR_ANGLE_OUT_OF_RANGE    //&#x89D2;&#x5EA6;&#x8D85;&#x8FC7;&#x9608;&#x503C;} servoErrorCode_t;/** * @brief &#x521D;&#x59CB;&#x5316;&#x8235;&#x673A; * @param servoConfig &#x8235;&#x673A;&#x53C2;&#x6570; * @param servoNums &#x8235;&#x673A;&#x6570;&#x91CF; */void servo_init(const servoConfig_t *Config, uint8_t servoNums);/** * @brief &#x8BBE;&#x7F6E;&#x5355;&#x4E2A;&#x8235;&#x673A;&#x89D2;&#x5EA6; * @param servoId &#x8235;&#x673A;&#x53F7; * @param angleDeg &#x89D2;&#x5EA6; */int servo_set_angle(uint8_t servoId, float angleDeg);/** * @brief &#x6279;&#x91CF;&#x8BBE;&#x7F6E;&#x8235;&#x673A;&#x89D2;&#x5EA6; * @param angles &#x89D2;&#x5EA6; * @param servoNums &#x8235;&#x673A;&#x6570; */void servo_set_all_angles(const float* angles, uint8_t servoNums);#ifdef __cplusplus}#endif #endif\n\n//servo_driver.c#include &quot;servo_driver.h&quot;#include &quot;driver/ledc.h&quot;#include &quot;esp_log.h&quot;#define TAG &quot;SERVO_DRIVE&quot;typedef struct {    const servoConfig_t *servoConfigs;    uint8_t servoNums;    ledc_channel_config_t *servoChannels;} servoDriverCtx_t;static servoDriverCtx_t servoDriverCtx;/** * @brief &#x89D2;&#x5EA6;&#x8F6C;&#x5360;&#x7A7A;&#x6BD4; * @param servoId &#x8235;&#x673A;&#x53F7; * @param angleDeg &#x89D2;&#x5EA6; * @return &#x5360;&#x7A7A;&#x6BD4; */static uint32_t angle2duty(uint8_t servoId, float angleDeg){    //&#x53D6;&#x8235;&#x673A;&#x53F7;&#x5BF9;&#x5E94;&#x53C2;&#x6570;&#x7684;&#x6307;&#x9488;&#x7ED9;a2dConfig    const servoConfig_t *a2dConfig = &amp;servoDriverCtx.servoConfigs[servoId];    //&#x89D2;&#x5EA6;&#x9650;&#x5236;    if(angleDeg &lt; a2dConfig-&gt;minAngleDeg){        angleDeg = a2dConfig-&gt;minAngleDeg;    }else if(angleDeg &gt;a2dConfig-&gt;maxAngleDeg){        angleDeg = a2dConfig-&gt;maxAngleDeg;    }else        angleDeg = angleDeg;    //&#x8BA1;&#x7B97;&#x8109;&#x51B2;    float pluseOfUs = a2dConfig-&gt;minPulseOfUs +                      (angleDeg - a2dConfig-&gt;minAngleDeg) *                          (a2dConfig-&gt;maxPulseOfUs - a2dConfig-&gt;minPulseOfUs) /                          (a2dConfig-&gt;maxAngleDeg - a2dConfig-&gt;minAngleDeg);    //pluseOfUs * 1e-6,&#x628A;us&#x8F6C;&#x6362;&#x4E3A;s    //&#x5B9A;&#x65F6;&#x5668;&#x603B;&#x8BA1;&#x6570;&#x503C;(2^13) * &#x4FE1;&#x53F7;&#x9891;&#x7387;&#xFF08;50hz&#xFF09;    //&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x76F8;&#x4E58;&#x5F97;&#x5360;&#x7A7A;&#x6BD4;    return (uint32_t)((pluseOfUs * 1e-6) * ((1 &lt;&lt; LEDC_TIMER_13_BIT) - 1) * 50);}void servo_init (const servoConfig_t *Config, uint8_t servoNums){    servoDriverCtx.servoConfigs = Config;    servoDriverCtx.servoNums = servoNums;    //&#x521D;&#x59CB;&#x5316;LEDC&#x5B9A;&#x65F6;&#x5668;    ledc_timer_config_t servoTimerCig = {        .speed_mode = LEDC_LOW_SPEED_MODE,        .duty_resolution = LEDC_TIMER_13_BIT,        .timer_num = LEDC_TIMER_0,        .freq_hz = 50,        .clk_cfg = LEDC_AUTO_CLK    };    ledc_timer_config(&amp;servoTimerCig);    //&#x914D;&#x7F6E;&#x901A;&#x9053;    servoDriverCtx.servoChannels = malloc(servoNums * sizeof(ledc_channel_config_t));    //&#x6309;&#x8235;&#x673A;&#x6570;&#x91CF;&#xFF0C;&#x901A;&#x9053;&#x7ED3;&#x6784;&#x4F53;&#x5927;&#x5C0F;&#x7533;&#x8BF7;&#x5185;&#x5B58;    for (int i = 0; i &lt; servoNums; i++){        //&#x6309;&#x6570;&#x7EC4;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#x5199;&#x5165;        servoDriverCtx.servoChannels[i] = (ledc_channel_config_t){            .gpio_num = Config[i].gpioPin,            .speed_mode = LEDC_LOW_SPEED_MODE,            .channel = i,            .timer_sel = LEDC_TIMER_0,            .duty = 0        };        ledc_channel_config(&amp;servoDriverCtx.servoChannels[i]);    }}int servo_set_angle (uint8_t servoId, float angleDeg){    static servoErrorCode_t servoErrorCode;        //&#x68C0;&#x67E5;&#x8235;&#x673A;&#x53F7;&#x5408;&#x6CD5;&#x6027;    if(servoId &gt;=servoDriverCtx.servoNums){        ESP_LOGE(TAG, &quot;Invalid servo ID: %d&quot;, servoId);        servoErrorCode = SERVO_ERR_INVALID_ID;        return servoErrorCode;    }    //&#x68C0;&#x67E5;&#x89D2;&#x5EA6;&#x5408;&#x6CD5;&#x6027;    const servoConfig_t *Config = &amp;servoDriverCtx.servoConfigs[servoId];    if(angleDeg &lt; Config-&gt;minAngleDeg || angleDeg &gt; Config-&gt;maxAngleDeg){        ESP_LOGE(TAG, &quot;Servo %d angle %.1f out of range [%.1f, %.1f]&quot;,                 servoId, angleDeg, Config-&gt;minAngleDeg, Config-&gt;maxAngleDeg);        servoErrorCode = SERVO_ERR_ANGLE_OUT_OF_RANGE;        return servoErrorCode;    }    uint32_t duty = angle2duty(servoId, angleDeg);    ledc_set_duty(LEDC_LOW_SPEED_MODE, servoId, duty);    ledc_update_duty(LEDC_LOW_SPEED_MODE, servoId);    servoErrorCode = SERVO_OK;    return servoErrorCode;}void servo_set_all_angles(const float* angles, uint8_t servoNums){    for (int i = 0; i &lt; servoNums; i++){        servo_set_angle(i, angles[i]);    }    }\n&#x5B9E;&#x9645;&#x5E94;&#x7528;&#xFF0C;&#x4EE5;&#x540C;&#x65F6;&#x63A7;&#x5236;&#x516B;&#x4E2A;&#x8235;&#x673A;&#x4E3A;&#x4F8B;\n//&#x6570;&#x7EC4;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#xFF0C;gpio&#xFF0C;&#x6700;&#x5C0F;&#x89D2;&#x5EA6;&#xFF0C;&#x6700;&#x5927;&#x89D2;&#x5EA6;&#xFF0C;&#x6700;&#x5C0F;&#x8109;&#x51B2;&#xFF0C;&#x6700;&#x5927;&#x8109;&#x51B2;servoConfig_t servoConfigse[SERVO_NUMS] = {    {18, 0, 90, 500, 2500},    {19, 0, 180, 500, 2500},    {16, 90, 180, 500, 2500},    {17, 0, 180, 500, 2500},    {26, 0, 90, 500, 2500},    {27, 0, 180, 500, 2500},    {33, 90, 180, 500, 2500},    {32, 0, 180, 500, 2500},};servo_init(servoConfigse, SERVO_NUMS);\n\nUART esp32&#x4E2D;&#x7684;&#x4E32;&#x53E3;&#x6709;&#x4E09;&#x4E2A;&#xFF0C;UART0&#x662F;&#x4F5C;&#x4E3A;&#x4E0B;&#x8F7D;&#xFF0C;&#x8C03;&#x8BD5;&#x4E32;&#x53E3;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6B21;&#x7528;&#x7684;&#x662F;&#x4E32;&#x53E3;2&#x3002;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x51FD;&#x6570;ESP&#x5B98;&#x65B9;&#x5DF2;&#x7ECF;&#x63D0;&#x4F9B;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x6587;&#x4EF6;&#x5F53;&#x4E2D;\n#include &quot;driver/uart.h&quot;\n\n&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x9A71;&#x52A8;&#x5206;&#x4E3A;&#x4E09;&#x6B65;\n\nUART&#x9A71;&#x52A8;&#x6CE8;&#x518C;uart_driver_install(uart_port_t uart_num,   //&#x4E32;&#x53E3;&#x53F7;                    int rx_buffer_size,     //&#x63A5;&#x6536;&#x7AEF;&#x7F13;&#x51B2;&#x533A;                    int tx_buffer_size,     //&#x53D1;&#x9001;&#x7AEF;&#x7F13;&#x51B2;&#x533A;                    int event_queue_size,   //&#x961F;&#x5217;&#x5927;&#x5C0F;&#xFF0C;&#x6CA1;&#x6709;&#x5199;0                    QueueHandle_t *uart_queue, //&#x961F;&#x5217;&#x53E5;&#x67C4;&#xFF0C;&#x6CA1;&#x6709;&#x5199;NULL                    int intr_alloc_flags    //&#x4E2D;&#x65AD;&#x6807;&#x5FD7;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5C31;0                    )   \n&#x793A;&#x4F8B;&#xFF1A;uart_driver_install(2, 1024*2, 0, 0, NULL, 0)\nUART&#x53C2;&#x6570;&#x8BBE;&#x7F6E;uart_param_config(uart_port_t uart_num,         //&#x4E32;&#x53E3;&#x53F7;                const uart_config_t *uart_config//&#x53C2;&#x6570;&#x7ED3;&#x6784;&#x4F53;&#x6307;&#x9488;                )\n\n&#x53C2;&#x6570;&#x7ED3;&#x6784;&#x4F53;&#xFF1A;\nuart_config_t uartConfig = {    .baud_rate = 115200,                    //&#x6CE2;&#x7279;&#x7387;    .data_bits = UART_DATA_8_BITS,          //&#x516B;&#x4F4D;&#x6570;&#x636E;&#x4F4D;    .parity = UART_PARITY_DISABLE,          //&#x6821;&#x9A8C;&#x4F4D;    .stop_bits = UART_STOP_BITS_1,          //&#x505C;&#x6B62;&#x4F4D;    .flow_ctrl = UART_HW_FLOWCTRL_DISABLE   //&#x786C;&#x4EF6;&#x6D41;&#x63A7;&#x5236;};\n\n\nUART&#x5F15;&#x811A;&#x8BBE;&#x7F6E;uart_set_pin(uart_port_t uart_num,      //&#x4E32;&#x53E3;&#x53F7;            int tx_io_num,              //tx&#x5F15;&#x811A;&#xFF08;17&#xFF09;            int rx_io_num,              //rx&#x5F15;&#x811A;&#xFF08;16&#xFF09;            int rts_io_num,             //rts&#x5F15;&#x811A; &#x786C;&#x4EF6;&#x6D41;&#x63A7;&#x811A;            int cts_io_num              //cts&#x5F15;&#x811A; &#x786C;&#x4EF6;&#x6D41;&#x63A7;&#x811A;            )\n&#x793A;&#x4F8B;:&#x5982;&#x679C;&#x4E0D;&#x542F;&#x7528;&#x786C;&#x4EF6;&#x6D41;&#x63A7;&#xFF0C;rts cts&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x4F20;&#x5165;UART_PIN_NO_CHANGEuart_set_pin(2, 17, 16, UART_PIN_NO_CHANGE, UART_PIN_NO_CHANGE)\n\n\n&#x5B9E;&#x6218;\n&#x521B;&#x5EFA;&#x7EC4;&#x4EF6;&#x8FD9;&#x91CC;&#x91C7;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;ESP_IDF&#x4E2D;&#x4F7F;&#x7528;&#x547D;&#x4EE4;idf.py -C components create-component uart_driver\nuart_driver&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x540D;&#x79F0;\n\n&#x5728;components/uart_driver&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x7684;.c .h&#x6587;&#x4EF6;\n\n&#x5F15;&#x5165;&quot;driver/uart.h&quot;&#x53CA;&#x4FEE;&#x6539;CMakeLists.txt&#x6587;&#x4EF6;components/uart_driver/CMakeLists.txt&#xFF0C;&#x6253;&#x5F00;&#x8FD9;&#x4E2A;txt&#x6587;&#x4EF6;,&#x5199;&#x5165;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;\nidf_component_register(SRCS &quot;uart_driver.c&quot;                    INCLUDE_DIRS &quot;include&quot;                    REQUIRES &quot;driver&quot;)\nREQUIRES &quot;driver&quot;&#x90E8;&#x5206;&#x5C31;&#x662F;&#x5728;&#x544A;&#x8BC9;cmake&#x5305;&#x542B;&#x4E86;driver&#x6587;&#x4EF6;&#x5939;&#x7684;&#x5185;&#x5BB9;&#xFF08;&#x6211;&#x731C;&#x7684;&#xFF09;\n\n&#x521D;&#x59CB;&#x5316;&#x51FD;&#x6570;&#x4EE5;&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x53EA;&#x662F;&#x6458;&#x53D6;&#x4E86;&#x6587;&#x4EF6;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#xFF0C;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x6309;&#x6240;&#x9700;&#x914D;&#x7F6E;\n\n\n//uart_driver.htypedef struct {    int bandRate;   //&#x6CE2;&#x7279;&#x7387;    int uartNum;    //&#x4E32;&#x53E3;&#x53F7;    int txPin;    int rxPin;}uartPin_t;         //&#x8FD9;&#x91CC;&#x6211;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x7BA1;&#x7406;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#xFF0C;                    //&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x4E00;&#x822C;&#x4E0D;&#x7528;&#x6539;&#x53D8;/** * @brief &#x521D;&#x59CB;&#x5316;&#x4E32;&#x53E3; * @param uartInitConfig &#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4F53;&#xFF0C;&#x6CE2;&#x7279;&#x7387;&#xFF0C;&#x4E32;&#x53E3;&#x53F7;&#xFF0C;tx&#xFF0C;rx&#x5F15;&#x811A; */void uart_Init(uartPin_t *uartInitConfig);\n&#x51FD;&#x6570;&#x5B9E;&#x73B0;\n//uart_driver.cconst int uartBufferSize = (1024 * 2);void uart_Init(uartPin_t *uartInitConfig){    uartPin_t *uartInitPin = uartInitConfig;    uart_config_t uartConfig = {        .baud_rate = uartInitPin-&gt;bandRate,        .data_bits = UART_DATA_8_BITS,        .parity = UART_PARITY_DISABLE,        .stop_bits = UART_STOP_BITS_1,        .flow_ctrl = UART_HW_FLOWCTRL_DISABLE    };    ESP_ERROR_CHECK(uart_driver_install(uartInitPin-&gt;uartNum, uartBufferSize, 0, 0, NULL, 0));    ESP_ERROR_CHECK(uart_param_config(uartInitPin-&gt;uartNum, &amp;uartConfig));    ESP_ERROR_CHECK(uart_set_pin(uartInitPin-&gt;uartNum, uartInitPin-&gt;txPin, uartInitPin-&gt;rxPin, UART_PIN_NO_CHANGE, UART_PIN_NO_CHANGE));}\nESP_ERROR_CHECK()&#x51FD;&#x6570;&#x8981;&#x5305;&#x542B;#include &quot;esp_err.h&quot;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x9519;&#x7A0B;&#x5E8F;&#x4F1A;&#x76F4;&#x63A5;&#x505C;&#x6B62;\n\n&#x6D4B;&#x8BD5;&#x51FD;&#x6570;&#x4E3B;&#x673A;&#x53D1;&#x4EC0;&#x4E48;&#xFF0C;esp&#x518D;&#x53D1;&#x56DE;&#x6765;void uart_send_recive_test(void *pvParameters){    const char *testLen = &quot;Please send massage\\n&quot;;    uint8_t rxData[10];                             //&#x63A5;&#x6536;&#x6570;&#x7EC4;&#x5927;&#x5C0F;    uart_write_bytes(2, testLen, strlen(testLen));    while(1){        int length = 0;        ESP_ERROR_CHECK(uart_get_buffered_data_len(2, (size_t*)&amp;length));        if(length &gt; 0){            int readLength = uart_read_bytes(2, &amp;rxData, length, pdMS_TO_TICKS(100));            if(readLength &gt; 0){                uart_write_bytes(2, rxData, 10);            }        }        vTaskDelay(10);    }}\n\n&#x7247;&#x5185;&#x529F;&#x80FD;WIFI&#x8FD9;&#x8282;&#x53EA;&#x4ECB;&#x7ECD;WiFi&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4F7F;&#x7528;WiFi&#x914D;&#x7F51;&#xFF0C;&#x8BF7;&#x8F6C;&#x5230;&#x914D;&#x7F51;&#x7684;&#x7AE0;&#x8282;\n&#x53C2;&#x6570;&#x8BBE;&#x7F6E;\n&#x521D;&#x59CB;&#x5316;TCP/IP&#x534F;&#x8BAE;&#x6808;ESP_ERROR_CHECK(esp_netif_init());ESP_ERROR_CHECK&#x7528;&#x4E8E;&#x68C0;&#x67E5;\n&#x914D;&#x7F6E;WIFI&#x53C2;&#x6570;&#x6A21;&#x5F0F;&#x53C2;&#x6570;esp_netif_create_default_wifi_sta();&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;sta&#x6A21;&#x5F0F;&#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x53C2;&#x6570;&#x914D;&#x7F6E;:&#x9ED8;&#x8BA4;&#x53C2;&#x6570;wifi_init_config_t cfg = WIFI_INIT_CONFIG_DEFAULT();wifi_init_config_t&#x7ED3;&#x6784;&#x4F53;&#x7C7B;&#x578B;WIFI_INIT_CONFIG_DEFAULT()&#x8FD4;&#x56DE;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF1A;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;wifi_config_t wifi_config = {        .sta = {            .ssid = &quot;yourssid&quot;,            .password = &quot;yourpassword&quot;,        },}\n&#x8BBE;&#x7F6E;&#x53C2;&#x6570;ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_STA));//&#x8BBE;&#x7F6E;sta&#x6A21;&#x5F0F;//&#x8BBE;&#x7F6E;&#x53C2;&#x6570;ESP_ERROR_CHECK(esp_wifi_set_config(ESP_IF_WIFI_STA, wifi_config));\nwifi_&#x542F;&#x52A8;ESP_ERROR_CHECK(esp_wifi_start());\n\nwifi&#x4E8B;&#x4EF6;\n&#x8BBE;&#x7F6E;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;ESP_ERROR_CHECK(esp_event_loop_create_default());\n&#x58F0;&#x660E;&#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x793A;&#x4F8B;&#xFF1A;esp_event_handler_instance_t instance_any_id;idesp_event_handler_instance_t instance_got_ip;&#x83B7;&#x53D6;ip\n&#x6CE8;&#x518C;&#x4E8B;&#x4EF6;ESP_ERROR_CHECK(esp_event_handler_instance_register(WIFI_EVENT,//&#x4E8B;&#x4EF6;&#x7C7B;&#x578B;                                        ESP_EVENT_ANY_ID,//&#x4E8B;&#x4EF6;id                                        &amp;wifi_event_handler,//&#x5904;&#x7406;&#x51FD;&#x6570;                                        NULL,//&#x5904;&#x7406;&#x51FD;&#x6570;&#x53C2;&#x6570;                                        &amp;instance_any_id//&#x5B9E;&#x4F8B;&#x5316;&#x53C2;&#x6570;                                        ));ESP_ERROR_CHECK(esp_event_handler_instance_register(IP_EVENT,                                        IP_EVENT_STA_GOT_IP,                                        &amp;wifi_event_handler,                                        NULL,                                        &amp;instance_got_ip                                        ));\n&#x6CE8;&#x518C;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x540E;&#x8981;&#x5B9A;&#x4E49;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;\n&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x8BF4;&#x660E;&#x5982;&#x679C;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x51FD;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x8981;&#x6839;&#x636E;&#x4E8B;&#x4EF6;&#x7EC4;&#x7684;&#x60C5;&#x51B5;&#x6765;&#x901A;&#x77E5;&#x54EA;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x54CD;&#x5E94;&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E8B;&#x4EF6;&#x7EC4;&#x6765;&#x7BA1;&#x7406;&#x4E0D;&#x540C;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5177;&#x4F53;&#x5982;&#x4F55;&#x505A;&#x5728;&#x4E0B;&#x8FF0;&#x7684;&#x5185;&#x5BB9;&#x4E2D;\n\n&#x5B9E;&#x6218;//wifi_driver.h#ifndef _WIFI_DRIVER_H#define _WIFI_DRIVER_H#include &lt;stdint.h&gt;#include &lt;stdbool.h&gt;#include &quot;freertos/FreeRTOS.h&quot;#include &quot;freertos/semphr.h&quot;typedef struct {    char ssid[32];    char password[64];    // char ip[16];    // char gw[16];    // char netmask[16];} wifi_info_config_t;extern char sta_ip[16];extern bool sta_connected;extern bool ap_active;extern SemaphoreHandle_t wifiStaConnectedHandle;#ifdef __cplusplusextern &quot;C&quot; {#endif    void wifi_init(void);    void wifi_config_ap(void);    void wifi_config_sta(wifi_info_config_t *config);    bool wifi_has_saved_config(void);    void wifi_save_config(wifi_info_config_t *config);    void wifi_load_config(wifi_info_config_t *config);    void wifi_clear_config(void);    void wifi_close_ap(void);#ifdef _cplusplus}#endif#endif\n//wifi_driver.c#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &quot;wifi_driver.h&quot;#include &quot;freertos/FreeRTOS.h&quot;#include &quot;freertos/event_groups.h&quot;#include &quot;esp_wifi.h&quot;#include &quot;esp_event.h&quot;#include &quot;esp_log.h&quot;#include &quot;esp_err.h&quot;#define WIFI_CONNECTED_BIT BIT0 //&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x4E8B;&#x4EF6;&#x8BBE;&#x7F6E;&#x5728;&#x4E8B;&#x4EF6;&#x7EC4;0&#x4F4D;&#xFF0C;esp32&#x4E2D;&#x5BF9;&#x6240;&#x6709;&#x4F4D;&#x90FD;&#x6709;&#x5B9A;&#x4E49;#define WIFI_FAIL_BIT      BIT1 //&#x8FDE;&#x63A5;&#x5931;&#x8D25;#define EXAMPLE_ESP_MAXIMUM_RETRY 5 //&#x6700;&#x591A;&#x91CD;&#x8BD5;&#x6B21;&#x6570;static const char *TAG = &quot;wifi station&quot;;static int s_retry_num = 0;static EventGroupHandle_t s_wifi_event_group;   //&#x521B;&#x5EFA;&#x4E8B;&#x4EF6;&#x7EC4;&#x53E5;&#x67C4;static void wifi_event_handler(void* arg, esp_event_base_t event_base,                                int32_t event_id, void* event_data){    if (event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_STA_START) {//wifi&#x4E8B;&#x4EF6;        esp_wifi_connect();    } else if (event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_STA_DISCONNECTED) {        if (s_retry_num &lt; EXAMPLE_ESP_MAXIMUM_RETRY) {//&#x5C1D;&#x8BD5;5&#x6B21;&#x8FDE;&#x63A5;&#x4E0D;&#x4E0A;&#x5C31;&#x6253;&#x5370;&#x9519;&#x8BEF;&#x4FE1;&#x606F;            esp_wifi_connect();            s_retry_num++;            ESP_LOGI(TAG, &quot;retry to connect to the AP&quot;);        } else {            xEventGroupSetBits(s_wifi_event_group, WIFI_FAIL_BIT);//&#x7ED9;wifi&#x4E8B;&#x4EF6;&#x7EC4;&#x7684;&#x5931;&#x8D25;&#x4F4D;&#x7F6E;&#x4F4D;        }        ESP_LOGI(TAG,&quot;connect to the AP fail&quot;);    } else if (event_base == IP_EVENT &amp;&amp; event_id == IP_EVENT_STA_GOT_IP) {//ip&#x4E8B;&#x4EF6;        ip_event_got_ip_t* event = (ip_event_got_ip_t*) event_data;        ESP_LOGI(TAG, &quot;got ip:&quot; IPSTR, IP2STR(&amp;event-&gt;ip_info.ip));        s_retry_num = 0;        xEventGroupSetBits(s_wifi_event_group, WIFI_CONNECTED_BIT);//&#x7ED9;wifi&#x4E8B;&#x4EF6;&#x7EC4;&#x7684;&#x5DF2;&#x8FDE;&#x63A5;&#x4F4D;&#x7F6E;&#x4F4D;    }}void wifi_init_sta(const char *ssid, const char *password){    s_wifi_event_group = xEventGroupCreate();       //&#x521B;&#x5EFA;&#x4E8B;&#x4EF6;&#x7EC4;        //&#x521D;&#x59CB;&#x5316;TCP/IP&#x534F;&#x8BAE;&#x6808;    ESP_ERROR_CHECK(esp_netif_init());    //&#x521B;&#x5EFA;&#x9ED8;&#x8BA4;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;    ESP_ERROR_CHECK(esp_event_loop_create_default());     esp_netif_t *sta_netif = esp_netif_create_default_wifi_sta();    assert(sta_netif);    // WiFi&#x914D;&#x7F6E;    wifi_init_config_t cfg = WIFI_INIT_CONFIG_DEFAULT();    ESP_ERROR_CHECK(esp_wifi_init(&amp;cfg));      esp_event_handler_instance_t instance_any_id;    esp_event_handler_instance_t instance_got_ip;    ESP_ERROR_CHECK(esp_event_handler_instance_register(WIFI_EVENT,                                                        ESP_EVENT_ANY_ID,                                                        &amp;wifi_event_handler,                                                        NULL,                                                        &amp;instance_any_id));    ESP_ERROR_CHECK(esp_event_handler_instance_register(IP_EVENT,                                                        IP_EVENT_STA_GOT_IP,                                                        &amp;wifi_event_handler,                                                        NULL,                                                        &amp;instance_got_ip));    wifi_config_t wifi_config = {        .sta = {            .ssid = &quot;&quot;,            .password = &quot;&quot;,            /* Authmode threshold resets to WPA2 as default if password matches WPA2 standards (password len =&gt; 8).             * If you want to connect the device to deprecated WEP/WPA networks, Please set the threshold value             * to WIFI_AUTH_WEP/WIFI_AUTH_WPA_PSK and set the password with length and format matching to             * WIFI_AUTH_WEP/WIFI_AUTH_WPA_PSK standards.             */            // .threshold.authmode = ESP_WIFI_SCAN_AUTH_MODE_THRESHOLD,            // .sae_pwe_h2e = ESP_WIFI_SAE_MODE,            // .sae_h2e_identifier = EXAMPLE_H2E_IDENTIFIER,        },    };    strncpy((char*)wifi_config.sta.ssid, ssid, sizeof(wifi_config.sta.ssid));    strncpy((char*)wifi_config.sta.password, password, sizeof(wifi_config.sta.password));    ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_STA));    ESP_ERROR_CHECK(esp_wifi_set_config(ESP_IF_WIFI_STA, &amp;wifi_config));    ESP_ERROR_CHECK(esp_wifi_start());          ESP_LOGI(TAG, &quot;wifi_init_sta finished.&quot;);    /* Waiting until either the connection is established (WIFI_CONNECTED_BIT) or connection failed for the maximum     * number of re-tries (WIFI_FAIL_BIT). The bits are set by event_handler() (see above) */    //&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x4E8B;&#x4EF6;&#x5EFA;&#x7ACB;&#x8D77;&#x6765;&#xFF0C;&#x6216;&#x8005;&#x5C1D;&#x8BD5;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x540E;&#x5931;&#x8D25;&#xFF0C;&#x7531;wifi_event_handler()&#x8BBE;&#x7F6E;&#xFF0C;    //&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;    EventBits_t bits = xEventGroupWaitBits(s_wifi_event_group,            WIFI_CONNECTED_BIT | WIFI_FAIL_BIT,            pdFALSE,            pdFALSE,            portMAX_DELAY);    /* xEventGroupWaitBits() returns the bits before the call returned, hence we can test which event actually     * happened. */    //&#x6839;&#x636E;&#x4E8B;&#x4EF6;&#x4F4D;&#x6765;&#x6D4B;&#x8BD5;&#x4E8B;&#x4EF6;&#x662F;&#x5426;&#x53D1;&#x751F;    if (bits &amp; WIFI_CONNECTED_BIT) {        ESP_LOGI(TAG, &quot;connected to ap SSID:%s password:%s&quot;,ssid, password);    } else if (bits &amp; WIFI_FAIL_BIT) {        ESP_LOGI(TAG, &quot;Failed to connect to SSID:%s, password:%s&quot;,ssid, password);    } else {        ESP_LOGE(TAG, &quot;UNEXPECTED EVENT&quot;);    }}\n\n\n\nAP+STA&#x6A21;&#x5F0F;&#x914D;&#x7F51;&#x672C;&#x8282;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;AP+STA&#x6A21;&#x5F0F;&#x7684;&#x7B80;&#x5355;&#x914D;&#x7F51;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD8;&#x5904;&#x4E8E;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4E86;&#x89E3;http&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8BF7;&#x5728;&#x9605;&#x8BFB;&#x672C;&#x8282;&#x524D;&#x9605;&#x8BFB;HTTP&#x670D;&#x52A1;&#x5668;&#x7684;&#x90E8;&#x5206;&#x539F;&#x7406;&#xFF1A;\n\nesp32&#x5F00;&#x542F;STA+AP&#x6A21;&#x5F0F;&#xFF0C;&#x624B;&#x673A;&#x8FDE;&#x63A5;esp32&#x70ED;&#x70B9;&#xFF0C;&#x70ED;&#x70B9;&#x540D;&#x79F0;&#x548C;&#x5BC6;&#x7801;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;esp32&#x7684;ap&#x6A21;&#x5F0F;&#x9ED8;&#x8BA4;&#x7684;ip(192.168.4.1)&#xFF0C;\n&#x7528;&#x8FD9;&#x4E2A;ip&#x8BBF;&#x95EE;http&#x8D44;&#x6E90;&#xFF0C;&#x8BF7;&#x6C42;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x7528;&#x4E8E;&#x586B;&#x5199;WiFi&#x540D;&#x79F0;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x5185;&#x90E8;&#x8FD4;&#x56DE;&#x5E76;&#x5B58;&#x5165;esp32&#x7684;NVS&#xFF0C;&#x4E0D;&#x4E86;&#x89E3;&#x7684;&#x540C;&#x5B66;&#x770B;&#x8FD9;&#x4E2A;\n&#x70B9;&#x51FB;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;esp32&#x4F7F;&#x7528;&#x7528;&#x6237;&#x586B;&#x5199;&#x7684;WiFi&#x4FE1;&#x606F;&#x8FDE;&#x63A5;WiFi\n\n\n\n\n&#x6210;&#x529F;\n&#x5931;&#x8D25;\n\n\n\n&#x663E;&#x793A;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x624B;&#x52A8;&#x5237;&#x65B0;&#x4E00;&#x4E0B;&#x9875;&#x9762;&#xFF0C;&#x70B9;&#x51FB;&#x4E0B;&#x4E00;&#x6B65;\n&#x663E;&#x793A;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#xFF0C;&#x8FD4;&#x56DE;&#x914D;&#x7F6E;&#x9875;&#x9762;\n\n\n\n&#x8FD9;&#x91CC;&#x4E00;&#x822C;&#x8FD8;&#x8FDE;&#x63A5;&#x7684;&#x662F;esp32&#x7684;&#x70ED;&#x70B9;&#xFF0C;&#x663E;&#x793A;&#x5206;&#x914D;&#x7684;ip&#x5730;&#x5740;&#x548C;&#x5173;&#x95ED;ap&#x6A21;&#x5F0F;&#x529F;&#x80FD;&#x3002;&#x63A8;&#x8350;&#x914D;&#x7F51;&#x6210;&#x529F;&#x540E;&#x5173;&#x95ED;ap&#xFF0C;&#x6BD4;&#x8F83;&#x8017;&#x7535;&#x3002;\n&#x70B9;&#x51FB;&#x8FDE;&#x63A5;&#x540E;&#x4F1A;&#x8DF3;&#x8F6C;&#x5230;&#x8DEF;&#x7531;&#x5668;&#x4E3A;esp32&#x5206;&#x914D;&#x7684;&#x7F51;&#x5740;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6CA1;&#x6709;&#x53CD;&#x5E94;&#xFF0C;&#x56E0;&#x4E3A;esp32&#x4E0D;&#x54CD;&#x5E94;&#x8DEF;&#x7531;&#x5206;&#x914D;&#x7684;ip&#xFF1B;&#x8FD9;&#x65F6;&#x5019;&#x4E0D;&#x8981;&#x5173;&#x95ED;&#x7F51;&#x9875;&#x5C06;&#x8FDE;&#x63A5;esp32&#x7684;&#x8BBE;&#x5907;&#x5207;&#x6362;&#x5230;&#x914D;&#x7F6E;&#x7684;&#x5C40;&#x57DF;&#x7F51;&#xFF0C;&#x518D;&#x5237;&#x65B0;&#x4E00;&#x4E0B;&#x3002;\n&#x70B9;&#x51FB;&#x8BBF;&#x95EE;&#x8BBE;&#x5907;&#xFF0C;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x63A7;&#x5236;&#x7F51;&#x9875;\n&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x56FA;&#x5B9A;ip&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8FDE;&#x63A5;&#x9636;&#x6BB5;&#x7528;&#x4E32;&#x53E3;&#x67E5;&#x770B;&#x5206;&#x914D;&#x7684;ip&#x5730;&#x5740;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x6E05;&#x9664;&#x4FDD;&#x5B58;&#x7684;wifi&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;esp-idf&#x7684;&#x6E05;&#x7406;flash&#x7684;&#x5DE5;&#x5177;&#x5E76;&#x91CD;&#x65B0;&#x70E7;&#x5F55;&#x4EE3;&#x7801;&#x3002;&#x6E90;&#x7801;&#x5904;&#x4E8E;debug&#x9636;&#x6BB5;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x9636;&#x6BB5;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x7406;nvs&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x6E05;&#x7406;&#x4E0D;&#x4E86;wifi&#x4FE1;&#x606F;&#xFF0C;&#x540E;&#x7EED;&#x4F18;&#x5316;\n\n&#x5B9E;&#x6218;//wifi_driver.h#ifndef _WIFI_DRIVER_H#define _WIFI_DRIVER_H#include &lt;stdint.h&gt;#include &lt;stdbool.h&gt;#include &quot;freertos/FreeRTOS.h&quot;#include &quot;freertos/semphr.h&quot;typedef struct {    char ssid[32];    char password[64];    // char ip[16];    // char gw[16];    // char netmask[16];} wifi_info_config_t;extern char sta_ip[16];extern bool sta_connected;extern bool ap_active;extern SemaphoreHandle_t wifiStaConnectedHandle;#ifdef __cplusplusextern &quot;C&quot; {#endif    void wifi_init(void);       //&#x521D;&#x59CB;&#x5316;    void wifi_config_ap(void);  //&#x8BBE;&#x7F6E;ap&#x6A21;&#x5F0F;    void wifi_config_sta(wifi_info_config_t *config);   //&#x8BBE;&#x7F6E;sta&#x6A21;&#x5F0F;    bool wifi_has_saved_config(void);                   //&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x4FDD;&#x5B58;&#x7684;&#x914D;&#x7F6E;    void wifi_save_config(wifi_info_config_t *config);  //&#x4FDD;&#x5B58;wifi&#x914D;&#x7F6E;    void wifi_load_config(wifi_info_config_t *config);  //&#x52A0;&#x8F7D;&#x914D;&#x7F6E;    void wifi_clear_config(void);                       //&#x6E05;&#x9664;&#x914D;&#x7F6E;    void wifi_close_ap(void);                           //&#x5173;&#x95ED;ap&#x6A21;&#x5F0F;#ifdef _cplusplus}#endif#endif```c//wifi_driver.c#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &quot;wifi_driver.h&quot;#include &quot;esp_wifi.h&quot;#include &quot;esp_event.h&quot;#include &quot;esp_check.h&quot;#include &quot;esp_netif.h&quot;#include &quot;lwip/ip_addr.h&quot;#include &quot;nvs_flash.h&quot;#include &quot;nvs.h&quot;//wifi&#x4E8B;&#x4EF6;&#x7EC4;&#x4F4D;#define WIFI_CONNECTED_BIT BIT0#define WIFI_FAIL_BIT      BIT1#define EXAMPLE_ESP_MAXIMUM_RETRY 5//AP&#x6A21;&#x5F0F;&#x4FE1;&#x606F;#define EXAMPLE_ESP_WIFI_AP_SSID            &quot;ESP_WIFI_AP&quot;#define EXAMPLE_ESP_WIFI_AP_PASSWD          &quot;12345678&quot;#define EXAMPLE_ESP_WIFI_CHANNEL            6#define EXAMPLE_MAX_STA_CONN                4//nvs&#x4FDD;&#x5B58;wifi&#x914D;&#x7F6E;static const char *NVS_NAMESPACE = &quot;wifi_config&quot;;static const char *NVS_KEY = &quot;sta_config&quot;;//&#x8FDE;&#x63A5;&#x6A21;&#x5F0F;&#x4FE1;&#x606F;char sta_ip[16] = &quot;0.0.0.0&quot;;bool sta_connected = false;bool ap_active = true;//&#x65E5;&#x5FD7;&#x4FE1;&#x606F;static const char *TAG_AP = &quot;WiFi SoftAP&quot;;static const char *TAG_STA = &quot;WiFi Sta&quot;;static int s_retry_num = 0;// &#x58F0;&#x660E;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x6307;&#x9488;static esp_netif_t *sta_netif = NULL;static esp_netif_t *ap_netif = NULL;//&#x521B;&#x5EFA;&#x4E8B;&#x4EF6;&#x7EC4;&#x53E5;&#x67C4;static EventGroupHandle_t s_wifi_event_group;   //&#x521B;&#x5EFA;sta&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x4FE1;&#x53F7;&#x91CF;SemaphoreHandle_t wifiStaConnectedHandle = NULL;static void wifi_event_handler(void* arg, esp_event_base_t event_base,                                int32_t event_id, void* event_data){    if (event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_AP_STACONNECTED)     {        //wifi_event_ap_staconnected_t *event = (wifi_event_ap_staconnected_t *) event_data;        ESP_LOGI(TAG_AP, &quot;Station connected to AP&quot;);    }     else if (event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_AP_STADISCONNECTED)     {        //wifi_event_ap_stadisconnected_t *event = (wifi_event_ap_stadisconnected_t *) event_data;        ESP_LOGI(TAG_AP, &quot;Station disconnected to AP&quot;);    }     else if (event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_STA_START)     {        esp_wifi_connect();        s_retry_num = 0;        ESP_LOGI(TAG_STA, &quot;Station started&quot;);    }    else if(event_base == WIFI_EVENT &amp;&amp; event_id == WIFI_EVENT_STA_DISCONNECTED)     {        if (s_retry_num &lt; EXAMPLE_ESP_MAXIMUM_RETRY) {//&#x5C1D;&#x8BD5;5&#x6B21;&#x8FDE;&#x63A5;&#x4E0D;&#x4E0A;&#x5C31;&#x6253;&#x5370;&#x9519;&#x8BEF;&#x4FE1;&#x606F;            esp_wifi_connect();            s_retry_num++;            ESP_LOGI(TAG_STA, &quot;retry to connect to the AP&quot;);        } else {            //sta&#x8FDE;&#x63A5;&#x5931;&#x8D25;            xEventGroupSetBits(s_wifi_event_group, WIFI_FAIL_BIT);//&#x7ED9;wifi&#x4E8B;&#x4EF6;&#x7EC4;&#x7684;&#x5931;&#x8D25;&#x4F4D;&#x7F6E;&#x4F4D;            sta_connected = false;            xSemaphoreGive(wifiStaConnectedHandle);            ESP_LOGE(TAG_STA, &quot;&#x8D85;&#x8FC7;&#x6700;&#x5927;&#x91CD;&#x8FDE;&#x6B21;&#x6570;,&#x8FDE;&#x63A5;&#x5931;&#x8D25;&quot;);            // &#x542F;&#x7528; AP &#x6A21;&#x5F0F;&#x5141;&#x8BB8;&#x91CD;&#x65B0;&#x914D;&#x7F6E;            if (!ap_active) {                wifi_config_ap();             }        }    }    else if (event_base == IP_EVENT &amp;&amp; event_id == IP_EVENT_STA_GOT_IP)     {//ip&#x4E8B;&#x4EF6;        ip_event_got_ip_t *event = (ip_event_got_ip_t *) event_data;        ESP_LOGI(TAG_STA, &quot;Got IP:&quot; IPSTR, IP2STR(&amp;event-&gt;ip_info.ip));        sprintf(sta_ip, IPSTR, IP2STR(&amp;event-&gt;ip_info.ip));        s_retry_num = 0;        //&#x8FDE;&#x63A5;&#x6210;&#x529F;        sta_connected = true;        xSemaphoreGive(wifiStaConnectedHandle);        xEventGroupSetBits(s_wifi_event_group, WIFI_CONNECTED_BIT);    }}void wifi_init(void){    //&#x521B;&#x5EFA;&#x4E8C;&#x503C;&#x4FE1;&#x53F7;&#x91CF;&#xFF0C;wifi&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x4FE1;&#x53F7;&#x91CF;    wifiStaConnectedHandle = xSemaphoreCreateBinary();    //&#x521D;&#x59CB;&#x5316;&#x65F6;&#x95F4;&#x7EC4;    s_wifi_event_group = xEventGroupCreate();    //&#x521D;&#x59CB;&#x5316;TCP/IP&#x534F;&#x8BAE;&#x6808;    ESP_ERROR_CHECK(esp_netif_init());    //&#x521B;&#x5EFA;&#x9ED8;&#x8BA4;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;    ESP_ERROR_CHECK(esp_event_loop_create_default());     // &#x521B;&#x5EFA;&#x9ED8;&#x8BA4;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;    if (sta_netif == NULL) {        sta_netif = esp_netif_create_default_wifi_sta();        assert(sta_netif != NULL);    }    // WiFi&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;    wifi_init_config_t cfg = WIFI_INIT_CONFIG_DEFAULT();    ESP_ERROR_CHECK(esp_wifi_init(&amp;cfg));     //wifi_config_sta(const char *ssid, const char *password);    esp_event_handler_instance_t instance_any_id;    esp_event_handler_instance_t instance_got_ip;    ESP_ERROR_CHECK(esp_event_handler_instance_register(WIFI_EVENT,                                                        ESP_EVENT_ANY_ID,                                                        &amp;wifi_event_handler,                                                        NULL,                                                        &amp;instance_any_id));    ESP_ERROR_CHECK(esp_event_handler_instance_register(IP_EVENT,                                                        IP_EVENT_STA_GOT_IP,                                                        &amp;wifi_event_handler,                                                        NULL,                                                        &amp;instance_got_ip));    // &#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x4FDD;&#x5B58;&#x7684;&#x914D;&#x7F6E;    if (wifi_has_saved_config()) {        wifi_info_config_t config;        wifi_load_config(&amp;config);                // &#x53EA;&#x5F00;&#x542F;STA&#x6A21;&#x5F0F;        ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_STA));        wifi_config_sta(&amp;config);        ap_active = false;        ESP_LOGI(TAG_STA, &quot;&#x4F7F;&#x7528;&#x4FDD;&#x5B58;&#x7684;&#x914D;&#x7F6E;&#x8FDE;&#x63A5;WiFi: %s&quot;, config.ssid);    } else {        // &#x5F00;&#x542F;AP+STA&#x6A21;&#x5F0F;        wifi_config_ap();     }        // &#x542F;&#x52A8;WiFi    ESP_ERROR_CHECK(esp_wifi_start());}void wifi_config_ap(void){    ESP_LOGI(TAG_AP, &quot;Starting AP mode...&quot;);    // &#x521B;&#x5EFA;AP&#x7F51;&#x7EDC;&#x63A5;&#x53E3;    if (ap_netif == NULL) {        ap_netif = esp_netif_create_default_wifi_ap();        assert(ap_netif != NULL);    }        wifi_config_t wifi_ap_config = {        .ap = {            .ssid = EXAMPLE_ESP_WIFI_AP_SSID,            .ssid_len = strlen(EXAMPLE_ESP_WIFI_AP_SSID),            .channel = EXAMPLE_ESP_WIFI_CHANNEL,            .password = EXAMPLE_ESP_WIFI_AP_PASSWD,            .max_connection = EXAMPLE_MAX_STA_CONN,            .authmode = WIFI_AUTH_WPA2_PSK,            .pmf_cfg = {                .required = false,            },        },    };    if (strlen(EXAMPLE_ESP_WIFI_AP_PASSWD) == 0) {        wifi_ap_config.ap.authmode = WIFI_AUTH_OPEN;    }    ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_APSTA));    ESP_ERROR_CHECK(esp_wifi_set_config(WIFI_IF_AP, &amp;wifi_ap_config));    ap_active = true;    ESP_LOGI(TAG_AP, &quot;AP+STA&#x6A21;&#x5F0F;&#x542F;&#x52A8;. AP SSID: %s&quot;, EXAMPLE_ESP_WIFI_AP_SSID);    // ESP_LOGI(TAG_AP, &quot;wifi_init_softap finished. SSID:%s password:%s channel:%d&quot;,    //          EXAMPLE_ESP_WIFI_AP_SSID, EXAMPLE_ESP_WIFI_AP_PASSWD, EXAMPLE_ESP_WIFI_CHANNEL);}void wifi_config_sta(wifi_info_config_t *config){    ESP_LOGI(TAG_STA, &quot;Connecting to WiFi: %s&quot;, config-&gt;ssid);    // &#x521B;&#x5EFA;STA&#x7F51;&#x7EDC;&#x63A5;&#x53E3;    if (sta_netif == NULL) {        sta_netif = esp_netif_create_default_wifi_sta();        assert(sta_netif != NULL);    }    wifi_config_t wifi_sta_config = {        .sta = {            .ssid = &quot;NULL&quot;,            .password = &quot;NULL&quot;,            /* Authmode threshold resets to WPA2 as default if password matches WPA2 standards (password len =&gt; 8).             * If you want to connect the device to deprecated WEP/WPA networks, Please set the threshold value             * to WIFI_AUTH_WEP/WIFI_AUTH_WPA_PSK and set the password with length and format matching to             * WIFI_AUTH_WEP/WIFI_AUTH_WPA_PSK standards.             */            .threshold.authmode = WIFI_AUTH_WPA2_PSK,            // .sae_pwe_h2e = ESP_WIFI_SAE_MODE,            // .sae_h2e_identifier = EXAMPLE_H2E_IDENTIFIER,        },    };    strncpy((char*)wifi_sta_config.sta.ssid, config-&gt;ssid, sizeof(wifi_sta_config.sta.ssid));    strncpy((char*)wifi_sta_config.sta.password, config-&gt;password, sizeof(wifi_sta_config.sta.password));    //ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_STA));    ESP_ERROR_CHECK(esp_wifi_set_config(WIFI_IF_STA, &amp;wifi_sta_config));    // // &#x8BBE;&#x7F6E;&#x9759;&#x6001;IP    // if (strlen(config-&gt;ip) &gt; 0 &amp;&amp; strlen(config-&gt;gw) &gt; 0 &amp;&amp; strlen(config-&gt;netmask) &gt; 0) {    //     esp_netif_ip_info_t ip_info;    //     memset(&amp;ip_info, 0, sizeof(ip_info));            //     ip_info.ip.addr = ipaddr_addr(config-&gt;ip);    //     ip_info.gw.addr = ipaddr_addr(config-&gt;gw);    //     ip_info.netmask.addr = ipaddr_addr(config-&gt;netmask);            //     esp_netif_dhcp_status_t dhcp_status;    //     esp_netif_t* netif = esp_netif_get_handle_from_ifkey(&quot;WIFI_STA_DEF&quot;);            //     if (esp_netif_dhcpc_get_status(netif, &amp;dhcp_status) == ESP_OK) {    //         if (dhcp_status == ESP_NETIF_DHCP_STARTED) {    //             ESP_ERROR_CHECK(esp_netif_dhcpc_stop(netif));    //         }    //         ESP_ERROR_CHECK(esp_netif_set_ip_info(netif, &amp;ip_info));    //     }    // }    ESP_LOGI(TAG_STA, &quot;wifi_init_sta finished.&quot;);    // &#x91CD;&#x7F6E;&#x91CD;&#x8FDE;&#x8BA1;&#x6570;&#x5668;    s_retry_num = 0;    ESP_ERROR_CHECK(esp_wifi_connect());            // /* Waiting until either the connection is established (WIFI_CONNECTED_BIT) or connection failed for the maximum    //  * number of re-tries (WIFI_FAIL_BIT). The bits are set by event_handler() (see above) */    // //&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x4E8B;&#x4EF6;&#x5EFA;&#x7ACB;&#x8D77;&#x6765;&#xFF0C;&#x6216;&#x8005;&#x5C1D;&#x8BD5;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x540E;&#x5931;&#x8D25;&#xFF0C;&#x7531;wifi_event_handler()&#x8BBE;&#x7F6E;&#xFF0C;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;    // EventBits_t bits = xEventGroupWaitBits(s_wifi_event_group,    //         WIFI_CONNECTED_BIT | WIFI_FAIL_BIT,    //         pdFALSE,    //         pdFALSE,    //         portMAX_DELAY);    // /* xEventGroupWaitBits() returns the bits before the call returned, hence we can test which event actually    //  * happened. */    // //&#x6839;&#x636E;&#x4E8B;&#x4EF6;&#x4F4D;&#x6765;&#x6D4B;&#x8BD5;&#x4E8B;&#x4EF6;&#x662F;&#x5426;&#x53D1;&#x751F;    // if (bits &amp; WIFI_CONNECTED_BIT) {    //     ESP_LOGI(TAG_STA, &quot;connected to ap SSID:%s password:%s&quot;,ssid, password);    // } else if (bits &amp; WIFI_FAIL_BIT) {    //     ESP_LOGI(TAG_STA, &quot;Failed to connect to SSID:%s, password:%s&quot;,ssid, password);    // } else {    //     ESP_LOGE(TAG_STA, &quot;UNEXPECTED EVENT&quot;);    // }}bool wifi_has_saved_config(){    nvs_handle_t nvs;    //&#x8BFB;&#x547D;&#x540D;&#x7A7A;&#x95F4;    esp_err_t err = nvs_open(NVS_NAMESPACE, NVS_READONLY, &amp;nvs);    if (err != ESP_OK) {        return false;    }        wifi_info_config_t config;    size_t required_size = sizeof(config);    //&#x8BFB;&#x53D6;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;    err = nvs_get_blob(nvs, NVS_KEY, &amp;config, &amp;required_size);    nvs_close(nvs);    //&#x4EFB;&#x610F;&#x4E3A;false&#x5219;&#x8FD4;&#x56DE;false    return (err == ESP_OK &amp;&amp; required_size == sizeof(config) &amp;&amp; strlen(config.ssid) &gt; 0);}void wifi_save_config(wifi_info_config_t *config){    nvs_handle_t nvs;    esp_err_t err = nvs_open(NVS_NAMESPACE, NVS_READWRITE, &amp;nvs);    if (err != ESP_OK) {        ESP_LOGE(&quot;WIFI&quot;, &quot;&#x65E0;&#x6CD5;&#x6253;&#x5F00;NVS&#x547D;&#x540D;&#x7A7A;&#x95F4;&quot;);        return;    }        err = nvs_set_blob(nvs, NVS_KEY, config, sizeof(wifi_info_config_t));    if (err != ESP_OK) {        ESP_LOGE(&quot;WIFI&quot;, &quot;&#x4FDD;&#x5B58;&#x914D;&#x7F6E;&#x5931;&#x8D25;&quot;);        nvs_close(nvs);        return;    }        nvs_commit(nvs);    nvs_close(nvs);    ESP_LOGI(&quot;WIFI&quot;, &quot;WiFi&#x914D;&#x7F6E;&#x5DF2;&#x4FDD;&#x5B58;&quot;);}void wifi_load_config(wifi_info_config_t *config){    nvs_handle_t nvs;    esp_err_t err = nvs_open(NVS_NAMESPACE, NVS_READONLY, &amp;nvs);    if (err != ESP_OK) {        return;    }        size_t required_size = sizeof(wifi_info_config_t);    err = nvs_get_blob(nvs, NVS_KEY, config, &amp;required_size);    nvs_close(nvs);        if (err != ESP_OK || required_size != sizeof(wifi_info_config_t)) {        memset(config, 0, sizeof(wifi_info_config_t));    }}void wifi_clear_config(void){    // &#x6E05;&#x9664;&#x4FDD;&#x5B58;&#x7684;WiFi&#x914D;&#x7F6E;    nvs_handle_t nvs;    if (nvs_open(NVS_NAMESPACE, NVS_READWRITE, &amp;nvs) == ESP_OK) {        nvs_erase_key(nvs, NVS_KEY);        nvs_commit(nvs);        nvs_close(nvs);        ESP_LOGI(TAG_STA, &quot;&#x5DF2;&#x6E05;&#x9664;&#x4FDD;&#x5B58;&#x7684;WiFi&#x914D;&#x7F6E;&quot;);    }    }void wifi_close_ap(){    if (ap_active &amp;&amp; sta_connected) {        ap_active = false;        esp_wifi_set_mode(WIFI_MODE_STA);        ESP_LOGI(TAG_AP, &quot;AP&#x6A21;&#x5F0F;&#x5DF2;&#x5173;&#x95ED;&quot;);                // &#x9500;&#x6BC1;AP&#x7F51;&#x7EDC;&#x63A5;&#x53E3;        if (ap_netif != NULL) {            esp_netif_destroy(ap_netif);            ap_netif = NULL;        }    }}\n\n//http_server.h#ifndef _HTTP_SERVER_H#define _HTTP_SERVER_H#include &lt;stdint.h&gt;#include &quot;esp_http_server.h&quot;#ifdef __cplusplusextern &quot;C&quot; {#endifhttpd_handle_t start_webserver(void);void stop_webserver(void);#ifdef _cplusplus}#endif#endif\n\n//http_server.c#include &lt;stdio.h&gt;#include &quot;esp_log.h&quot;#include &quot;esp_check.h&quot;#include &quot;http_server.h&quot;#include &quot;cmd_parser.h&quot;#include &quot;wifi_driver.h&quot;#define MIN(x, y) ((x) &lt; (y) ? (x) : (y))#define EXAMPLE_HTTP_QUERY_KEY_MAX_LEN  (64)static const char *TAG = &quot;HTTP&quot;;static httpd_handle_t server = NULL;        //&#x7F6E;&#x7A7A;esp_http_server&#x5B9E;&#x4F8B;&#x7684;&#x53E5;&#x67C4;// &#x7B80;&#x5355;&#x7684;HTML&#x5934;&#x90E8;static const char* html_header =     &quot;&lt;!DOCTYPE html&gt;&quot;    &quot;&lt;html&gt;&lt;head&gt;&quot;    &quot;&lt;meta charset=\\&quot;UTF-8\\&quot;&gt;&quot;    &quot;&lt;meta name=\\&quot;viewport\\&quot; content=\\&quot;width=device-width, initial-scale=1\\&quot;&gt;&quot;    &quot;&lt;title&gt;ESP32&#x63A7;&#x5236;&lt;/title&gt;&quot;    &quot;&lt;style&gt;&quot;    &quot;body { font-family: Arial, sans-serif; max-width: 500px; margin: 0 auto; padding: 20px; }&quot;    &quot;h1 { color: #333; }&quot;    &quot;form { margin: 20px 0; }&quot;    &quot;input[type=text], input[type=password] { width: 100%; padding: 10px; margin: 5px 0; }&quot;    &quot;input[type=submit] { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; }&quot;    &quot;input[type=submit]:hover { background: #45a049; }&quot;    &quot;.status { padding: 10px; background: #f0f0f0; margin: 10px 0; }&quot;    &quot;&lt;/style&gt;&quot;    &quot;&lt;/head&gt;&lt;body&gt;&quot;;// &#x7B80;&#x5355;&#x7684;HTML&#x5C3E;&#x90E8;static const char* html_footer = &quot;&lt;/body&gt;&lt;/html&gt;&quot;;// &#x914D;&#x7F51;&#x9875;&#x9762;static const char* html_form =     &quot;&lt;h1&gt;WiFi&#x914D;&#x7F6E;&lt;/h1&gt;&quot;    &quot;&lt;form action=&apos;/config&apos;&gt;&quot;    &quot;&lt;label for=&apos;ssid&apos;&gt;WiFi&#x540D;&#x79F0;:&lt;/label&gt;&quot;    &quot;&lt;input type=&apos;text&apos; id=&apos;ssid&apos; name=&apos;ssid&apos; required&gt;&lt;br&gt;&quot;    &quot;&lt;label for=&apos;password&apos;&gt;&#x5BC6;&#x7801;:&lt;/label&gt;&quot;    &quot;&lt;input type=&apos;password&apos; id=&apos;password&apos; name=&apos;password&apos;&gt;&lt;br&gt;&quot;    // &quot;&lt;h3&gt;&#x9759;&#x6001;IP (&#x53EF;&#x9009;)&lt;/h3&gt;&quot;    // &quot;&lt;label for=&apos;ip&apos;&gt;IP&#x5730;&#x5740;:&lt;/label&gt;&quot;    // &quot;&lt;input type=&apos;text&apos; id=&apos;ip&apos; name=&apos;ip&apos;&gt;&lt;br&gt;&quot;    // &quot;&lt;label for=&apos;gw&apos;&gt;&#x7F51;&#x5173;:&lt;/label&gt;&quot;    // &quot;&lt;input type=&apos;text&apos; id=&apos;gw&apos; name=&apos;gw&apos;&gt;&lt;br&gt;&quot;    // &quot;&lt;label for=&apos;netmask&apos;&gt;&#x5B50;&#x7F51;&#x63A9;&#x7801;:&lt;/label&gt;&quot;    // &quot;&lt;input type=&apos;text&apos; id=&apos;netmask&apos; name=&apos;netmask&apos;&gt;&lt;br&gt;&quot;    &quot;&lt;input type=&apos;submit&apos; value=&apos;&#x8FDE;&#x63A5;&apos;&gt;&quot;    &quot;&lt;/form&gt;&quot;;// &#x914D;&#x7F6E;&#x6210;&#x529F;&#x9875;&#x9762;static const char* html_success =     &quot;&lt;h1&gt;&#x914D;&#x7F6E;&#x6210;&#x529F;!&lt;/h1&gt;&quot;    &quot;&lt;div class=&apos;status&apos;&gt;&quot;    &quot;&lt;p&gt;&#x6B63;&#x5728;&#x8FDE;&#x63A5;&#x7F51;&#x7EDC;...&lt;/p&gt;&quot;    &quot;&lt;p&gt;&lt;a href=&apos;/device&apos;&gt;&#x4E0B;&#x4E00;&#x6B65;&lt;/a&gt;&lt;/p&gt;&quot;    &quot;&lt;/div&gt;&quot;;//&#x914D;&#x7F6E;&#x9519;&#x8BEF;static const char* html_error =     &quot;&lt;h1&gt;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&lt;/h1&gt;&quot;    &quot;&lt;div class=&apos;status&apos;&gt;&quot;    &quot;&lt;p&gt;&#x8BF7;&#x8F93;&#x5165;&#x6709;&#x6548;&#x7684;WiFi&#x540D;&#x79F0;&lt;/p&gt;&quot;    &quot;&lt;p&gt;&lt;a href=&apos;/&apos;&gt;&#x8FD4;&#x56DE;&#x914D;&#x7F6E;&#x9875;&#x9762;&lt;/a&gt;&lt;/p&gt;&quot;    &quot;&lt;/div&gt;&quot;;// &#x8FDE;&#x63A5;&#x9875;&#x9762;static const char* html_device =     &quot;&lt;h1&gt;&#x8BBE;&#x5907;&#x63A7;&#x5236;&lt;/h1&gt;&quot;    &quot;&lt;div class=&apos;status&apos;&gt;&quot;    &quot;&lt;p&gt;&#x8BBE;&#x5907;&#x5DF2;&#x8FDE;&#x63A5;&lt;/p&gt;&quot;    &quot;&lt;p&gt;IP&#x5730;&#x5740;: %s&lt;/p&gt;&quot;    &quot;&lt;p&gt;&lt;a href=&apos;http://%s/command&apos;&gt;&#x8BBF;&#x95EE;&#x8BBE;&#x5907;&lt;/a&gt;&lt;/p&gt;&quot;    &quot;&lt;/div&gt;&quot;    &quot;&lt;p&gt;&lt;a href=&apos;http://%s/closeap&apos;&gt;&#x5173;&#x95ED;AP&#x6A21;&#x5F0F;&lt;/a&gt;&lt;/p&gt;&quot;;// AP&#x5173;&#x95ED;&#x9875;&#x9762;static const char* html_ap_off =     &quot;&lt;h1&gt;AP&#x6A21;&#x5F0F;&#x5DF2;&#x5173;&#x95ED;&lt;/h1&gt;&quot;    &quot;&lt;div class=&apos;status&apos;&gt;&quot;    &quot;&lt;p&gt;&#x4F7F;&#x7528;ip&#x5730;&#x5740;&lt;a href=http://%s/command&gt;&#x8BBF;&#x95EE;&#x8BBE;&#x5907;&lt;/a&gt;&lt;/p&gt;&quot;    &quot;&lt;/div&gt;&quot;;static const char* html_control =     &quot;&lt;h1 style=&apos;text-align:center&apos;&gt;&#x673A;&#x5668;&#x4EBA;&#x63A7;&#x5236;&lt;/h1&gt;&quot;    &quot;&lt;div style=&apos;margin:20px auto;text-align:center&apos;&gt;&quot;    &quot;&lt;label&gt;&#x901F;&#x5EA6;&#x503C;&#xFF1A;&lt;input type=&apos;number&apos; id=&apos;speed&apos; min=&apos;1&apos; max=&apos;100&apos; value=&apos;70&apos; style=&apos;width:80px&apos;&gt;&lt;/label&gt;&quot;    &quot;&lt;/div&gt;&quot;    &quot;&lt;div style=&apos;display:flex;flex-direction:column;align-items:center;gap:12px&apos;&gt;&quot;    &quot;&lt;button style=&apos;padding:12px 24px;font-size:18px;min-width:60px&apos; onclick=&apos;sendCmd(\\&quot;forward\\&quot;)&apos;&gt;&#x2191;&lt;/button&gt;&quot;    &quot;&lt;div style=&apos;display:flex;gap:8px&apos;&gt;&quot;    &quot;&lt;button style=&apos;padding:12px 24px;font-size:18px;min-width:60px&apos; onclick=&apos;sendCmd(\\&quot;left\\&quot;)&apos;&gt;&#x2190;&lt;/button&gt;&quot;    &quot;&lt;button style=&apos;padding:12px 24px;font-size:18px;min-width:60px&apos; onclick=&apos;sendCmd(\\&quot;right\\&quot;)&apos;&gt;&#x2192;&lt;/button&gt;&quot;    &quot;&lt;/div&gt;&quot;    &quot;&lt;button style=&apos;padding:12px 24px;font-size:18px;min-width:60px&apos; onclick=&apos;sendCmd(\\&quot;backward\\&quot;)&apos;&gt;&#x2193;&lt;/button&gt;&quot;    &quot;&lt;button style=&apos;padding:12px 24px;font-size:18px;background:#ff4444&apos; onclick=&apos;sendCmd(\\&quot;stop\\&quot;)&apos;&gt;&#x7D27;&#x6025;&#x505C;&#x6B62;&lt;/button&gt;&quot;    &quot;&lt;/div&gt;&quot;    &quot;&lt;script&gt;&quot;    &quot;function sendCmd(cmd){&quot;    &quot;  let speed=document.getElementById(&apos;speed&apos;).value;&quot;    &quot;  fetch(`http://%s/command?cmd=${cmd}&amp;speed=${speed}`);&quot;    &quot;}&quot;    &quot;&lt;/script&gt;&quot;;/* URI &#x5904;&#x7406;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77; GET /helloworld &#x8BF7;&#x6C42;&#x65F6;&#x88AB;&#x8C03;&#x7528; *//* An HTTP GET handler */static esp_err_t hello_world_handler(httpd_req_t *req){\tchar *buf;\tsize_t buf_len;\t/* Get header value string length and allocate memory for length + 1,\t * extra byte for null termination */\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Host&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\t/* Copy null terminated value string into buffer */\t\tif (httpd_req_get_hdr_value_str(req, &quot;Host&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Host: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Test-Header-2&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\tif (httpd_req_get_hdr_value_str(req, &quot;Test-Header-2&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Test-Header-2: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Test-Header-1&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\tif (httpd_req_get_hdr_value_str(req, &quot;Test-Header-1&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Test-Header-1: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\t/* Set some custom headers */\t//&#x8BBE;&#x7F6E;&#x81EA;&#x5B9A;&#x4E49;&#x5934;\thttpd_resp_set_hdr(req, &quot;Custom-Header-1&quot;, &quot;Custom-Value-1&quot;);\thttpd_resp_set_hdr(req, &quot;Custom-Header-2&quot;, &quot;Custom-Value-2&quot;);\t/* Send response with custom headers and body set as the\t * string passed in user context*/\tconst char *resp_str = (const char *)req-&gt;user_ctx;\t\t\thttpd_resp_send(req, resp_str, HTTPD_RESP_USE_STRLEN);\t//&#x53D1;&#x9001;resp_str&#x5B57;&#x7B26;&#x4E32;&#x5185;&#x5BB9;\t/* After sending the HTTP response the old HTTP request\t * headers are lost. Check if HTTP request headers can be read now. */\t//&#x54CD;&#x5E94;http&#x65E7;&#x8BF7;&#x6C42;&#x540E;&#x68C0;&#x67E5;\tif (httpd_req_get_hdr_value_len(req, &quot;Host&quot;) == 0)\t{\t\tESP_LOGI(TAG, &quot;Request headers lost&quot;);\t}\treturn ESP_OK;}static const httpd_uri_t hello_world = {    .uri = &quot;/helloworld&quot;,    .method = HTTP_GET,    .handler = hello_world_handler,    .user_ctx = &quot;Hello World!&quot;,};// static esp_err_t get_status_handler(httpd_req_t *req){// \tcommand_params_t get_status_handler;// \tif(command_get_current_command(&amp;get_status_handler)!=0){// \t\thttpd_resp_send_err(req, HTTPD_400_BAD_REQUEST, &quot;Invalid command&quot;);//         return ESP_OK;// \t}// \tchar statusString[100];// \tsprintf(statusString,&quot;Command set: %s, Speed: %d%%, Continuous: %d&quot;,// \t\t\tcmd_strings[get_status_handler.type], get_status_handler.speed, get_status_handler.is_continuous);// \thttpd_resp_send(req, statusString, HTTPD_RESP_USE_STRLEN);// \treturn ESP_OK;// }// static const httpd_uri_t uri_get_status = {//     .uri = &quot;/status&quot;,//     .method = HTTP_GET,//     .handler = get_status_handler,//     .user_ctx = NULL,// };// HTTP&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x51FD;&#x6570;static esp_err_t root_handler(httpd_req_t *req){    char *html_content = NULL;        if (ap_active &amp;&amp; !sta_connected) {        // &#x663E;&#x793A;&#x914D;&#x7F51;&#x9875;&#x9762;        size_t len = strlen(html_header) + strlen(html_form) + strlen(html_footer) + 1;        html_content = malloc(len);        if (html_content) {            snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_form, html_footer);            httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);            free(html_content);            return ESP_OK;        }    } else if (sta_connected) {        // &#x663E;&#x793A;&#x6210;&#x529F;&#x9875;&#x9762;        size_t len = strlen(html_header) + strlen(html_success) + strlen(html_footer) + 1;        html_content = malloc(len);        if (html_content) {            snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_success, html_footer);            httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);            free(html_content);            return ESP_OK;        }    }        // &#x9ED8;&#x8BA4;&#x54CD;&#x5E94;    httpd_resp_send(req, &quot;&#x8BBE;&#x5907;&#x72B6;&#x6001;&#x672A;&#x77E5;&quot;, HTTPD_RESP_USE_STRLEN);    return ESP_OK;}static httpd_uri_t root_uri = {            .uri = &quot;/&quot;,            .method = HTTP_GET,            .handler = root_handler};//&#x914D;&#x7F6E;&#x51FD;&#x6570;static esp_err_t config_handler(httpd_req_t *req){    char query[200];    if (httpd_req_get_url_query_str(req, query, sizeof(query)) != ESP_OK) {        httpd_resp_send(req, &quot;&#x65E0;&#x6548;&#x8BF7;&#x6C42;&quot;, HTTPD_RESP_USE_STRLEN);        return ESP_FAIL;    }        wifi_info_config_t config = {0};        httpd_query_key_value(query, &quot;ssid&quot;, config.ssid, sizeof(config.ssid));    httpd_query_key_value(query, &quot;password&quot;, config.password, sizeof(config.password));        ESP_LOGI(&quot;HTTP&quot;, &quot;&#x6536;&#x5230;&#x914D;&#x7F6E;: SSID=%s, PASSWORD=%s&quot;, config.ssid, config.password);    // &#x4FDD;&#x5B58;&#x914D;&#x7F6E;&#x5230;NVS    wifi_save_config(&amp;config);        // &#x8BBE;&#x7F6E;STA&#x914D;&#x7F6E;    wifi_config_sta(&amp;config);    xSemaphoreTake(wifiStaConnectedHandle, pdTICKS_TO_MS(500));    // &#x663E;&#x793A;&#x6210;&#x529F;&#x9875;&#x9762;    if(sta_connected == true){        size_t len = strlen(html_header) + strlen(html_success) + strlen(html_footer) + 1;        char *html_content = malloc(len);        if (html_content)        {            snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_success, html_footer);            httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);            free(html_content);            return ESP_OK;        }        httpd_resp_send(req, &quot;&#x914D;&#x7F6E;&#x5DF2;&#x4FDD;&#x5B58;&quot;, HTTPD_RESP_USE_STRLEN);    }    else if(sta_connected == false){        wifi_clear_config();        // &#x663E;&#x793A;&#x9519;&#x8BEF;&#x9875;&#x9762;        size_t len = strlen(html_header) + strlen(html_error) + strlen(html_footer) + 1;        char *html_content = malloc(len);        if (html_content) {            snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_error, html_footer);            httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);            free(html_content);            return ESP_OK;        }        httpd_resp_send(req, &quot;&#x914D;&#x7F6E;&#x5DF2;&#x5220;&#x9664;&quot;, HTTPD_RESP_USE_STRLEN);    }        return ESP_OK;}static httpd_uri_t config_uri = {            .uri = &quot;/config&quot;,            .method = HTTP_GET,            .handler = config_handler};//&#x8BBE;&#x5907;&#x63A7;&#x5236;static esp_err_t device_handler(httpd_req_t *req){    char html_device_temp[256];    snprintf(html_device_temp, sizeof(html_device_temp), html_device, sta_ip, sta_ip, sta_ip);    size_t len = strlen(html_header) + strlen(html_device_temp) + strlen(html_footer) + 1;    char *html_content = malloc(len);    if (html_content) {        snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_device_temp, html_footer);        httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);        free(html_content);        return ESP_OK;    }    // &#x91CD;&#x5B9A;&#x5411;&#x56DE;&#x6839;&#x9875;&#x9762;    httpd_resp_set_status(req, &quot;303 See Other&quot;);    httpd_resp_set_hdr(req, &quot;Location&quot;, &quot;/&quot;);    httpd_resp_send(req, NULL, 0);        return ESP_OK;}static httpd_uri_t device_uri = {            .uri = &quot;/device&quot;,            .method = HTTP_GET,            .handler = device_handler};//&#x5173;&#x95ED;apstatic esp_err_t closeap_handler(httpd_req_t *req){    wifi_close_ap();        // &#x663E;&#x793A;AP&#x5173;&#x95ED;&#x9875;&#x9762;    char html_ap_off_temp[256];    snprintf(html_ap_off_temp, sizeof(html_ap_off_temp), html_ap_off, sta_ip);        size_t len = strlen(html_header) + strlen(html_ap_off_temp) + strlen(html_footer) + 1;    char *html_content = malloc(len);    if (html_content) {        snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_ap_off_temp, html_footer);        httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);        free(html_content);        return ESP_OK;    }        httpd_resp_send(req, &quot;AP&#x6A21;&#x5F0F;&#x5DF2;&#x5173;&#x95ED;&quot;, HTTPD_RESP_USE_STRLEN);    return ESP_OK;}static httpd_uri_t closeap_uri = {            .uri = &quot;/closeap&quot;,            .method = HTTP_GET,            .handler = closeap_handler};// favicon.ico &#x5904;&#x7406;&#x51FD;&#x6570;static esp_err_t favicon_handler(httpd_req_t *req){    // &#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x7A7A;&#x54CD;&#x5E94;    httpd_resp_set_status(req, &quot;204 No Content&quot;);    httpd_resp_send(req, NULL, 0);    return ESP_OK;}// &#x6DFB;&#x52A0; favicon.ico &#x5904;&#x7406;static httpd_uri_t favicon_uri = {            .uri = &quot;/favicon.ico&quot;,            .method = HTTP_GET,            .handler = favicon_handler};//&#x6307;&#x4EE4;&#x89E3;&#x6790;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6362;&#x6210;&#x4F60;&#x9700;&#x8981;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6307;&#x4EE4;&#x89E3;&#x6790;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;static esp_err_t set_cmd_handler(httpd_req_t *req){    char html_control_temp[1024];    snprintf(html_control_temp, sizeof(html_control_temp), html_control, sta_ip);    size_t len = strlen(html_header) + strlen(html_control_temp) + strlen(html_footer) + 1;    char *html_content = malloc(len);    if (html_content) {        snprintf(html_content, len, &quot;%s%s%s&quot;, html_header, html_control_temp, html_footer);        httpd_resp_send(req, html_content, HTTPD_RESP_USE_STRLEN);        free(html_content);    }\tif(command_parse_http_get(req-&gt;uri)!=0){\t\thttpd_resp_send_err(req, HTTPD_400_BAD_REQUEST, &quot;Invalid command&quot;);        return ESP_OK;\t}\thttpd_resp_send(req, &quot;OK&quot;, HTTPD_RESP_USE_STRLEN);    return ESP_OK;}static const httpd_uri_t cmdControl_uri = {    .uri = &quot;/command&quot;,    .method = HTTP_GET,    .handler = set_cmd_handler,    .user_ctx = NULL,};httpd_handle_t start_webserver(void){    //&#x751F;&#x6210;&#x9ED8;&#x8BA4;http&#x914D;&#x7F6E;&#x53C2;&#x6570;    httpd_config_t http_config = HTTPD_DEFAULT_CONFIG();    http_config.max_uri_handlers = 8;       //&#x6700;&#x5927;uri&#x6570;    if (httpd_start(&amp;server, &amp;http_config) == ESP_OK) {        /* &#x6CE8;&#x518C; URI &#x5904;&#x7406;&#x7A0B;&#x5E8F; */        // httpd_register_uri_handler(server, &amp;uri_get_status);        httpd_register_uri_handler(server, &amp;cmdControl_uri);        httpd_register_uri_handler(server, &amp;hello_world);        httpd_register_uri_handler(server, &amp;root_uri);        httpd_register_uri_handler(server, &amp;config_uri);        httpd_register_uri_handler(server, &amp;device_uri);        httpd_register_uri_handler(server, &amp;closeap_uri);        httpd_register_uri_handler(server, &amp;favicon_uri);        ESP_LOGI(TAG, &quot;Success starting server!&quot;);        return server;            }    /* &#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x5931;&#x8D25;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x53E5;&#x67C4;&#x662F; NULL */    ESP_LOGI(TAG, &quot;Error starting server!&quot;);    return NULL;}void stop_webserver(void){    if (server) {        httpd_stop(server);        server = NULL;        ESP_LOGI(TAG, &quot;server stop&quot;);    }}\n&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x8FD9;&#x5757;&#x7B14;&#x8005;&#x53EA;&#x662F;&#x7167;&#x732B;&#x753B;&#x864E;&#x52C9;&#x5F3A;&#x80FD;&#x7528;\n\nHTTP_ServerHTTP &#x5DE5;&#x4F5C;&#x539F;&#x7406;HTTP &#x534F;&#x8BAE;&#x5DE5;&#x4F5C;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;-&#x670D;&#x52A1;&#x7AEF;&#x67B6;&#x6784;&#x4E0A;&#x3002;\nHTTP &#x5DE5;&#x4F5C;&#x8FC7;&#x7A0B;&#x901A;&#x5E38;&#x5982;&#x4E0B;&#xFF1A;\n\n&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#xFF1A;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x5982;&#x6D4F;&#x89C8;&#x5668;&#xFF09;&#x8F93;&#x5165; URL&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x8D77;&#x4E00;&#x4E2A; HTTP &#x8BF7;&#x6C42;&#x3002;\n&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x7C7B;&#x578B;&#xFF08;&#x5982;GET&#x3001;POST&#x7B49;&#xFF09;&#x548C;&#x8BF7;&#x6C42;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x5904;&#x7406;&#x3002;\n&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x5305;&#x88C5;&#x6210;HTTP&#x54CD;&#x5E94;&#x6D88;&#x606F;&#xFF0C;&#x53D1;&#x9001;&#x56DE;&#x5BA2;&#x6237;&#x7AEF;&#x3002;4.&#x5BA2;&#x6237;&#x7AEF;&#x6E32;&#x67D3;&#x9875;&#x9762;&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#x5230;&#x54CD;&#x5E94;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#xFF08;&#x5982;HTML&#x3001;&#x56FE;&#x7247;&#x7B49;&#xFF09;&#x6E32;&#x67D3;&#x9875;&#x9762;&#xFF0C;&#x5C55;&#x793A;&#x7ED9;&#x7528;&#x6237;&#x3002;Web &#x670D;&#x52A1;&#x5668;&#x6709;&#xFF1A;Nginx &#x670D;&#x52A1;&#x5668;&#xFF0C;Apache &#x670D;&#x52A1;&#x5668;&#xFF0C;IIS &#x670D;&#x52A1;&#x5668;&#xFF08;Internet Information Services&#xFF09;&#x7B49;&#x3002;\n\nHTTP &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x53F7;&#x4E3A; 80&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x6539;&#x4E3A; 8080 &#x6216;&#x8005;&#x5176;&#x4ED6;&#x7AEF;&#x53E3;&#x3002;\nHTTP &#x4E09;&#x70B9;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\n\nHTTP &#x662F;&#x65E0;&#x8FDE;&#x63A5;&#xFF1A;&#x65E0;&#x8FDE;&#x63A5;&#x7684;&#x542B;&#x4E49;&#x662F;&#x9650;&#x5236;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;&#x53EA;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x5B8C;&#x5BA2;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7684;&#x5E94;&#x7B54;&#x540E;&#xFF0C;&#x5373;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x3002;\n\nHTTP &#x662F;&#x5A92;&#x4F53;&#x72EC;&#x7ACB;&#x7684;&#xFF1A;&#x8FD9;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x53EA;&#x8981;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x5185;&#x5BB9;&#xFF0C;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;HTTP&#x53D1;&#x9001;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4EE5;&#x53CA;&#x670D;&#x52A1;&#x5668;&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x9002;&#x5408;&#x7684; MIME-type &#x5185;&#x5BB9;&#x7C7B;&#x578B;&#x3002;\n\nHTTP &#x662F;&#x65E0;&#x72B6;&#x6001;&#xFF1A;HTTP &#x534F;&#x8BAE;&#x662F;&#x65E0;&#x72B6;&#x6001;&#x534F;&#x8BAE;&#xFF0C;&#x65E0;&#x72B6;&#x6001;&#x662F;&#x6307;&#x534F;&#x8BAE;&#x5BF9;&#x4E8E;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x6CA1;&#x6709;&#x8BB0;&#x5FC6;&#x80FD;&#x529B;&#xFF0C;&#x7F3A;&#x5C11;&#x72B6;&#x6001;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x540E;&#x7EED;&#x5904;&#x7406;&#x9700;&#x8981;&#x524D;&#x9762;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5219;&#x5B83;&#x5FC5;&#x987B;&#x91CD;&#x4F20;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;&#x4F20;&#x9001;&#x7684;&#x6570;&#x636E;&#x91CF;&#x589E;&#x5927;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x9700;&#x8981;&#x5148;&#x524D;&#x4FE1;&#x606F;&#x65F6;&#x5B83;&#x7684;&#x5E94;&#x7B54;&#x5C31;&#x8F83;&#x5FEB;&#x3002;\n\n&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x6458;&#x81EA;&#x83DC;&#x9E1F;&#x6559;&#x7A0B;\n\n\n\n&#x53C2;&#x6570;&#x8BBE;&#x7F6E;\n&#x542F;&#x52A8;http&#x670D;&#x52A1;&#x5668;httpd_start(httpd_handle_t *handle, const httpd_config_t *config)  httpd_start(&amp;server, &amp;http_config)\nhttpd_config_t http_config = HTTPD_DEFAULT_CONFIG();    //&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;\nhttp_config.max_uri_handlers = 8;       //&#x6700;&#x5927;uri&#x6570;\nstatic httpd_handle_t server = NULL;    //&#x7F6E;&#x7A7A;esp_http_server&#x5B9E;&#x4F8B;&#x7684;&#x53E5;&#x67C4;&#xFF0C;&#x9632;&#x6B62;&#x91CD;&#x590D;&#x542F;&#x52A8;HTTP&#x670D;&#x52A1;\n\n\n&#x5F53;http&#x670D;&#x52A1;&#x542F;&#x52A8;&#x6210;&#x529F;&#x540E;&#x9700;&#x8981;&#x6CE8;&#x518C;uri&#x5904;&#x7406;&#x51FD;&#x6570;httpd_register_uri_handler(httpd_handle_t handle,const httpd_uri_t *uri_handler) httpd_register_uri_handler(server, &amp;hello_world);\nstatic httpd_handle_t server = NULL;    //&#x7F6E;&#x7A7A;esp_http_server&#x5B9E;&#x4F8B;&#x7684;&#x53E5;&#x67C4;&#xFF0C;&#x9632;&#x6B62;&#x91CD;&#x590D;&#x542F;&#x52A8;HTTP&#x670D;&#x52A1;\n&amp;hello_world &#x6307;&#x5411;uri&#x5904;&#x7406;&#x51FD;&#x6570;&#x4E2D;&#x9700;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x7ED3;&#x6784;&#x4F53;&#xFF1A;     static const httpd_uri_t hello_world = {    .uri = &quot;/helloworld&quot;,           //uri    .method = HTTP_GET,             //&#x65B9;&#x6CD5;    .handler = hello_world_handler, //&#x4E0A;&#x4E0B;&#x6587;&#x6570;&#x636E;    .user_ctx = &quot;Hello World!&quot;,     //&#x7528;&#x6237;&#x7684;&#x4E0A;&#x4E0B;&#x6587;};\n\n\n&#x505C;&#x6B62;http&#x670D;&#x52A1;&#x5668;httpd_stop(httpd_handle_t handle)  httpd_stop(server);\nstatic httpd_handle_t server = NULL;    //&#x7F6E;&#x7A7A;esp_http_server&#x5B9E;&#x4F8B;&#x7684;&#x53E5;&#x67C4;&#xFF0C;&#x9632;&#x6B62;&#x91CD;&#x590D;&#x542F;&#x52A8;HTTP&#x670D;&#x52A1;\n\n\n\n&#x5B9E;&#x6218;&#x4EE5;&#x8BF7;&#x6C42;hello world&#x4E3A;&#x4F8B;\n//http_server.h#ifndef _HTTP_SERVER_H#define _HTTP_SERVER_H#include &lt;stdint.h&gt;#include &quot;esp_http_server.h&quot;#ifdef __cplusplusextern &quot;C&quot; {#endifhttpd_handle_t start_webserver(void);void stop_webserver(void);#ifdef _cplusplus}#endif#endif\n//http_server.c#include &lt;stdio.h&gt;#include &quot;esp_log.h&quot;#include &quot;esp_check.h&quot;#include &quot;http_server.h&quot;#include &quot;cmd_parser.h&quot;#include &quot;wifi_driver.h&quot;#define MIN(x, y) ((x) &lt; (y) ? (x) : (y))#define EXAMPLE_HTTP_QUERY_KEY_MAX_LEN  (64)static const char *TAG = &quot;HTTP&quot;;static httpd_handle_t server = NULL;        //&#x7F6E;&#x7A7A;esp_http_server&#x5B9E;&#x4F8B;&#x7684;&#x53E5;&#x67C4;/* URI &#x5904;&#x7406;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77; GET /helloworld &#x8BF7;&#x6C42;&#x65F6;&#x88AB;&#x8C03;&#x7528; *//* An HTTP GET handler */static esp_err_t hello_world_handler(httpd_req_t *req){\tchar *buf;\tsize_t buf_len;\t/* Get header value string length and allocate memory for length + 1,\t * extra byte for null termination */\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Host&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\t/* Copy null terminated value string into buffer */\t\tif (httpd_req_get_hdr_value_str(req, &quot;Host&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Host: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Test-Header-2&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\tif (httpd_req_get_hdr_value_str(req, &quot;Test-Header-2&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Test-Header-2: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\tbuf_len = httpd_req_get_hdr_value_len(req, &quot;Test-Header-1&quot;) + 1;\tif (buf_len &gt; 1)\t{\t\tbuf = malloc(buf_len);\t\tESP_RETURN_ON_FALSE(buf, ESP_ERR_NO_MEM, TAG, &quot;buffer alloc failed&quot;);\t\tif (httpd_req_get_hdr_value_str(req, &quot;Test-Header-1&quot;, buf, buf_len) == ESP_OK)\t\t{\t\t\tESP_LOGI(TAG, &quot;Found header =&gt; Test-Header-1: %s&quot;, buf);\t\t}\t\tfree(buf);\t}\t/* Set some custom headers */\t//&#x8BBE;&#x7F6E;&#x81EA;&#x5B9A;&#x4E49;&#x5934;\thttpd_resp_set_hdr(req, &quot;Custom-Header-1&quot;, &quot;Custom-Value-1&quot;);\thttpd_resp_set_hdr(req, &quot;Custom-Header-2&quot;, &quot;Custom-Value-2&quot;);\t/* Send response with custom headers and body set as the\t * string passed in user context*/\tconst char *resp_str = (const char *)req-&gt;user_ctx;\t\t\thttpd_resp_send(req, resp_str, HTTPD_RESP_USE_STRLEN);\t//&#x53D1;&#x9001;resp_str&#x5B57;&#x7B26;&#x4E32;&#x5185;&#x5BB9;\t/* After sending the HTTP response the old HTTP request\t * headers are lost. Check if HTTP request headers can be read now. */\t//&#x54CD;&#x5E94;http&#x65E7;&#x8BF7;&#x6C42;&#x540E;&#x68C0;&#x67E5;\tif (httpd_req_get_hdr_value_len(req, &quot;Host&quot;) == 0)\t{\t\tESP_LOGI(TAG, &quot;Request headers lost&quot;);\t}\treturn ESP_OK;}//uri&#x914D;&#x7F6E;&#x4FE1;&#x606F;static const httpd_uri_t hello_world = {    .uri = &quot;/helloworld&quot;,    .method = HTTP_GET,    .handler = hello_world_handler,    .user_ctx = &quot;Hello World!&quot;,};//&#x542F;&#x52A8;http&#x670D;&#x52A1;httpd_handle_t start_webserver(void){    //&#x751F;&#x6210;&#x9ED8;&#x8BA4;http&#x914D;&#x7F6E;&#x53C2;&#x6570;    httpd_config_t http_config = HTTPD_DEFAULT_CONFIG();    http_config.max_uri_handlers = 8;       //&#x6700;&#x5927;uri&#x6570;    if (httpd_start(&amp;server, &amp;http_config) == ESP_OK) {        /* &#x6CE8;&#x518C; URI &#x5904;&#x7406;&#x7A0B;&#x5E8F; */        httpd_register_uri_handler(server, &amp;hello_world);        ESP_LOGI(TAG, &quot;Success starting server!&quot;);        return server;            }    /* &#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x5931;&#x8D25;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x53E5;&#x67C4;&#x662F; NULL */    ESP_LOGI(TAG, &quot;Error starting server!&quot;);    return NULL;}//&#x505C;&#x6B62;http&#x670D;&#x52A1;void stop_webserver(void){    if (server) {        httpd_stop(server);        server = NULL;        ESP_LOGI(TAG, &quot;server stop&quot;);    }}","categories":["ESP32"],"tags":["笔记","ESP32"]},{"title":"lua学习笔记","url":"/2025/06/22/lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","content":"&#x524D;&#x8A00;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BB0;&#x5F55;&#x5B66;&#x4E60;lua&#x4E2D;&#x4E00;&#x4E9B;&#x6613;&#x9519;&#xFF0C;&#x6613;&#x6DF7;&#x6DC6;&#x7684;&#x70B9;\n\n&#x903B;&#x8F91;&#x8FD0;&#x7B97;&#x7B26;and&#x5F53;&#x4E24;&#x4E2A;&#x503C;&#xFF08;&#x65E0;&#x8BBA;&#x662F;&#x6570;&#x503C;&#x8FD8;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF09;vala,valb&#x8FDB;&#x884C;and&#x8FD0;&#x7B97;&#x65F6;&#x8FD0;&#x7B97;&#x5F0F;&#xFF1A;vala and valb\n\nvala valb&#x90FD;&#x4E3A;&#x771F;&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x4E3A;nil&#x6216;false&#xFF09;&#x8FD4;&#x56DE;valb\nvala valb&#x6709;&#x4E00;&#x4E2A;&#x4E3A;nil&#x6216;false&#xFF0C;&#x8FD4;&#x56DE;vala&#x793A;&#x4F8B;&#x5F53;&#x6709;&#x4E09;&#x4E2A;&#x53D8;&#x91CF;local a = falselocal b = 0local c = 1\n&#x5206;&#x522B;&#x8FDB;&#x884C;and&#x8FD0;&#x7B97;\n\n\n&#x51FD;&#x6570;\n&#x8F93;&#x51FA;\n\n\n\nprint(b and c)\n1\n\n\nprint(a and b)\nfalse\n\n\nprint(b&gt;-1)\ntrue\n\n\nprint(b &gt; -1 and &#x2018;yes&#x2019;)\nyes\n\n\n\n\nor&#x5F53;&#x4E24;&#x4E2A;&#x503C;&#xFF08;&#x65E0;&#x8BBA;&#x662F;&#x6570;&#x503C;&#x8FD8;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF09;vala,valb&#x8FDB;&#x884C;or&#x8FD0;&#x7B97;&#x65F6;&#x8FD0;&#x7B97;&#x5F0F;&#xFF1A;vala or valb\n\nvala valb&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x4E3A;nil&#x6216;false&#xFF0C;&#x8FD4;&#x56DE;&#x4E0D;&#x4E3A;nil&#x6216;false&#x7684;&#x771F;&#x503C;\nvala valb&#x90FD;&#x4E3A;&#x771F;&#x8FD4;&#x56DE;vala\nvala valb&#x90FD;&#x4E3A;&#x5047;&#x8FD4;&#x56DE;valb&#x793A;&#x4F8B;&#x5F53;&#x6709;&#x56DB;&#x4E2A;&#x53D8;&#x91CF;local a = falselocal b = nillocal c = 0local d = 1\n&#x5206;&#x522B;&#x8FDB;&#x884C;or&#x8FD0;&#x7B97;\n\n\n&#x51FD;&#x6570;\n&#x8F93;&#x51FA;\n\n\n\nprint(a or c) print(b or c)\n0\n\n\nprint(d or a) print(d or b)\n1\n\n\nprint(c or d)\n0\n\n\nprint(b or c)\n1\n\n\nprint(a or b)\nnil\n\n\nprint(b or a)\nfalse\n\n\n\n\n&#x77ED;&#x8DEF;&#x6C42;&#x503C;&#x5F62;&#x5982;print(b &gt; 10 and &quot;yes&quot; or &quot;no&quot;)&#x5047;&#x8BBE;b&gt;10&#x662F;false&#xFF0C;&#x5148;&#x548C;&quot;yes&quot;&#x8FDB;&#x884C;&#x4E0E;&#x8FD0;&#x7B97;&#xFF0C;&#x5F97;false;&#x518D;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x5F97;&quot;no&quot;&#x5047;&#x8BBE;b&gt;10&#x662F;true&#xFF0C; &#x5148;&#x548C;&quot;yes&quot;&#x8FDB;&#x884C;&#x4E0E;&#x8FD0;&#x7B97;&#xFF0C;&#x5F97;&quot;yes&quot;;&#x518D;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x5F97;&quot;yes&quot;&#x793A;&#x4F8B;\nlocal b = 0print(b &gt; 10 and &quot;yes&quot; or &quot;no&quot;)print(b &gt; -1 and &apos;yes&apos; or &apos;no&apos;)&#x8F93;&#x51FA;noyes","categories":["lua"],"tags":["lua"]},{"title":"stm32h750添加QRencode库，以zabr和quirc为例","url":"/2025/08/13/stm32h750%E6%B7%BB%E5%8A%A0QRencode%E5%BA%93%EF%BC%8C%E4%BB%A5zabr%E5%92%8Cquirc%E4%B8%BA%E4%BE%8B/","content":"&#x524D;&#x8A00;&#x5F00;&#x53D1;&#x677F; STM32H750VET6&#x5148;&#x8BF4;&#x7ED3;&#x8BBA;&#xFF1A;zbar 0.10&#x7F16;&#x8BD1;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x592A;&#x5927;&#x4E14;&#x6211;&#x7684;boot&#x8DF3;&#x8F6C;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x65E0;&#x6CD5;&#x5728;&#x5F00;&#x53D1;&#x677F;&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x5728;pc&#x4E0A;&#x8FD0;&#x884C;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x9664;&#x4E86;&#x4E0D;&#x80FD;&#x8BC6;&#x522B;&#x6761;&#x5F62;&#x7801;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x4E8E;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x66F4;&#x8F7B;&#x91CF;&#x7684;quirc&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x80FD;&#x5728;&#x5F00;&#x53D1;&#x677F;&#x4E0A;&#x5B9E;&#x65F6;&#x8BC6;&#x522B;QR&#x7801;&#x4E86;&#x1F606;&#x6240;&#x4EE5;&#x540E;&#x9762;&#x4E3B;&#x8981;&#x662F;&#x4ECB;&#x7ECD;quric\n\n\n&#x4E4B;&#x524D;&#x5728; stm32h750 &#x4E0A;&#x5B9E;&#x73B0;DCMI&#x9A71;&#x52A8;&#x6444;&#x50CF;&#x5934;&#x540E;&#xFF0C;&#x60F3;&#x52A0;&#x5165;&#x4E8C;&#x7EF4;&#x7801;&#x89E3;&#x7801;&#x529F;&#x80FD;&#x3002;&#x672C;&#x6765;&#x662F;&#x79FB;&#x690D;zbar&#xFF0C;&#x4E2D;&#x95F4;&#x51E0;&#x756A;&#x6298;&#x78E8;&#x5728;&#x732B;&#x54AA;&#x5927;&#x4F6C;&#x7684;&#x5D4C;&#x5165;&#x5F0F;&#x673A;&#x5668;&#x89C6;&#x89C9;&#x5E93;&#x4E2D;&#x53D1;&#x73B0;&#x4E86;zbar&#x7684;&#x5B8C;&#x6574;&#x79FB;&#x690D;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;&#x4E4B;&#x524D;&#x975E;&#x6B63;&#x5F0F;&#x7801;&#x519C;&#x6709;&#x5173;&#x4E8E;&#x5728;F4&#x5E73;&#x53F0;&#x7684;&#x79FB;&#x690D;&#xFF0C;&#x5728;&#x6B64;&#x611F;&#x8C22;&#x4E24;&#x4F4D;&#x5927;&#x4F6C;&#x3002;\nquirc&#x79FB;&#x690D;&#x94FE;&#x63A5; &#xFF1A;https://github.com/dlbeer/quirc&#x4E0B;&#x8F7D;&#x540E;&#x6253;&#x5F00;quirc&#x6587;&#x4EF6;&#x5939;&#xFF0C; lib &#x6587;&#x4EF6;&#x5939;&#x662F;&#x4E8C;&#x7EF4;&#x7801;&#x8BC6;&#x522B;&#x7684;&#x6838;&#x5FC3;&#x6E90;&#x7801;&#xFF0C;&#x79FB;&#x690D;&#x65F6;&#x52A1;&#x5FC5; &#x5168;&#x62F7;&#x8D1D;&#x3002;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x5939;&#x662F;&#x5728;&#x4E0D;&#x540C;&#x5E73;&#x53F0;&#x7684;&#x793A;&#x4F8B;&#x548C;&#x6D4B;&#x8BD5;&#x6837;&#x4F8B;&#xFF0C;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x662F;&#x53C2;&#x8003; tests/qrtest.c\n&#x53EF;&#x4EE5;&#x8BA9;AI&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x6539;&#x6210;&#x4F60;&#x7684;&#x5E73;&#x53F0;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x53C2;&#x8003;:QR_img.h &#x91CC;&#x9762;&#x662F;&#x4EE5;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;&#x7684;qr&#x7801;&#x56FE;&#x7247;&#xFF0C;RGB565&#x683C;&#x5F0F;&#xFF0C;quirc.h quirc&#x89E3;&#x7801;&#x7684;&#x6838;&#x5FC3;&#x5934;&#x6587;&#x4EF6;\n#include &quot;QR_img.h&quot;#include &quot;quirc.h&quot;#include &quot;quirctest.h&quot;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;// RGB565&#x8F6C;&#x7070;&#x5EA6;&#x56FE;&#x51FD;&#x6570;unsigned char *rgb565_to_grayscale(const unsigned char *rgb565, int width,                                   int height) {    size_t gray_size = width * height;    unsigned char *gray = (unsigned char *)malloc(gray_size);    if (!gray)        return NULL;    for (int i = 0; i &lt; width * height; i++) {        // &#x4ECE;RGB565&#x63D0;&#x53D6;RGB&#x5206;&#x91CF;        unsigned short pixel =            ((unsigned short)rgb565[i * 2] &lt;&lt; 8) | rgb565[i * 2 + 1];        unsigned char r = (pixel &gt;&gt; 11) &amp; 0x1F;        unsigned char g = (pixel &gt;&gt; 5) &amp; 0x3F;        unsigned char b = pixel &amp; 0x1F;        // &#x8F6C;&#x6362;&#x4E3A;8&#x4F4D;&#x503C;        r = (r * 255) / 31;        g = (g * 255) / 63;        b = (b * 255) / 31;        // &#x8BA1;&#x7B97;&#x7070;&#x5EA6;&#x503C; (&#x6807;&#x51C6;&#x516C;&#x5F0F;: Y = 0.299R + 0.587G + 0.114B)        gray[i] = (unsigned char)((r * 299 + g * 587 + b * 114) / 1000);    }    return gray;}int quirctest(const unsigned char *image_data, int width, int height) {    // &#x8C03;&#x7528;&#x7070;&#x5EA6;&#x8F6C;&#x6362;&#x51FD;&#x6570;    unsigned char *gray_image = rgb565_to_grayscale(image_data, width, height);    if (!gray_image) {        printf(&quot;Failed to convert image to grayscale.\\n&quot;);        return 1;    }    // &#x521D;&#x59CB;&#x5316;&#x89E3;&#x7801;&#x5668;    struct quirc *qr = quirc_new();    if (!qr) {        printf(&quot;Failed to initialize QR decoder.\\n&quot;);        free(gray_image);        return 1;    }    // &#x5C06;&#x7070;&#x5EA6;&#x56FE;&#x50CF;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5230;&#x89E3;&#x7801;&#x5668;    if (quirc_resize(qr, width, height) &lt; 0) {        printf(&quot;Failed to resize QR decoder.\\n&quot;);        quirc_destroy(qr);        free(gray_image);        return 1;    }    unsigned char *qr_image = quirc_begin(qr, NULL, NULL);    memcpy(qr_image, gray_image, width * height);    quirc_end(qr);    // &#x8BC6;&#x522B;&#x548C;&#x89E3;&#x7801;&#x4E8C;&#x7EF4;&#x7801;    int count = quirc_count(qr);    if (count &lt;= 0) {        printf(&quot;No QR codes found.\\n&quot;);    } else {        printf(&quot;Found %d QR code(s).\\n&quot;, count);        for (int i = 0; i &lt; count; i++) {            struct quirc_code code;            struct quirc_data data;            quirc_extract(qr, i, &amp;code);            quirc_decode_error_t err = quirc_decode(&amp;code, &amp;data);            if (err == QUIRC_ERROR_DATA_ECC) {                quirc_flip(&amp;code);                err = quirc_decode(&amp;code, &amp;data);            }            if (err) {                printf(&quot;  Decode failed: %s\\n&quot;, quirc_strerror(err));            } else {                printf(&quot;  Decoded data: %s\\n&quot;, data.payload);            }        }    }    // &#x91CA;&#x653E;&#x89E3;&#x7801;&#x5668;    quirc_destroy(qr);    printf(&quot;QR code decoding completed.\\n&quot;);    // &#x91CA;&#x653E;&#x5185;&#x5B58;    free(gray_image);    return 0;}int main() {    // &#x5047;&#x8BBE;&#x56FE;&#x50CF;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x4E3A;150x150    int width = 150;    int height = 150;    // &#x8C03;&#x7528;quirctest&#x51FD;&#x6570;    return quirctest(gImage_QR_img, width, height);}\n\n&#x76EE;&#x524D;&#x6CA1;&#x6709;&#x8BD5;&#x8FC7;&#x4E2D;&#x6587;&#x89E3;&#x7801;\nzbar&#x79FB;&#x690D;&#x6211;&#x6700;&#x5F00;&#x59CB;&#x79FB;&#x690D;zbar&#x5230;pc&#x60F3;&#x76F4;&#x63A5;&#x7528;&#x8BFB;&#x6570;&#x7EC4;&#x56FE;&#x50CF;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6D4B;&#x8BD5;&#x89E3;&#x7801;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x548C;&#x6211;&#x4E00;&#x6837;&#x662F;win&#x4E0B;&#x7684;mingw&#xFF0C;&#x4E00;&#x5B9A;&#x4F1A;&#x5728; iconv &#x94FE;&#x63A5;&#x5E93;&#x4E0A;&#x5361;&#x4F4F;&#x90A3;&#x4E48;iconv&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;&#x8BF7;bing&#x4E00;&#x4E0B;&#x56E0;&#x4E3A;&#x7F51;&#x4E0A;&#x7684;incov&#x94FE;&#x63A5;&#x5E93;&#x5728;mingw&#x4E0B;&#x90FD;&#x4E0D;&#x80FD;&#x7528;&#xFF0C;&#x8981;&#x4E48;&#x6362;&#x5DE5;&#x5177;&#x94FE;&#xFF0C;&#x8981;&#x4E48;&#x5C31;&#x81EA;&#x5DF1;&#x60F3;&#x529E;&#x6CD5;&#x4E0D;&#x4F7F;&#x7528;incov&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x624B;&#x52A8;&#x7F16;&#x7801;&#x800C;&#x4E0D;&#x4F7F;&#x7528;&#x5E93;\n&#x5F00;&#x59CB;&#x79FB;&#x690D;&#x7F51;&#x4E0A;&#x627E;&#x4E00;&#x4EFD;zbar0.10&#x7248;&#x672C;&#x7684;&#xFF0C;&#x7528;&#x4E8E;&#x5D4C;&#x5165;&#x5F0F;&#x7684;&#x57FA;&#x672C;&#x4E0A;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x6B64;&#x7248;&#x79FB;&#x690D;&#x7684;&#x6253;&#x5F00;&#x5176;&#x4E2D;&#x7684; zbar &#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x5F00;&#x5934;&#x6211;&#x63A8;&#x8350;&#x7684;&#x4E24;&#x4F4D;&#x5927;&#x4F6C;&#x7684;&#x8FDB;&#x884C;&#x79FB;&#x690D;&#x548C;&#x88C1;&#x526A;&#xFF0C;&#x5176;&#x4E2D;&#x6700;&#x91CD;&#x8981;&#x7684; config.h &#x6587;&#x4EF6;&#xFF0C;&#x56E0;&#x4E3A;&#x9664;&#x4E86;linux&#x4E0B;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;autoconf&#x751F;&#x6210;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x4ED6;&#x5E73;&#x53F0;&#x5C31;&#x53EA;&#x80FD;&#x62F7;&#x8D1D;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x8FD9;&#x4E24;&#x4F4D;&#x5927;&#x4F6C;&#x7684;&#x6587;&#x7AE0;&#x548C;&#x6E90;&#x7801;&#x4E2D;&#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x90E8;&#x5206;&#xFF0C; &#x8FD8;&#x6709; include/zbar.h &#x4E5F;&#x8981;&#x6DFB;&#x52A0;&#x8FDB;&#x6765;\n&#x4FEE;&#x6539;&#x6E90;&#x7801;&#x505A;&#x5B8C;&#x524D;&#x9762;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x624B;&#x52A8;&#x7F16;&#x7801;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x63A8;&#x8350;&#x732B;&#x54AA;&#x5927;&#x4F6C;&#x7684;zbar&#x79FB;&#x690D;&#xFF0C;&#x4F60;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;copy&#x3002;&#x4F46;&#x662F;&#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E9B;&#x5B8F;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x4E3B;&#x8981;&#x662F;malloc&#x7B49;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x90FD;&#x968F;&#x4FBF;&#xFF0C;&#x6211;&#x662F;&#x6539;&#x6210;&#x4E86;&#x6807;&#x51C6;c&#x7684;&#x540D;&#x79F0;\n&#x6211;&#x5728;pc&#x4E0A;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;QR&#x4F46;&#x662F;&#x4E0D;&#x80FD;&#x8BC6;&#x522B;code128&#x7B49;&#x6761;&#x7801;&#xFF0C;&#x6211;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48;&#x3002;&#x4EA4;&#x53C9;&#x7F16;&#x8BD1;&#x540E;&#x80FD;&#x5360;&#x7528;&#x8FD1;80kb&#x7684;flash&#xFF0C;h750&#x7247;&#x5185;&#x53EA;&#x6709;128kb&#xFF0C;&#x7247;&#x5916;&#x8FD0;&#x884C;&#x53C8;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x6362;&#x6210;quirc&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x53CD;&#x6B63;&#x53EA;&#x8BC6;&#x522B;QR&#x7801;\n&#x4FEE;&#x6539;&#x7684;&#x6587;&#x4EF6;&#x4E3B;&#x8981;&#x662F;&#x96C6;&#x4E2D;&#x5728; qrcode/qrdectxt.c &#xFF0C;&#x4E0D;&#x518D;&#x4F7F;&#x7528;iconv&#x6765;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x4E4B;&#x95F4;&#x8F6C;&#x6362;&#xFF0C;&#x800C;&#x662F;&#x624B;&#x52A8;&#x6307;&#x5B9A;unicode&#x8F6C;gb2312&#x5177;&#x4F53;&#x4FEE;&#x6539;&#x5728;&#x732B;&#x54AA;&#x5927;&#x4F6C;&#x7684;&#x5E93;&#x4E2D;\n&#x5B8C;\n","categories":["STM32"],"tags":["STM32","QRencode"]},{"title":"嵌入式boot开发（三）","url":"/2025/11/08/%E5%B5%8C%E5%85%A5%E5%BC%8Fboot%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89/","content":"&#x524D;&#x8A00;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5D4C;&#x5165;&#x5F0F;boot&#x5F00;&#x53D1;&#xFF08;&#x4E8C;&#xFF09;&#x4E2D;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;boot&#x72B6;&#x6001;&#x673A;&#x5E76;&#x5BF9;&#x4E00;&#x4E9B;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x8FD9;&#x4E2A;&#x7AE0;&#x8282;&#x5C31;&#x6765;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x4E0A;&#x4F4D;&#x673A;&#x4E0E;boot&#x901A;&#x4FE1;&#x7684;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x3002;\n&#x60F3;&#x4E00;&#x4E0B;&#x5982;&#x679C;&#x5728;&#x6211;&#x4EEC;&#x8BBE;&#x8BA1;&#x6700;&#x7B80;&#x5355;&#x7684;boot&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;boot&#x7A0B;&#x5E8F;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;\n\n&#x53EF;&#x7531;&#x5916;&#x90E8;&#x4FE1;&#x53F7;&#x9009;&#x62E9;&#x6765;&#x8FDB;&#x5165;bootloader&#x6A21;&#x5F0F;\n&#x8DF3;&#x8F6C;app&#x7684;&#x529F;&#x80FD;&#x5982;&#x679C;&#x60F3;&#x8981;boot&#x5177;&#x6709;&#x66F4;&#x65B0;&#x56FA;&#x4EF6;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5219;&#x9700;&#x8981;boot&#x80FD;&#x591F;&#x8BFB;&#x53D6;&#x5E76;&#x5199;&#x5165;&#x56FA;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x8981;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x4E0A;&#x4F20;&#x56FA;&#x4EF6;\n\n&#x901A;&#x4FE1;&#x6570;&#x636E;&#x7EA6;&#x5B9A;&#x4E3A;&#x4E86;&#x53EF;&#x9760;&#x4F20;&#x8F93;&#xFF0C;&#x6211;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x534A;&#x53CC;&#x5DE5;&#x901A;&#x4FE1;&#xFF0C;&#x4E0B;&#x4F4D;&#x673A;(MCU&#x4E00;&#x4E0B;&#x7EDF;&#x79F0;&#x4E0B;&#x4F4D;&#x673A;)&#x88AB;&#x52A8;&#x7684;&#x63A5;&#x6536;&#x4E0A;&#x4F4D;&#x673A;&#x6307;&#x4EE4;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x547D;&#x4EE4;&#x5E27;&#x6765;&#x589E;&#x5F3A;&#x4F20;&#x8F93;&#x53EF;&#x9760;&#x6027;\n&#x547D;&#x4EE4;&#x5E27;&#x547D;&#x4EE4;&#x5E27;&#x7ED3;&#x6784;&#x4E3A;: [0xAA] [0x55] [&#x547D;&#x4EE4;&#x5B57;(1byte)] [&#x6570;&#x636E;&#x957F;&#x5EA6;(&#x5C0F;&#x7AEF;&#x5E8F; 2byte)] [&#x6570;&#x636E;] [&#x5E27;&#x6821;&#x9A8C;&#x6570;&#x636E;(2byte)]\n\n0xAA&#x548C;0x55&#x4E3A;&#x5E27;&#x5934;\n\n&#x547D;&#x4EE4;&#x5B57;\n\n\n\n&#x547D;&#x4EE4;&#x540D;\n&#x529F;&#x80FD;\n&#x547D;&#x4EE4;&#x5B57;\n\n\n\nEnterBoot\n&#x8FDB;&#x5165;boot&#x6A21;&#x5F0F;\n0x01\n\n\nUpload\n&#x4E0A;&#x4F20;&#x56FA;&#x4EF6;\n0x02\n\n\nVerify\n&#x9A8C;&#x8BC1;&#x56FA;&#x4EF6;\n0x03\n\n\nRunApp\n&#x8FD0;&#x884C;app\n0x04\n\n\nAck\n&#x80AF;&#x5B9A;&#x5E94;&#x7B54;\n0x05\n\n\nNack\n&#x5426;&#x5B9A;&#x5E94;&#x7B54;\n0x06\n\n\nErrorResponse\n&#x9519;&#x8BEF;&#x54CD;&#x5E94;\n0x07\n\n\n\n&#x6570;&#x636E;&#x957F;&#x5EA6;&#x91C7;&#x7528;&#x5C0F;&#x7AEF;&#x5E8F;&#xFF0C;&#x65B9;&#x4FBF;&#x4E0B;&#x4F4D;&#x673A;&#x89E3;&#x6790;\n\n&#x6570;&#x636E;&#xFF0C;&#x4EFB;&#x610F;&#x957F;&#x5EA6;\n\n&#x5E27;&#x6821;&#x9A8C;&#x6570;&#x636E;&#xFF0C;&#x4ECE;&#x547D;&#x4EE4;&#x5B57;&#x5230;&#x6570;&#x636E;&#x7ED3;&#x675F;&#x7684;&#x7D2F;&#x52A0;&#x548C;&#x53D6;&#x53CD;\n\n\n\n// &#x547D;&#x4EE4;&#x5E27;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x5927;&#x5C0F;#define FRAME_DATA_SIZE 2048// &#x547D;&#x4EE4;&#x5E27;&#x7ED3;&#x6784;typedef struct {    command_type_t command;    // &#x4E0A;&#x4F4D;&#x673A;&#x4F20;&#x6765;&#x7684;&#x957F;&#x5EA6;&#x4E3A;&#x5C0F;&#x7AEF;&#x5E8F;&#x7EC4;&#x6210;&#x7684;&#x4E24;&#x5B57;&#x8282;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x5148;&#x6536;&#x5230;&#x4F4E;&#x5B57;&#x8282;&#xFF0C;&#x518D;&#x6536;&#x9AD8;&#x5B57;&#x8282;    uint16_t data_length;    uint8_t data[FRAME_DATA_SIZE];    uint8_t checksum;} command_frame_t;\n\n&#x56FA;&#x4EF6;&#x5305;&#x56FA;&#x4EF6;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x5341;&#x51E0;&#x6216;&#x8005;&#x51E0;&#x5341;KB&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x91C7;&#x53D6;&#x5206;&#x5305;&#x4F20;&#x8F93;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x56FA;&#x4EF6;&#x6309;&#x7167;&#x9884;&#x5148;&#x8BBE;&#x5B9A;&#x7684;&#x5305;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF1B;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;19KB&#x7684;&#x56FA;&#x4EF6;&#xFF0C;&#x6309;&#x7167;1KB&#x7684;&#x5305;&#x5927;&#x5C0F;&#x62C6;&#x5206;&#x6210;19&#x4E2A;&#x5305;&#x3002;&#x5728;&#x4E0A;&#x4F4D;&#x673A;&#x5411;&#x4E0B;&#x4F4D;&#x673A;&#x4F20;&#x6570;&#x636E;&#x5305;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6570;&#x636E;&#x5305;&#x5728;&#x4F20;&#x8F93;&#x8FC7;&#x7A0B;&#x4E2D;&#x56E0;&#x4E3A;&#x79CD;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x5E72;&#x6270;&#x5BFC;&#x81F4;&#x62A5;&#x6570;&#x636E;&#x51FA;&#x9519;&#xFF0C;&#x8FD9;&#x91CC;&#x91C7;&#x7528;CRC32&#x6821;&#x9A8C;&#x6765;&#x7528;&#x4E8E;&#x4E0B;&#x4F4D;&#x673A;&#x786E;&#x8BA4;&#x5305;&#x5B8C;&#x6574;&#x6027;&#x56E0;&#x6B64;&#x4E00;&#x4E2A;&#x5305;&#x6570;&#x636E;&#x7684;&#x6784;&#x6210;&#x4E3A;: [&#x5F53;&#x524D;&#x5305;&#x53F7;] [&#x603B;&#x5305;&#x53F7;] [&#x5305;&#x6570;&#x636E;(&#x5047;&#x8BBE;&#x4E3A;1KB)] [&#x5305;&#x6570;&#x636E;&#x7684;CRC32]\n\n&#x6CE8;&#xFF1A;&#x4E3A;&#x4E86;&#x4E0E;CRC32&#x957F;&#x5EA6;&#x76F8;&#x540C;&#xFF0C;&#x5904;&#x7406;&#x5305;&#x6570;&#x636E;&#x5176;&#x4ED6;&#x90FD;&#x662F;4byte&#x7684;&#x5927;&#x7AEF;&#x6570;&#x636E;\n\n&#x4E0A;&#x4F4D;&#x673A;&#x53D1;&#x9001;&#x4E3A;&#x4E86;&#x914D;&#x5957;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E0A;&#x4F4D;&#x673A;&#x5E76;&#x5F00;&#x6E90;&#x5728;github&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x8FB9;&#x5B66;c#&#x8FB9;&#x5199;&#x7684;&#xFF0C;&#x5176;&#x4E2D;&#x8FD8;&#x5145;&#x65A5;&#x4E86;&#x5927;&#x91CF;ai&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF0C;&#x6BD4;&#x8F83;&#x4E11;&#x964B;&#xFF0C;&#x671B;&#x4E0D;&#x541D;&#x8D50;&#x6559;&#x6B64;&#x4E0A;&#x4F4D;&#x673A;&#x76EE;&#x524D;&#x5B9E;&#x73B0;&#x4E86;&#xFF1A;\n\n&#x57FA;&#x7840;&#x4E32;&#x53E3;&#x901A;&#x4FE1;:\n&#x81EA;&#x52A8;&#x53D1;&#x9001;\n&#x4FDD;&#x5B58;&#x63A5;&#x6536;&#x4E3A;txt\n&#x6536;&#x53D1;&#x65B9;&#x6807;&#x8BB0;\n\n\nboot&#x6A21;&#x5F0F;:\n&#x53D1;&#x9001;&#x547D;&#x4EE4;&#xFF0C;&#x542B;&#x4F20;&#x8F93;&#x5C42;&#x8D85;&#x65F6;&#x91CD;&#x53D1;&#x548C;&#x8C03;&#x5EA6;&#x5C42;&#x8FFD;&#x52A0;&#x91CD;&#x53D1;\n&#x8BFB;&#x53D6;&#x56FA;&#x4EF6;&#x5E76;&#x81EA;&#x52A8;&#x5206;&#x5305;&#x8BA1;&#x7B97;CRC32\n&#x6D4B;&#x8BD5;&#x6309;&#x94AE;&#xFF0C;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x540E;&#x9762;&#x4F1A;&#x4E13;&#x95E8;&#x5199;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x6765;&#x4ECB;&#x7ECD;&#x6B64;&#x4E0A;&#x4F4D;&#x673A;\n\n\n\n&#x4E0B;&#x4F4D;&#x673A;&#x63A5;&#x6536;&#x4E0A;&#x4F4D;&#x673A;&#x53EA;&#x662F;&#x6DFB;&#x5934;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E0B;&#x4F4D;&#x673A;&#x7684;&#x63A5;&#x6536;&#x8BE5;&#x600E;&#x4E48;&#x5199;&#x3002;&#x8FD9;&#x91CC;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x673A;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;\n&#x72B6;&#x6001;&#x5236;&#x5B9A;&#x601D;&#x8003;&#x4E00;&#x4E0B;&#x547D;&#x4EE4;&#x5E27;&#xFF0C;&#x4E00;&#x5171;&#x6709;&#x4E94;&#x4E2A;&#x90E8;&#x5206;&#x7EC4;&#x6210;: &#x5E27;&#x5934;&#xFF0C;&#x547D;&#x4EE4;&#x5B57;&#xFF0C;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF0C;&#x6570;&#x636E;&#x548C;&#x6821;&#x9A8C;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5F53;&#x6211;&#x4EEC;&#x63A5;&#x6536;&#x5B57;&#x8282;&#x6570;&#x636E;&#x65F6;&#x5C31;&#x662F;&#x56F4;&#x7ED5;&#x7740;&#x8FD9;&#x51E0;&#x4E2A;&#x72B6;&#x6001;\n// &#x63A5;&#x6536;&#x72B6;&#x6001;&#x673A;typedef enum {    RX_STATE_IDLE,    RX_STATE_HEADER1,    RX_STATE_HEADER2,    RX_STATE_CMD,    RX_STATE_LEN_LOW,    RX_STATE_LEN_HIGH,    RX_STATE_DATA,    RX_STATE_CHECKSUM} rx_state_t;\n\n&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x6211;&#x628A;&#x5B83;&#x518D;&#x7EC6;&#x5206;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5C06;&#x5E27;&#x5934;&#x62C6;&#x4E3A;&#x4E24;&#x6B21;&#xFF0C;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x4E5F;&#x62C6;&#x5F00;&#xFF0C;&#x8FD9;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x914D;&#x5408;&#x6309;&#x5B57;&#x8282;&#x63A5;&#x6536;\n&#x72B6;&#x6001;&#x8F6C;&#x6362;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x63A5;&#x6536;&#x6D41;&#x7A0B;&#xFF1A;\n\nRX_STATE_HEADER1 &#xFF1A;&#x5047;&#x8BBE;&#x5148;&#x6536;&#x5230;0xAA&#xFF0C;&#x72B6;&#x6001;&#x7531; RX_STATE_HEADER1 -&gt; RX_STATE_HEADER2 &#xFF1B;&#x5426;&#x4FA7;&#x72B6;&#x6001;&#x56DE;&#x5230; RX_STATE_HEADER1 &#x7EE7;&#x7EED;&#x7B49;&#x5F85;&#x5E27;&#x5934;\n\nRX_STATE_HEADER2 &#xFF1A;&#x6536;&#x5230;0x55&#xFF0C;&#x8BF4;&#x660E;&#x5E27;&#x5934;&#x63A5;&#x6536;&#x5B8C;&#x4E86;&#xFF0C;&#x72B6;&#x6001;&#x7531; RX_STATE_HEADER2 -&gt; RX_STATE_CMD &#xFF1B;&#x5426;&#x4FA7;&#x72B6;&#x6001;&#x56DE;&#x5230; RX_STATE_HEADER1 &#x7EE7;&#x7EED;&#x7B49;&#x5F85;&#x5E27;&#x5934;\n\nRX_STATE_CMD &#xFF1A; &#x68C0;&#x6D4B;&#x63A5;&#x6536;&#x7684;&#x5B57;&#x8282;&#x6570;&#x636E;&#x662F;&#x5426;&#x5728;&#x547D;&#x4EE4;&#x5B57;&#x679A;&#x4E3E;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x547D;&#x4EE4;&#x5B57;&#x5408;&#x6CD5;&#x5219;&#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x72B6;&#x6001; RX_STATE_LEN_LOW &#xFF1B;&#x5426;&#x4FA7;&#x72B6;&#x6001;&#x56DE;&#x5230; RX_STATE_HEADER1 &#x7EE7;&#x7EED;&#x7B49;&#x5F85;&#x5E27;&#x5934;\n\nRX_STATE_LEN_LOW &#xFF1A;&#x63A5;&#x6536;&#x957F;&#x5EA6;&#x6570;&#x636E;&#x7684;&#x4F4E;&#x4F4D;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x5165; RX_STATE_LEN_HIGH\n\nRX_STATE_LEN_HIGH &#xFF1A;&#x63A5;&#x6536;&#x957F;&#x5EA6;&#x6570;&#x636E;&#x7684;&#x9AD8;&#x4F4D;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x4F1A;&#x6709;&#x5206;&#x652F;&#xFF0C;&#x5982;&#x679C;&#x957F;&#x5EA6;&#x4E3A;&#x96F6;&#x5219;&#x76F4;&#x63A5;&#x8FDB;&#x5165; RX_STATE_CHECKSUM &#xFF0C;&#x4E0D;&#x4E3A;&#x96F6;&#x4E14;&#x5C0F;&#x4E8E;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x533A;&#x957F;&#x5EA6;&#x5219;&#x8FDB;&#x5165; RX_STATE_DATA ; &#x5426;&#x4FA7;&#x72B6;&#x6001;&#x56DE;&#x5230; RX_STATE_HEADER1 &#x7EE7;&#x7EED;&#x7B49;&#x5F85;&#x5E27;&#x5934;\n\nRX_STATE_DATA &#xFF1A;&#x63A5;&#x6536;&#x6570;&#x636E;&#xFF0C;&#x5185;&#x7F6E;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x5F53;&#x63A5;&#x6536;&#x6570;&#x636E;&#x4E0D;&#x7B49;&#x4E8E;&#x957F;&#x5EA6;&#x65F6;&#x8BF4;&#x660E;&#x63A5;&#x6536;&#x6570;&#x636E;&#x672A;&#x6EE1;&#xFF0C;&#x5FAA;&#x73AF; RX_STATE_DATA &#xFF0C;&#x76F4;&#x5230;&#x63A5;&#x6536;&#x6570;&#x636E;&#x7B49;&#x4E8E;&#x957F;&#x5EA6;&#x8F6C;&#x5230; RX_STATE_CHECKSUM\n\nRX_STATE_CHECKSUM &#xFF1A;&#x6821;&#x9A8C;&#x6570;&#x636E;&#xFF0C;&#x9664;&#x4E86;&#x5E27;&#x5934;&#x4E0D;&#x52A0;&#xFF0C;&#x5176;&#x4ED6;&#x7D2F;&#x8BA1;&#x548C;&#x53D6;&#x53CD;&#x5E76;&#x4E8E;&#x63A5;&#x53D7;&#x7684;&#x6821;&#x9A8C;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#xFF0C;&#x76F8;&#x5BF9;&#x8BF4;&#x660E;&#x672C;&#x6B21;&#x547D;&#x4EE4;&#x5E27;&#x63A5;&#x6536;&#x6210;&#x529F;&#xFF1B;&#x5426;&#x4FA7;&#x72B6;&#x6001;&#x56DE;&#x5230; RX_STATE_HEADER1 &#x7EE7;&#x7EED;&#x7B49;&#x5F85;&#x5E27;&#x5934;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;\n\n\n\n&#x4EE5;&#x4E0B;&#x4E3A;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;\nparse_result_t command_process_byte(uint8_t byte) {    parse_result_t ret;    switch (rx_state) {    case RX_STATE_HEADER1:        if (byte == FRAME_HEADER1) {            rx_state = RX_STATE_HEADER2;        } else {            rx_state = RX_STATE_HEADER1;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_HEADER2:        if (byte == FRAME_HEADER2) {            rx_state = RX_STATE_CMD;        } else {            rx_state = RX_STATE_HEADER1;            return PARSE_ERROR_HEADER;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_CMD:        if (is_valid_command((command_type_t)byte)) {            current_frame.command = (command_type_t)byte;            rx_state = RX_STATE_LEN_LOW;            ret = PARSE_INCOMPLETE;        } else {            rx_state = RX_STATE_HEADER1;            ret = PARSE_ERROR_INVALID_CMD;        }        break;    case RX_STATE_LEN_LOW:        current_frame.data_length = byte;        rx_state = RX_STATE_LEN_HIGH;        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_LEN_HIGH:        data_recived_size = 0;        current_frame.data_length |= (byte &lt;&lt; 8);        if (current_frame.data_length == 0) {            rx_state = RX_STATE_CHECKSUM;            ret = PARSE_INCOMPLETE;        } else if (current_frame.data_length &lt; FRAME_SIZE) {            rx_state = RX_STATE_DATA;            ret = PARSE_INCOMPLETE;        } else {            rx_state = RX_STATE_HEADER1;            ret = PARSE_ERROR_LENGTH;        }        break;    case RX_STATE_DATA:        current_frame.data[data_recived_size++] = byte;        if (data_recived_size == current_frame.data_length) {            rx_state = RX_STATE_CHECKSUM;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_CHECKSUM:        current_frame.checksum = byte;        uint8_t checksum;        uint16_t header_size =            sizeof(current_frame.command) + sizeof(current_frame.data_length);        checksum = calculate_checksum((uint8_t *)&amp;current_frame.command,                                      header_size + current_frame.data_length);        if (checksum == current_frame.checksum) {            frame_ready = true;            ret = PARSE_SUCCESS;        } else {            ret = PARSE_ERROR_CHECKSUM;        }        rx_state = RX_STATE_HEADER1;        break;    default:        rx_state = RX_STATE_HEADER1;        ret = PARSE_INCOMPLETE;        break;    }    return ret;}\n\n&#x5C01;&#x88C5;&#x5E76;&#x5206;&#x5C42;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;boot&#x663E;&#x7136;&#x4E0D;&#x9002;&#x5408;&#x518D;&#x5728;main&#x4E2D;&#x7F16;&#x5199;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x5176;&#x72EC;&#x7ACB;&#x51FA;&#x6765;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x5B58;&#x5728;&#x3002;&#x6682;&#x65F6;&#x5C06;&#x5176;&#x5206;&#x4E3A;boot&#x5C42;&#x548C;boot_cmd&#x5C42;\n\nboot_cmd&#x5C42;&#xFF1A;&#x53EA;&#x8D1F;&#x8D23;&#x89E3;&#x6790;&#x547D;&#x4EE4;&#x5E27;&#x548C;&#x6784;&#x5EFA;&#x547D;&#x4EE4;&#x5E27;\nboot&#x5C42;&#xFF1A;&#x8D1F;&#x8D23;&#x5C01;&#x88C5;&#x5E76;&#x66B4;&#x9732; boot_cmd &#x4E2D;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x4E0E;boot&#x5F3A;&#x76F8;&#x5173;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;boot&#x72B6;&#x6001;&#x673A;&#xFF0C;app&#x8DF3;&#x8F6C;&#x7B49;\n\nboot&#x5C42;&#x5728;boot&#x547D;&#x4EE4;&#x5E27;&#x89E3;&#x6790;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x6BCF;&#x6B21;&#x72B6;&#x6001;&#x673A;&#x8C03;&#x7528;&#x540E;&#x90FD;&#x4F1A;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x8FD9;&#x662F;&#x4E0E;&#x547D;&#x4EE4;&#x5E27;&#x89E3;&#x6790;&#x914D;&#x5957;&#x7684;&#x89E3;&#x6790;&#x7ED3;&#x679C;\n// &#x89E3;&#x6790;&#x7ED3;&#x679C;typedef enum {    PARSE_SUCCESS,    PARSE_ERROR_HEADER,    PARSE_ERROR_INVALID_CMD,    PARSE_ERROR_LENGTH,    PARSE_ERROR_CHECKSUM,    PARSE_INCOMPLETE} parse_result_t\n\n&#x72B6;&#x6001;&#x673A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E86;&#x89E3;&#x6790;&#x9519;&#x8BEF;&#xFF0C;&#x867D;&#x7136;&#x4F1A;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230; RX_STATE_HEADER1 &#x7B49;&#x5F85;&#x5E27;&#x5934;&#xFF0C;&#x4F46;&#x662F;&#x8C03;&#x7528;&#x8005;&#x9700;&#x8981;&#x6301;&#x7EED;&#x8FFD;&#x8E2A;&#x89E3;&#x6790;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x9519;&#x8BEF;&#x5E76;&#x7ED9;&#x51FA;&#x5BF9;&#x4E8E;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x9519;&#x8BEF;&#x8FFD;&#x8E2A;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x72B6;&#x6001;&#x673A;&#x4E2D;&#x5F15;&#x5165;&#x8FD4;&#x56DE;&#x503C;&#x6765;&#x8BA9;boot&#x5C42;&#x77E5;&#x9053;&#x89E3;&#x6790;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x5B9E;&#x73B0;&#xFF1A;\nvoid Boot_ReceiveCommand(uint8_t received_byte) {    // &#x547D;&#x4EE4;&#x63A5;&#x6536;&#x5904;&#x7406;&#x5B9E;&#x73B0;    command_parse_result = command_process_byte(received_byte);    switch (command_parse_result) {    case PARSE_SUCCESS:        if (command_get_frame(&amp;current_frame)) {            is_recived = true;            bootErrorCode = ERROR_CODE_NO_ERROR;        }        break;    case PARSE_ERROR_HEADER:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_ERROR_INVALID_CMD:        bootErrorCode = ERROR_CODE_UNKNOWN_CMD;        is_recived = false;        break;    case PARSE_ERROR_LENGTH:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_ERROR_CHECKSUM:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_INCOMPLETE:        // &#x6B63;&#x5E38;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x505A;&#x5904;&#x7406;        break;    default:        bootErrorCode = ERROR_CODE_NO_ERROR;        is_recived = false;        break;    }}\n\n&#x5728;boot&#x5C42;&#x4E2D;&#x6709;&#x79C1;&#x6709;&#x53D8;&#x91CF; bootErrorCode &#x6765;&#x6355;&#x83B7;&#x9519;&#x8BEF;&#x5E76;&#x5904;&#x7406;&#x3002;&#x800C; Boot_ReceiveCommand &#x51FD;&#x6570;&#x653E;&#x5728;&#x4E32;&#x53E3;&#x63A5;&#x6536;&#x4E2D;&#x65AD;&#x56DE;&#x8C03;&#x4F7F;&#x7528;&#xFF0C;&#x6216;&#x8005;&#x865A;&#x62DF;&#x4E32;&#x53E3;&#x63A5;&#x6536;&#x51FD;&#x6570;&#x4E2D;&#x81EA;&#x884C;&#x6309;&#x5B57;&#x8282;&#x62C6;&#x5305;&#x540E;&#x5FAA;&#x73AF;&#x4F20;&#x5165;&#x90FD;&#x53EF;&#x4EE5;&#x4F8B;&#x5982;&#xFF1A;\n//&#x865A;&#x62DF;&#x4E32;&#x53E3;&#x63A5;&#x6536;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x662F;&#x6309;&#x6570;&#x636E;&#x5305;&#x63A5;&#x53D7;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5176;&#x4E2D;&#x6309;&#x5B57;&#x8282;&#x62C6;&#x5206;&#x518D;&#x5FAA;&#x73AF;&#x63A5;&#x6536;static int8_t CDC_Receive_FS(uint8_t *Buf, uint32_t *Len) {    /* USER CODE BEGIN 6 */    USBD_CDC_SetRxBuffer(&amp;hUsbDeviceFS, &amp;Buf[0]);    USBD_CDC_ReceivePacket(&amp;hUsbDeviceFS);    // &#x6309;&#x5B57;&#x8282;&#x63A5;&#x6536;    for (uint32_t i = 0; i &lt; *Len; i++) {        Boot_ReceiveCommand(Buf[i]);    }    return (USBD_OK);    /* USER CODE END 6 */}\n\n&#x6E90;&#x7801;//boot.h#ifndef _BOOT_H_#define _BOOT_H_#include &quot;boot_cmd.h&quot;#include &lt;stdbool.h&gt;#include &lt;stdint.h&gt;#include &lt;stdio.h&gt;#ifdef __cplusplusextern &quot;C&quot; {#endif// &#x4E0A;&#x7535;BOOT&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x65F6;&#x8FDB;&#x5165;app(&#x5982;&#x6709;)#define BOOT_WAIT_TIME_MS 2000#define APPLICATION_START_ADDRESS 0x08010000#define FLASH_END_ADDRESS 0x080FFFFF// &#x51FD;&#x6570;&#x6307;&#x9488;&#xFF0C;&#x7528;&#x4E8E;&#x590D;&#x4F4D;&#x51FD;&#x6570;&#x5B9E;&#x4F8B;&#x5316;typedef void (*FunctionPointer)(void);typedef struct {    uint32_t stack_pointer;    FunctionPointer reset_handler;} VectorTableType;// boot&#x72B6;&#x6001;&#x673A;typedef enum {    BOOT_STATE_WAIT,    BOOT_STATE_BOOTLOADER,    BOOT_STATE_APPLICATION_JUMP,} BootState_t;// &#x9519;&#x8BEF;&#x7801;&#x5B9A;&#x4E49;typedef enum {    ERROR_CODE_NO_ERROR = 0x00,    ERROR_CODE_PARSE_FAILED = 0x01,    ERROR_CODE_UNKNOWN_CMD = 0x02,    ERROR_CODE_INVALID_DATA = 0x03,    ERROR_CODE_FLASH_ERROR = 0x04,    ERROR_CODE_VERIFY_FAILED = 0x05,    ERROR_CODE_NUMS} BootErrorCode_t;// typedef union {//     /* data */// };/** * @brief &#x83B7;&#x53D6;&#x9519;&#x8BEF;&#x4FE1;&#x606F; * @param errorCode &#x9519;&#x8BEF;&#x7801; * @return &#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x5B57;&#x7B26;&#x4E32; */const char *GetErrorMessage(BootErrorCode_t errorCode);// &#x6570;&#x636E;&#x53D1;&#x9001;&#x51FD;&#x6570;&#x6307;&#x9488;&#x7C7B;&#x578B;typedef bool (*Boot_SendData_Func)(uint8_t *data, uint16_t length);/** * @brief Boot&#x6A21;&#x5757;&#x521D;&#x59CB;&#x5316; * @param send_func &#x6570;&#x636E;&#x53D1;&#x9001;&#x51FD;&#x6570;&#x6307;&#x9488; */void Boot_Init(Boot_SendData_Func send_func);/** * @brief boot&#x72B6;&#x6001;&#x673A; */void Boot_ProcessStateMachine(void);/** * @brief &#x9A8C;&#x8BC1;&#x56FA;&#x4EF6;&#x662F;&#x5426;&#x5408;&#x6CD5; * @return 0&#x4E0D;&#x5408;&#x6CD5; 1&#x5408;&#x6CD5; */uint8_t Boot_IsApplicationValid(void);/** * @brief &#x8DF3;&#x8F6C;&#x5230;&#x56FA;&#x4EF6; */void Boot_JumpToApplication(void);/** * @brief &#x8FDB;&#x5165;BootLoader&#x6A21;&#x5F0F;&#xFF0C;&#x89E3;&#x6790;&#x6765;&#x81EA;&#x4E0A;&#x4F4D;&#x673A;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x8FDB;&#x884C;&#x56FA;&#x4EF6;&#x5347;&#x7EA7;&#x7B49;&#x64CD;&#x4F5C; * @return BootState_t &#x8FD4;&#x56DE;boot&#x72B6;&#x6001;&#xFF0C;&#x7528;&#x4E8E;&#x8DF3;&#x8F6C;app */BootState_t Boot_EnterBootloaderMode(void);/** * @brief &#x5904;&#x7406;&#x63A5;&#x6536;&#x6570;&#x636E;&#x3002;&#x5728;&#x6570;&#x636E;&#x63A5;&#x6536;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528; * @param received_byte &#x6309;&#x5B57;&#x8282;&#x5904;&#x7406; */void Boot_ReceiveCommand(uint8_t received_byte);/*&#x66B4;&#x9732;&#x63A5;&#x53E3;&#x7528;&#x6765;&#x6D4B;&#x8BD5;*/uint8_t Boot_ProcessUploadCommand(command_frame_t *frame);#ifdef __cplusplus}#endif#endif\n\n&#x76F8;&#x8F83;&#x4E8E;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x6709;&#x51FD;&#x6570;&#x540D;&#x4E0A;&#x7684;&#x4FEE;&#x6539;\n//boot.c#include &quot;boot.h&quot;#include &quot;boot_cmd.h&quot;#include &quot;key_driver.h&quot;#include &quot;led_driver.h&quot;#include &lt;string.h&gt;extern KEY_Device_t K1;extern LED_Device_t LED;static BootState_t current_boot_state = BOOT_STATE_WAIT;static parse_result_t command_parse_result;static command_frame_t current_frame;static volatile bool is_recived = false;static volatile BootErrorCode_t bootErrorCode = ERROR_CODE_NO_ERROR;static volatile bool is_run_app = false;// &#x53D1;&#x9001;&#x51FD;&#x6570;&#x6307;&#x9488;static Boot_SendData_Func boot_send_func = NULL;// Boot&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;static bool boot_initialized = false;// &#x9519;&#x8BEF;&#x4FE1;&#x606F;const char *ErrorMessage[ERROR_CODE_NUMS] = {    &quot;No error&quot;,              // 0x00    &quot;Command parse failed&quot;,  // 0x01    &quot;Unknown command&quot;,       // 0x02    &quot;Invalid data format&quot;,   // 0x03    &quot;Flash operation error&quot;, // 0x04    &quot;Verification failed&quot;    // 0x05};// &#x9759;&#x6001;&#x51FD;&#x6570;&#x58F0;&#x660E;static void Boot_ProcessReceivedCommand(void);static bool Boot_SendFrame(command_type_t cmd, uint8_t *data,                           uint16_t data_len);static void Boot_SendAckResponse(void);static void Boot_SendErrorResponse(BootErrorCode_t errorCode);const char *GetErrorMessage(BootErrorCode_t errorCode) {    if (errorCode &gt;= ERROR_CODE_NUMS) {        return &quot;Unknown error code&quot;;    }    return ErrorMessage[errorCode];}void Boot_Init(Boot_SendData_Func send_func) {    if (boot_initialized) {        return; // &#x907F;&#x514D;&#x91CD;&#x590D;&#x521D;&#x59CB;&#x5316;    }    // &#x521D;&#x59CB;&#x5316;&#x547D;&#x4EE4;&#x89E3;&#x6790;&#x5668;    command_parser_init();    // &#x8BBE;&#x7F6E;&#x53D1;&#x9001;&#x51FD;&#x6570;    boot_send_func = send_func;    // &#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;&#x673A;    current_boot_state = BOOT_STATE_WAIT;    is_recived = false;    bootErrorCode = ERROR_CODE_NO_ERROR;    is_run_app = false;    boot_initialized = true;}// boot&#x72B6;&#x6001;&#x673A;&#x53CA;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;void Boot_ProcessStateMachine(void) {    if (!boot_initialized) {        return;    }    switch (current_boot_state) {    case BOOT_STATE_WAIT:        if (HAL_GetTick() &gt; BOOT_WAIT_TIME_MS) {            current_boot_state = BOOT_STATE_APPLICATION_JUMP;        } else if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {            current_boot_state = BOOT_STATE_BOOTLOADER;            const char enter_boot_str[] = &quot;Enter BootLoader Mode\\n&quot;;            boot_send_func((uint8_t *)enter_boot_str, strlen(enter_boot_str));        }        break;    case BOOT_STATE_BOOTLOADER:        BootState_t bootloader_result = Boot_EnterBootloaderMode();        if (bootloader_result == BOOT_STATE_APPLICATION_JUMP) {            const char jump_to_app_str[] = &quot;Jump To APP\\n&quot;;            boot_send_func((uint8_t *)jump_to_app_str, strlen(jump_to_app_str));            current_boot_state = BOOT_STATE_APPLICATION_JUMP;        }        break;    case BOOT_STATE_APPLICATION_JUMP:        if (Boot_IsApplicationValid()) {            Boot_JumpToApplication();        } else {            current_boot_state = BOOT_STATE_BOOTLOADER;            const char enter_boot_str[] = &quot;Enter BootLoader Mode\\n&quot;;            boot_send_func((uint8_t *)enter_boot_str, strlen(enter_boot_str));        }        break;    default:        current_boot_state = BOOT_STATE_BOOTLOADER;        break;    }}uint8_t Boot_IsApplicationValid(void) {    const VectorTableType *app_vector_table =        (VectorTableType *)APPLICATION_START_ADDRESS;    // &#x68C0;&#x67E5;&#x6808;&#x6307;&#x9488;&#x662F;&#x5426;&#x5728;&#x6709;&#x6548;&#x5730;&#x5740;&#x8303;&#x56F4;&#x5185;    if ((app_vector_table-&gt;stack_pointer &lt; 0x20000000) ||        (app_vector_table-&gt;stack_pointer &gt; 0x20020000)) {        return 0;    }    // &#x68C0;&#x67E5;&#x590D;&#x4F4D;&#x5904;&#x7406;&#x51FD;&#x6570;&#x6307;&#x9488;&#x662F;&#x5426;&#x5728;&#x6709;&#x6548;&#x5730;&#x5740;&#x8303;&#x56F4;&#x5185;    uint32_t reset_handler_address = (uint32_t)app_vector_table-&gt;reset_handler;    if (reset_handler_address &lt; APPLICATION_START_ADDRESS ||        reset_handler_address &gt; FLASH_END_ADDRESS) {        return 0;    }    // &#x68C0;&#x67E5;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x662F;&#x5426;&#x5305;&#x542B;&#x6709;&#x6548;&#x6570;&#x636E;    uint32_t *app_start_address = (uint32_t *)APPLICATION_START_ADDRESS;    for (int i = 0; i &lt; 16; i++) {        if (app_start_address[i] != 0xFFFFFFFF &amp;&amp;            app_start_address[i] != 0x00000000) {            return 1;        }    }    return 0;}void Boot_JumpToApplication(void) {    const VectorTableType *app_vector_table =        (VectorTableType *)APPLICATION_START_ADDRESS;    // &#x7981;&#x7528;irq&#x4E2D;&#x65AD;&#xFF0C;&#x4EC5;&#x5173;&#x95ED;IRQ&#xFF08;&#x666E;&#x901A;&#x4E2D;&#x65AD;&#xFF09;&#xFF0C;&#x4F46;&#x4E0D;&#x5173;&#x95ED;FIQ&#xFF08;&#x5FEB;&#x901F;&#x4E2D;&#x65AD;&#xFF09;    __disable_irq();    // &#x7981;&#x7528;&#x5168;&#x90E8;&#x4E2D;&#x65AD;    __set_PRIMASK(1);    // &#x590D;&#x4F4D;&#x6240;&#x6709;&#x65F6;&#x949F;&#x5230;&#x9ED8;&#x8BA4;    HAL_RCC_DeInit();    KEY_DeInitDev(&amp;K1);    LED_DeInitDev(&amp;LED);    // &#x5173;&#x95ED;systick&#xFF0C;&#x590D;&#x4F4D;&#x5230;&#x9ED8;&#x8BA4;&#x503C;    SysTick-&gt;CTRL = 0;    SysTick-&gt;LOAD = 0;    SysTick-&gt;VAL = 0;    // &#x5173;&#x95ED;&#x6240;&#x6709;&#x4E2D;&#x65AD;&#xFF0C;&#x6E05;&#x9664;&#x6240;&#x6709;&#x4E2D;&#x65AD;&#x6302;&#x8D77;&#x6807;&#x5FD7;    for (uint32_t i = 0; i &lt; 8; i++) {        NVIC-&gt;ICER[i] = 0xFFFFFFFF;        NVIC-&gt;ICPR[i] = 0xFFFFFFFF;    }    // &#x8BBE;&#x7F6E;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x504F;&#x79FB;    SCB-&gt;VTOR = APPLICATION_START_ADDRESS;    // &#x8BBE;&#x7F6E;&#x4E3B;&#x6808;&#x6307;&#x9488;    __set_MSP(app_vector_table-&gt;stack_pointer);    // &#x4F7F;&#x7528;RTOS&#x65F6;&#xFF0C;&#x8FD9;&#x53E5;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;&#x7279;&#x6743;&#x7EA7;&#x6A21;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;MSP&#x6307;&#x9488;    __set_CONTROL(0);    // &#x5728;&#x8DF3;&#x8F6C;&#x524D;&#x5F00;&#x542F;&#x5168;&#x5C40;&#x4E2D;&#x65AD;&#xFF0C;&#x8BA9;APP&#x53EF;&#x4EE5;&#x54CD;&#x5E94;&#x4E2D;&#x65AD;    __set_PRIMASK(0);    __enable_irq();    // &#x8DF3;&#x8F6C;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x590D;&#x4F4D;&#x5904;&#x7406;&#x51FD;&#x6570;    app_vector_table-&gt;reset_handler();    // &#x5982;&#x679C;&#x8DF3;&#x8F6C;&#x6210;&#x529F;&#xFF0C;&#x7A0B;&#x5E8F;&#x4E0D;&#x4F1A;&#x8FD0;&#x884C;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x6DFB;&#x52A0;&#x5904;&#x7406;&#x4EE3;&#x7801;    while (1)        ;}BootState_t Boot_EnterBootloaderMode(void) {    // Bootloader&#x6A21;&#x5F0F;&#x5B9E;&#x73B0;    LED_Blink(&amp;LED, 1000);    if (is_recived &amp;&amp; bootErrorCode == ERROR_CODE_NO_ERROR) {        // &#x547D;&#x4EE4;&#x5904;&#x7406;&#x72B6;&#x6001;&#x673A;        is_recived = false; // &#x7ACB;&#x5373;&#x91CD;&#x7F6E;        Boot_ProcessReceivedCommand();        if (is_run_app) {            is_run_app = false;            return BOOT_STATE_APPLICATION_JUMP;        }    } else if (bootErrorCode != ERROR_CODE_NO_ERROR) {        // &#x7ED9;&#x4E0A;&#x4F4D;&#x673A;&#x53D1;&#x9001;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#xFF0C;&#x5229;&#x7528;command_build_frame&#x6253;&#x5305;&#xFF0C;        // &#x547D;&#x4EE4;&#x5B57;&#x4E3A;CMD_ERROR_RESPONSE &#x6570;&#x636E;&#x4E3A;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x8868;        // &#x5199;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x8868;&#x7528;&#x6765;&#x6839;&#x636E;&#x9519;&#x8BEF;&#x53F7;&#x7ED9;&#x4E0A;&#x4F4D;&#x673A;&#x53CD;&#x9988;&#x9519;&#x8BEF;&#x4FE1;&#x606F;        Boot_SendErrorResponse(bootErrorCode);        bootErrorCode = ERROR_CODE_NO_ERROR; // &#x91CD;&#x7F6E;&#x9519;&#x8BEF;&#x7801;    }    if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {        return BOOT_STATE_APPLICATION_JUMP;    }    return BOOT_STATE_BOOTLOADER;}/** * @brief &#x5904;&#x7406;&#x63A5;&#x6536;&#x5230;&#x7684;&#x547D;&#x4EE4; */static void Boot_ProcessReceivedCommand(void) {    switch (current_frame.command) {    case CMD_ENTER_BOOT:        // &#x5DF2;&#x7ECF;&#x8FDB;&#x5165;Bootloader&#xFF0C;&#x53D1;&#x9001;&#x786E;&#x8BA4;        Boot_SendAckResponse();        break;    case CMD_UPLOAD:        // &#x5904;&#x7406;&#x56FA;&#x4EF6;&#x4E0A;&#x4F20;        Boot_ProcessUploadCommand(&amp;current_frame);        Boot_SendAckResponse(); // &#x6682;&#x65F6;&#x53EA;&#x56DE;&#x590D;ACK        break;    case CMD_VERIFY:        // &#x5904;&#x7406;&#x9A8C;&#x8BC1;&#x547D;&#x4EE4;        // Boot_ProcessVerifyCommand(&amp;current_frame);        Boot_SendAckResponse(); // &#x6682;&#x65F6;&#x53EA;&#x56DE;&#x590D;ACK        break;    case CMD_RUN_APP:        // &#x6536;&#x5230;&#x8DF3;&#x8F6C;APP&#x547D;&#x4EE4;        Boot_SendAckResponse();        // &#x8BBE;&#x7F6E;&#x6807;&#x5FD7;&#xFF0C;&#x8BA9;&#x72B6;&#x6001;&#x673A;&#x5728;&#x4E0B;&#x4E2A;&#x5FAA;&#x73AF;&#x8DF3;&#x8F6C;        is_run_app = true;        break;    case CMD_ACK:        // &#x6536;&#x5230;ACK&#x6D4B;&#x8BD5;&#x547D;&#x4EE4;        Boot_SendAckResponse();        break;    default:        Boot_SendErrorResponse(ERROR_CODE_UNKNOWN_CMD);        break;    }}/** * @brief &#x5904;&#x7406;&#x56FA;&#x4EF6;&#x5347;&#x7EA7;&#x6307;&#x4EE4; * @param frame &#x547D;&#x4EE4;&#x5E27; * @return 1&#x6210;&#x529F;&#xFF0C;0&#x5931;&#x8D25; */uint8_t Boot_ProcessUploadCommand(command_frame_t *frame) {    uint8_t *firmware;    static uint8_t total_packet;    static uint8_t num_packet;}/** * @brief &#x53D1;&#x9001;&#x547D;&#x4EE4;&#x5E27; */static bool Boot_SendFrame(command_type_t cmd, uint8_t *data,                           uint16_t data_len) {    uint8_t tx_buffer[FRAME_SIZE];    uint16_t frame_len = command_build_frame(cmd, data, data_len, tx_buffer);    return boot_send_func(tx_buffer, frame_len);}/** * @brief &#x53D1;&#x9001;ACK&#x54CD;&#x5E94; */static void Boot_SendAckResponse(void) { Boot_SendFrame(CMD_ACK, NULL, 0); }/** * @brief &#x53D1;&#x9001;&#x9519;&#x8BEF;&#x54CD;&#x5E94; */static void Boot_SendErrorResponse(BootErrorCode_t errorCode) {    const char *error_msg = GetErrorMessage(errorCode);    uint16_t error_msg_len = strlen(error_msg);    Boot_SendFrame(CMD_ERROR_RESPONSE, (uint8_t *)error_msg, error_msg_len);}void Boot_ReceiveCommand(uint8_t received_byte) {    // &#x547D;&#x4EE4;&#x63A5;&#x6536;&#x5904;&#x7406;&#x5B9E;&#x73B0;    command_parse_result = command_process_byte(received_byte);    switch (command_parse_result) {    case PARSE_SUCCESS:        if (command_get_frame(&amp;current_frame)) {            is_recived = true;            bootErrorCode = ERROR_CODE_NO_ERROR;        }        break;    case PARSE_ERROR_HEADER:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_ERROR_INVALID_CMD:        bootErrorCode = ERROR_CODE_UNKNOWN_CMD;        is_recived = false;        break;    case PARSE_ERROR_LENGTH:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_ERROR_CHECKSUM:        bootErrorCode = ERROR_CODE_PARSE_FAILED;        is_recived = false;        break;    case PARSE_INCOMPLETE:        // &#x6B63;&#x5E38;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x505A;&#x5904;&#x7406;        break;    default:        bootErrorCode = ERROR_CODE_NO_ERROR;        is_recived = false;        break;    }}\n\nboot_cmd&#x5C42;&#x57FA;&#x672C;&#x90FD;&#x5728;boot&#x547D;&#x4EE4;&#x5E27;&#x89E3;&#x6790;&#x4EE5;&#x4E0B;&#x662F;&#x6E90;&#x7801;&#xFF1A;\n//boot_cmd.h#ifndef _BOOT_CMD_H_#define _BOOT_CMD_H_#include &lt;stdbool.h&gt;#include &lt;stdint.h&gt;#include &lt;stdio.h&gt;#ifdef __cplusplusextern &quot;C&quot; {#endif// &#x547D;&#x4EE4;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;typedef enum {    CMD_VALID_START,    CMD_ENTER_BOOT = 0x01,    CMD_UPLOAD = 0x02,    CMD_VERIFY = 0x03,    CMD_RUN_APP = 0x04,    CMD_ACK = 0x05,    CMD_NACK = 0x06,    CMD_ERROR_RESPONSE = 0x07,    CMD_VALID_END} command_type_t;// &#x5E27;&#x5934;&#x5B9A;&#x4E49;#define FRAME_HEADER1 0xAA#define FRAME_HEADER2 0x55// &#x547D;&#x4EE4;&#x5E27;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x5927;&#x5C0F;#define FRAME_DATA_SIZE 2048#define FRAME_SIZE (FRAME_DATA_SIZE + 128)// &#x547D;&#x4EE4;&#x5E27;&#x7ED3;&#x6784;typedef struct {    command_type_t command;    // &#x4E0A;&#x4F4D;&#x673A;&#x4F20;&#x6765;&#x7684;&#x957F;&#x5EA6;&#x4E3A;&#x5C0F;&#x7AEF;&#x5E8F;&#x7EC4;&#x6210;&#x7684;&#x4E24;&#x5B57;&#x8282;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x5148;&#x6536;&#x5230;&#x4F4E;&#x5B57;&#x8282;&#xFF0C;&#x518D;&#x6536;&#x9AD8;&#x5B57;&#x8282;    uint16_t data_length;    uint8_t data[FRAME_DATA_SIZE];    uint8_t checksum;} command_frame_t;// &#x89E3;&#x6790;&#x7ED3;&#x679C;typedef enum {    PARSE_SUCCESS,    PARSE_ERROR_HEADER,    PARSE_ERROR_INVALID_CMD,    PARSE_ERROR_LENGTH,    PARSE_ERROR_CHECKSUM,    PARSE_INCOMPLETE} parse_result_t;// &#x63A5;&#x6536;&#x72B6;&#x6001;&#x673A;typedef enum {    RX_STATE_IDLE,    RX_STATE_HEADER1,    RX_STATE_HEADER2,    RX_STATE_CMD,    RX_STATE_LEN_LOW,    RX_STATE_LEN_HIGH,    RX_STATE_DATA,    RX_STATE_CHECKSUM} rx_state_t;/** * @brief &#x521D;&#x59CB;&#x5316;&#x89E3;&#x6790;&#x5668; */void command_parser_init(void);/** * @brief &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x63A5;&#x6536;&#x72B6;&#x6001;&#x7684;&#x63A5;&#x53E3; * @return &#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x63A5;&#x6536;&#x72B6;&#x6001; */rx_state_t get_rx_state();/** * @brief &#x6309;&#x5B57;&#x8282;&#x63A5;&#x6536;&#x5E76;&#x89E3;&#x6790;&#x547D;&#x4EE4;&#x5E27; * @param byte &#x5B57;&#x8282;&#x6570;&#x636E; * @return parse_result_t &#x89E3;&#x6790;&#x7ED3;&#x679C; */parse_result_t command_process_byte(uint8_t byte);/** * @brief &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x547D;&#x4EE4;&#x5E27; * @param frame &#x7A7A;&#x547D;&#x4EE4;&#x5E27;&#x7C7B;&#x578B; * @return true &#x83B7;&#x53D6;&#x6210;&#x529F;&#xFF0C;&#x547D;&#x4EE4;&#x5E27;&#x8FD8;&#x6CA1;&#x6709;&#x51C6;&#x5907;&#x597D; * @return false &#x83B7;&#x53D6;&#x5931;&#x8D25; */bool command_get_frame(command_frame_t *frame);/** * @brief &#x6784;&#x5EFA;&#x547D;&#x4EE4;&#x5E27; * @param cmd &#x547D;&#x4EE4;&#x5B57; * @param data &#x6570;&#x636E; * @param data_len &#x6570;&#x636E;&#x957F;&#x5EA6; * @param output_buffer &#x8F93;&#x51FA;&#x7F13;&#x51B2; * @return uint16_t &#x547D;&#x4EE4;&#x5E27;&#x957F;&#x5EA6;&#xFF0C;&#x5E27;&#x5934;+&#x547D;&#x4EE4;&#x5B57;+&#x6570;&#x636E;&#x4F4D;+&#x6570;&#x636E;+&#x6821;&#x9A8C; */uint16_t command_build_frame(command_type_t cmd, uint8_t *data,                             uint16_t data_len, uint8_t *output_buffer);#ifdef __cplusplus}#endif#endif\n\n//boot_cmd.c#include &quot;boot_cmd.h&quot;#include &quot;string.h&quot;static rx_state_t rx_state = RX_STATE_HEADER1;static command_frame_t current_frame;static uint16_t data_recived_size = 0;static bool frame_ready = false;static void clear_command_frame(command_frame_t *frame) {    memset(frame, 0, sizeof(command_frame_t));}/** * @brief &#x8BA1;&#x7B97;&#x6821;&#x9A8C;&#x548C; * @param data &#x4ECE;&#x547D;&#x4EE4;&#x5B57;&#x5230;&#x6570;&#x636E;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E; * @param length &#x957F;&#x5EA6;&#x4E3A;&#x547D;&#x4EE4;(1byte)+&#x6570;&#x636E;&#x957F;&#x5EA6;&#x4FE1;&#x606F;(2byte)+&#x5B9E;&#x9645;&#x6570;&#x636E;&#x957F;&#x5EA6; * @return */static uint8_t calculate_checksum(uint8_t *data, uint16_t length) {    uint8_t sum = 0;    for (uint16_t i = 0; i &lt; length; i++) {        sum += data[i];    }    return (uint8_t)~sum;}/** * @brief &#x9A8C;&#x8BC1;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5408;&#x6CD5; * @param cmd &#x547D;&#x4EE4;&#x5B57; * @return */static bool is_valid_command(command_type_t cmd) {    return ((cmd &gt; CMD_VALID_START) &amp;&amp; (cmd &lt; CMD_VALID_END));}void command_parser_init(void) {    rx_state = RX_STATE_HEADER1;    clear_command_frame(&amp;current_frame);    data_recived_size = 0;    frame_ready = false;}rx_state_t get_rx_state(void) { return rx_state; }parse_result_t command_process_byte(uint8_t byte) {    parse_result_t ret;    switch (rx_state) {    case RX_STATE_HEADER1:        if (byte == FRAME_HEADER1) {            rx_state = RX_STATE_HEADER2;        } else {            rx_state = RX_STATE_HEADER1;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_HEADER2:        if (byte == FRAME_HEADER2) {            rx_state = RX_STATE_CMD;        } else {            rx_state = RX_STATE_HEADER1;            return PARSE_ERROR_HEADER;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_CMD:        if (is_valid_command((command_type_t)byte)) {            current_frame.command = (command_type_t)byte;            rx_state = RX_STATE_LEN_LOW;            ret = PARSE_INCOMPLETE;        } else {            rx_state = RX_STATE_HEADER1;            ret = PARSE_ERROR_INVALID_CMD;        }        break;    case RX_STATE_LEN_LOW:        current_frame.data_length = byte;        rx_state = RX_STATE_LEN_HIGH;        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_LEN_HIGH:        data_recived_size = 0;        current_frame.data_length |= (byte &lt;&lt; 8);        if (current_frame.data_length == 0) {            rx_state = RX_STATE_CHECKSUM;            ret = PARSE_INCOMPLETE;        } else if (current_frame.data_length &lt; FRAME_SIZE) {            rx_state = RX_STATE_DATA;            ret = PARSE_INCOMPLETE;        } else {            rx_state = RX_STATE_HEADER1;            ret = PARSE_ERROR_LENGTH;        }        break;    case RX_STATE_DATA:        current_frame.data[data_recived_size++] = byte;        if (data_recived_size == current_frame.data_length) {            rx_state = RX_STATE_CHECKSUM;        }        ret = PARSE_INCOMPLETE;        break;    case RX_STATE_CHECKSUM:        current_frame.checksum = byte;        uint8_t checksum;        uint16_t header_size =            sizeof(current_frame.command) + sizeof(current_frame.data_length);        checksum = calculate_checksum((uint8_t *)&amp;current_frame.command,                                      header_size + current_frame.data_length);        if (checksum == current_frame.checksum) {            frame_ready = true;            ret = PARSE_SUCCESS;        } else {            ret = PARSE_ERROR_CHECKSUM;        }        rx_state = RX_STATE_HEADER1;        break;    default:        rx_state = RX_STATE_HEADER1;        ret = PARSE_INCOMPLETE;        break;    }    return ret;}bool command_get_frame(command_frame_t *frame) {    if (frame_ready) {        memcpy(frame, &amp;current_frame, sizeof(command_frame_t));        frame_ready = false;        clear_command_frame(&amp;current_frame);        return true;    }    return false;}uint16_t command_build_frame(command_type_t cmd, uint8_t *data,                             uint16_t data_len, uint8_t *output_buffer) {    uint16_t index = 0;    // &#x5E27;&#x5934;    output_buffer[index++] = FRAME_HEADER1;    output_buffer[index++] = FRAME_HEADER2;    // &#x547D;&#x4EE4;&#x5B57;    output_buffer[index++] = (uint8_t)cmd;    // &#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF08;&#x5C0F;&#x7AEF;&#x5E8F;&#xFF09;    output_buffer[index++] = (uint8_t)(data_len &amp; 0xff);        // &#x4F4E;&#x516B;&#x4F4D;    output_buffer[index++] = (uint8_t)((data_len &gt;&gt; 8) &amp; 0xff); // &#x9AD8;&#x516B;&#x4F4D;    // &#x6570;&#x636E;    if (data != NULL &amp;&amp; data_len &gt; 0) {        memcpy(&amp;output_buffer[index], data, data_len);        index += data_len;    }    // &#x6821;&#x9A8C;&#x548C;    uint8_t checksum = calculate_checksum(&amp;output_buffer[2], index - 2);    output_buffer[index++] = checksum;    return index;}\n\n&#x603B;&#x7ED3;\n&#x4E3B;&#x8981;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x4E86;&#x547D;&#x4EE4;&#x5E27;&#x89E3;&#x6790;&#xFF0C;&#x547D;&#x4EE4;&#x5E27;&#x6784;&#x5EFA;&#x6BD4;&#x8F83;&#x7B80;&#x5355;\nbootloader&#x6A21;&#x5F0F;&#x4E2D;&#x4E0D;&#x518D;&#x53EA;&#x662F;led&#x95EA;&#x70C1;&#xFF0C;&#x800C;&#x662F;&#x547D;&#x4EE4;&#x89E3;&#x6790;&#x5668;\n&#x4E0B;&#x4F4D;&#x673A;&#x56DE;&#x5E94;&#x4E0A;&#x4F4D;&#x673A;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x51FD;&#x6570;&#x6307;&#x9488;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x4F20;&#x5165;&#x51FD;&#x6570;&#x5C31;&#x884C;\n&#x4EE5;&#x4E0A;&#x53EA;&#x662F;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#xFF0C;&#x5BF9;&#x4E8E;&#x52A0;&#x8F7D;&#x56FA;&#x4EF6;&#x548C;CRC32&#x6821;&#x9A8C;&#x8FD8;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;\n\n","categories":["Bootloader"],"tags":["STM32","BootLoader"]},{"title":"嵌入式boot开发（一）","url":"/2025/09/18/%E5%B5%8C%E5%85%A5%E5%BC%8Fboot%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89/","content":"&#x524D;&#x8A00;&#x5728;&#x5D4C;&#x5165;&#x5F0F;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5C06;&#x7A0B;&#x5E8F;&#x653E;&#x5728;&#x5916;&#x90E8;flash&#xFF0C;&#x8FDC;&#x7A0B;&#x5347;&#x7EA7;&#xFF0C;&#x79BB;&#x7EBF;&#x70E7;&#x5F55;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E2A;bootloader&#x7A0B;&#x5E8F;&#x6765;&#x5F15;&#x5BFC;&#x7A0B;&#x5E8F;&#x7684;&#x52A0;&#x8F7D;&#x3002;boot&#x8BD1;&#x4E3A;&#x5F15;&#x5BFC;&#xFF0C;loader&#x8BD1;&#x4E3A;&#x52A0;&#x8F7D;&#x3002;&#x672C;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x65E8;&#x5728;&#x8BB0;&#x5F55;&#x5B66;&#x4E60;&#x7F16;&#x5199;boot&#x7A0B;&#x5E8F;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E73;&#x53F0;&#x4E3A;STM32H750VBT6&#xFF0C;HAL&#x5E93;&#x3002;&#x5176;&#x4ED6;&#x5E73;&#x53F0;&#x80AF;&#x7565;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x60F3;&#x6CD5;&#x662F;&#x4E00;&#x81F4;&#x7684;\nbootloader&#x7528;&#x6765;&#x505A;&#x4EC0;&#x4E48;boot&#x52A0;&#x8F7D;&#x7A0B;&#x5E8F;&#xFF0C;&#x81EA;&#x7136;&#x5C31;&#x9700;&#x8981;&#x77E5;&#x9053;&#x7A0B;&#x5E8F;&#x5728;&#x54EA;&#x91CC;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x68C0;&#x6D4B;app&#x662F;&#x5426;&#x88AB;&#x5199;&#x5165;&#x5230;&#x6307;&#x5B9A;&#x5730;&#x70B9; is_application_valid() ,&#x5982;&#x679C;app&#x5730;&#x5740;&#x6709;&#x7A0B;&#x5E8F;&#xFF0C;&#x5219; jump_to_application() &#xFF0C;&#x5426;&#x5219;&#x5C31;&#x8FDB;&#x5165; bootloader_mode() &#x3002;\nboot&#x662F;&#x4E0A;&#x7535;&#x540E;&#x6267;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x5730;&#x5740;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x4F46;&#x662F;app&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x5730;&#x5740; APP_ADDRESS &#xFF0C;&#x6211;&#x6682;&#x65F6;&#x5C06;app&#x653E;&#x5728;0x08010000&#x3002;\nboot&#x90E8;&#x5206;&#x5927;&#x6982;&#x770B;&#x8D77;&#x6765;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;\n//bootloaderint main(void) {    HAL_Init();    SystemClock_Config();    /* Initialize all configured peripherals */    MX_GPIO_Init();    MX_QUADSPI_Init();    /* USER CODE BEGIN 2 */    LED_InitDev(&amp;LED, LED_GPIO_Port, LED_Pin, 1);    KEY_InitDev(&amp;K1, K1_GPIO_Port, K1_Pin, 1);    LED_On(&amp;LED);    if (is_application_valid()) {        jump_to_application();    } else {        bootloader_mode();    }    /* USER CODE END 2 */    /* Infinite loop */    /* USER CODE BEGIN WHILE */    while (1) {    }    /* USER CODE END 3 */}\n\n&#x68C0;&#x6D4B;app&#xFF0C;&#x8DF3;&#x8F6C;&#xFF0C;boot&#x6A21;&#x5F0F;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x5B9E;&#x73B0;\n&#x68C0;&#x6D4B;app&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x68C0;&#x6D4B;&#x6808;&#x9876;&#x6307;&#x9488;&#x4F7F;&#x5176;&#x4E0D;&#x8981;&#x8D8A;&#x754C;&#x3002; &#x68C0;&#x6D4B; Reset_Handler &#x7A0B;&#x5E8F;&#x6307;&#x9488;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x56E0;&#x4E3A;&#x7A0B;&#x5E8F;&#x9ED8;&#x8BA4;&#x5165;&#x53E3;&#x70B9;&#x662F;&#x5B83;&#x3002;\n&#x8DF3;&#x8F6C;app&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5173;&#x95ED;&#x4E2D;&#x65AD;&#xFF0C;&#x8BBE;&#x7F6E;&#x6808;&#x9876;&#x6307;&#x9488;&#xFF0C;&#x91CD;&#x8BBE;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x7684;&#x504F;&#x79FB;&#x503C;&#xFF0C;&#x8DF3;&#x8F6C;&#x5230; Reset_Handler &#xFF0C; Reset_Handler &#x7684;&#x5185;&#x5BB9;&#x5728;&#x542F;&#x52A8;&#x6587;&#x4EF6; startup_stm32h750xx.s&#x4E2D;&#xFF0C;&#x5176;&#x529F;&#x80FD;&#x4E3B;&#x8981;&#x662F;&#x521D;&#x59CB;&#x5316;&#x3002;\n\n&#x6808;&#x9876;&#x6307;&#x9488;&#x548C; Reset_Handler &#x5728;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x7684;&#x5F00;&#x5934;&#x548C;&#x504F;&#x79FB;4&#x5B57;&#x8282;&#x7684;&#x5730;&#x65B9;&#x800C;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x5728;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x5934;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x6765;&#x8BBF;&#x95EE;&#x8FD9;&#x4E24;&#x4E2A;&#x5730;&#x5740;\n// &#x8FD9;&#x4E0D;&#x662F;&#x5904;&#x7406;&#x5668;&#x8981;&#x6C42;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x6211;&#x4EEC;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x8BBF;&#x95EE;&#x800C;&#x5B9A;&#x4E49;&#x7684;typedef struct {    uint32_t stack_ptr;      // &#x504F;&#x79FB;0x00: &#x521D;&#x59CB;&#x6808;&#x6307;&#x9488;    pFunction reset_handler; // &#x504F;&#x79FB;0x04: &#x590D;&#x4F4D;&#x5904;&#x7406;&#x7A0B;&#x5E8F;    // &#x540E;&#x7EED;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#xFF0C;&#x4F46;Bootloader&#x901A;&#x5E38;&#x53EA;&#x9700;&#x8981;&#x524D;&#x4E24;&#x4E2A;} VectorTable_t;\n\nis_application_valid()\n&#x8FD9;&#x91CC;&#x6211;&#x7684;ram&#x5927;&#x5C0F;&#x662F;0x20000&#x4E5F;&#x5C31;&#x662F;128kb\nreset_handler&#x5730;&#x5740;&#x53D8;&#x91CF;&#x7EDD;&#x5BF9;&#x5927;&#x4E8E;app&#x8D77;&#x59CB;&#x5730;&#x5740;&#xFF0C;&#x4F46;&#x662F;&#x5C0F;&#x4E8E;flash&#x6700;&#x5927;&#x503C;\n&#x5982;&#x679C;flash&#x88AB;&#x64E6;&#x9664;&#x5219;&#x5176;&#x503C;&#x4E3A;&#x5168;F/0&#xFF0C;&#x901A;&#x8FC7;&#x68C0;&#x6D4B;app&#x5730;&#x5740;&#x540E;16&#x4E2A;&#x5B57;&#x6765;&#x5224;&#x65AD;app&#x5730;&#x5740;&#x662F;&#x5426;&#x6709;&#x7A0B;&#x5E8F;\n\nuint8_t is_application_valid(void) {    //&#x5C06;app&#x5730;&#x5740;&#x5F3A;&#x884C;&#x8F6C;&#x6362;&#x4E3A;&#x6307;&#x9488;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x6307;&#x9488;&#x8BBF;&#x95EE;    const VectorTable_t *app_vector_table = (VectorTable_t *)APP_ADDRESS;    // check stack ptr is in valid addr scoop    // stm32 RAM usually start 0x2000 0000    if ((app_vector_table-&gt;stack_ptr &lt; 0x20000000) ||        (app_vector_table-&gt;stack_ptr &gt; 0x20020000)) {        return 0;    }    // check reset handle ptr is in valid addr scoop    uint32_t reset_handler = (uint32_t)app_vector_table-&gt;reset_handler;    if (reset_handler &lt; APP_ADDRESS ||        reset_handler &gt; FLASH_END) { /* &#x5FC5;&#x987B;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F; Flash &#x533A;&#x57DF;&#x5185; */        return 0;    }    // check irq table is 0 or 1 (esare state)    uint32_t *app_start = (uint32_t *)APP_ADDRESS;    for (int i = 0; i &lt; 16; i++) // check the first 16 word    {        if (app_start[i] != 0xFFFFFFFF &amp;&amp; app_start[i] != 0x00000000) {            // not empty data, app exit            // printf(&quot;Application validation passed\\r\\n&quot;);            return 1;        }    }    return 0;}\n\njump_to_application()&#x8DF3;&#x8F6C;app&#x65F6;&#x9700;&#x8981;&#x5148;&#x5173;&#x95ED;&#x4E2D;&#x65AD;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x5DF2;&#x7ECF;&#x5173;&#x95ED;&#x4E2D;&#x65AD;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;app&#x51FD;&#x6570;&#x6267;&#x884C;&#x65F6;&#x4E00;&#x5B9A;&#x8981;&#x6253;&#x5F00;\nvoid jump_to_application(void) {    const VectorTable_t *app_vector_table = (VectorTable_t *)APP_ADDRESS;    // disabel irq    __disable_irq();    // set top stack pointer    __set_MSP(app_vector_table-&gt;stack_ptr);    // set irq table offset    SCB-&gt;VTOR = APP_ADDRESS;    // jump to app reset handle programe    app_vector_table-&gt;reset_handler();    // if jump defeated, programe don&apos;t run to here    while (1)        ;}\n\nbootloader_mode()&#x56E0;&#x4E3A;&#x53EA;&#x662F;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x7A0B;&#x5E8F;&#x8DF3;&#x8F6C;&#xFF0C;&#x6240;&#x4EE5;boot&#x6A21;&#x5F0F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;1s&#x7684;&#x706F;&#x540E;&#x7EED;&#x53EF;&#x4EE5;&#x6539;&#x4E3A;&#x624B;&#x52A8;&#x8FDB;&#x5165;boot&#x6A21;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x5B9E;&#x73B0;&#x56FA;&#x4EF6;&#x66F4;&#x65B0;&#x7B49;&#x529F;&#x80FD;\nvoid bootloader_mode(void) {    // app addr is no programe    while (1) {        LED_Blink(&amp;LED, 1000);    }}\n\n&#x7F16;&#x8BD1;boot&#x76F4;&#x63A5;&#x7F16;&#x8BD1;&#xFF0C;&#x4E0D;&#x8981;&#x4FEE;&#x6539;&#x4EFB;&#x4F55;&#x8BBE;&#x7F6E;&#xFF0C;&#x5C31;&#x548C;&#x5E73;&#x5E38;&#x7F16;&#x8BD1;&#x88F8;&#x673A;&#x7A0B;&#x5E8F;&#x90A3;&#x6837;\napp&#x8BE5;&#x505A;&#x4EC0;&#x4E48;?&#x9884;&#x5B9A;&#x4E49;app&#x5730;&#x5740; #define APP_ADDRESS 0x08010000\napp&#x7A0B;&#x5E8F;app&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x5728;&#x4E3B;&#x51FD;&#x6570;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x6267;&#x884C; SCB-&gt;VTOR = APP_ADDRESS;\n&#x4E3A;&#x4EC0;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x662F;&#x5728; jump_to_application() &#x51FD;&#x6570;&#x4E2D;&#x6267;&#x884C;&#x8FC7;&#x4E00;&#x6B21;&#x4E86;&#x5417;&#x56E0;&#x4E3A;VTOR&#xFF08;Vector Table Offset Register&#xFF09;&#x662F;&#x4E00;&#x4E2A;&#x6613;&#x5931;&#x6027;&#x5BC4;&#x5B58;&#x5668;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#xFF1A;\n\n&#x590D;&#x4F4D;&#x4F1A;&#x6E05;&#x9664;VTOR&#xFF1A;&#x4EFB;&#x4F55;&#x5F62;&#x5F0F;&#x7684;&#x7CFB;&#x7EDF;&#x590D;&#x4F4D;&#xFF08;&#x5305;&#x62EC;&#x8F6F;&#x4EF6;&#x590D;&#x4F4D;&#xFF09;&#x90FD;&#x4F1A;&#x5C06;VTOR&#x91CD;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;&#xFF08;&#x901A;&#x5E38;&#x662F;0&#xFF09;\n&#x7535;&#x6E90;&#x5468;&#x671F;&#x4F1A;&#x6E05;&#x9664;VTOR&#xFF1A;&#x65AD;&#x7535;&#x518D;&#x4E0A;&#x7535;&#x4E5F;&#x4F1A;&#x91CD;&#x7F6E;VTOR\n&#x4E0D;&#x662F;&#x6C38;&#x4E45;&#x6027;&#x8BBE;&#x7F6E;&#xFF1A;VTOR&#x4E0D;&#x4F1A;&#x5728;&#x590D;&#x4F4D;&#x4E4B;&#x95F4;&#x4FDD;&#x6301;&#x5176;&#x503C;\n\nint main(void) {    /* USER CODE BEGIN 1 */    SCB-&gt;VTOR = APP_ADDRESS;    __enable_irq();    /* USER CODE END 1 *    /* Reset of all peripherals, Initializes the Flash interface and the     * Systick. */    HAL_Init();    /* Configure the system clock */    SystemClock_Config();    /* Initialize all configured peripherals */    MX_GPIO_Init();    MX_QUADSPI_Init();    /* USER CODE BEGIN 2 */    LED_InitDev(&amp;LED, LED_GPIO_Port, LED_Pin, 1);    KEY_InitDev(&amp;K1, K1_GPIO_Port, K1_Pin, 1);    printf(&quot;test&quot;);    /* USER CODE END 2 */    /* Infinite loop */    /* USER CODE BEGIN WHILE */    while (1) {        /* USER CODE END WHILE */        LED_Blink(&amp;LED, 100);        /* USER CODE BEGIN 3 */    }    /* USER CODE END 3 */}\n\n&#x8FDB;&#x5165;app&#x7A0B;&#x5E8F;&#x540E;&#xFF0C;led&#x706F;&#x5FEB;&#x95EA;&#xFF0C;&#x4E0E;boot&#x7684;&#x6162;&#x95EA;&#x5206;&#x5F00;\n&#x7F16;&#x8BD1;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F;armgcc&#x7F16;&#x8BD1;&#x94FE;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;.ld&#x6587;&#x4EF6;&#x7EC4;&#x7EC7;&#x7F16;&#x8BD1;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5728;cubemx&#x751F;&#x6210;&#x7684; STM32H750XX_FLASH.ld &#x6587;&#x4EF6;&#x4E2D;&#x4FEE;&#x6539;\n/* Specify the memory areas */MEMORY{DTCMRAM (xrw)      : ORIGIN = 0x20000000, LENGTH = 128KRAM (xrw)      : ORIGIN = 0x24000000, LENGTH = 512KRAM_D2 (xrw)      : ORIGIN = 0x30000000, LENGTH = 288KRAM_D3 (xrw)      : ORIGIN = 0x38000000, LENGTH = 64KITCMRAM (xrw)      : ORIGIN = 0x00000000, LENGTH = 64KFLASH (rx)      : ORIGIN = 0x08010000, LENGTH = 128K  //&#x91CD;&#x70B9;&#xFF0C;&#x4E0E;APP_ADDRESS&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x6CE8;&#x610F;ram&#x548C;flash&#x5927;&#x5C0F;}\n\nkeil&#x8BBE;&#x7F6E;&#x5982;&#x679C;&#x662F;keil&#xFF0C;&#x9B54;&#x672F;&#x68D2;-&gt;target &#x4E0B;&#x65B9;&#x6709;&#x8BBE;&#x7F6E;ROM&#x7684;&#x8D77;&#x59CB;&#x5730;&#x5740;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;APP_ADDRESS&#x7684;&#x503C;\n&#x70E7;&#x5F55;&#x5148;&#x70E7;&#x5F55;boot&#xFF0C;led&#x7F13;&#x6162;&#x95EA;&#x70C1;&#x5219;&#x8BF4;&#x660E;boot&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x518D;&#x70E7;&#x5F55;app&#xFF0C;led&#x5FEB;&#x95EA;&#x8BF4;&#x660E;app&#x8FD0;&#x884C;&#x6B63;&#x5E38;&#x590D;&#x4F4D;&#x4E00;&#x4E0B;&#xFF0C;led&#x5FEB;&#x95EA;\nopenocd&#x6CA1;&#x8BD5;&#x8FC7;&#xFF0C;&#x4F46;&#x662F;openocd&#x9ED8;&#x8BA4;&#x5168;&#x64E6;&#x9664;flash&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F7F;&#x4E4B;&#x53EA;&#x64E6;&#x9664;&#x5199;&#x5165;&#x7684;&#x7A7A;&#x95F4;\nSTM32Cubeprogrammer&#x5728;&#x4E0B;&#x8F7D;&#x65F6;&#xFF0C;&#x52FE;&#x9009;&#x5728;&#x7F16;&#x7A0B;&#x4E4B;&#x524D;&#x4E0D;&#x8FDB;&#x884C;&#x95EA;&#x5B58;&#x64E6;&#x9664;&#x3002;&#x70E7;&#x5F55;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x5907;&#x5185;&#x5B58;&#x67E5;&#x770B;&#x7684;&#x5DE5;&#x5177;&#x67E5;&#x770B;boot&#x7A0B;&#x5E8F;(&#x4F4D;&#x4E8E;0x0800 0000)&#x548C;app&#x7A0B;&#x5E8F;(0x0801 0000)&#x6709;&#x6CA1;&#x6709;&#x7A0B;&#x5E8F;&#x5199;&#x5165;\n&#x8865;&#x5145;\nled&#x9A71;&#x52A8;&#x968F;&#x4FBF;&#x5199;&#x4E00;&#x4E0B;&#x5C31;&#x884C;&#xFF0C;&#x95EA;&#x70C1;&#x7528;&#x5EF6;&#x8FDF;&#x51FD;&#x6570;\n&#x6211;&#x662F;armgcc&#x7F16;&#x8BD1;&#x94FE;&#xFF0C;&#x4F46;&#x662F;keil&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x6837;&#x7684;\n&#x4E00;&#x5B9A;&#x4E00;&#x5B9A;&#x8981;&#x8BB0;&#x4F4F;&#xFF0C;app&#x7F16;&#x8BD1;&#x65F6;&#x8981;&#x5148;&#x4FEE;&#x6539;flash&#x8D77;&#x59CB;&#x5730;&#x5740;\n\n&#x7A0B;&#x5E8F;&#x603B;&#x89C8;&#x901A;&#x8FC7;&#x7F16;&#x8BD1;&#x5F00;&#x5173;&#x6765;&#x63A7;&#x5236;&#x7F16;&#x8BD1;&#x51FA;&#x4EC0;&#x4E48;&#x7A0B;&#x5E8F;&#xFF0C;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;\n/* USER CODE BEGIN Header *//** ****************************************************************************** * @file           : main.c * @brief          : Main program body ****************************************************************************** * @attention * * Copyright (c) 2025 STMicroelectronics. * All rights reserved. * * This software is licensed under terms that can be found in the LICENSE file * in the root directory of this software component. * If no LICENSE file comes with this software, it is provided AS-IS. * ****************************************************************************** *//* USER CODE END Header *//* Includes ------------------------------------------------------------------*/#include &quot;main.h&quot;#include &quot;gpio.h&quot;#include &quot;quadspi.h&quot;/* Private includes ----------------------------------------------------------*//* USER CODE BEGIN Includes */#include &quot;key_driver.h&quot;#include &quot;led_driver.h&quot;#include &lt;stdio.h&gt;/* USER CODE END Includes *//* Private typedef -----------------------------------------------------------*//* USER CODE BEGIN PTD *//* USER CODE END PTD *//* Private define ------------------------------------------------------------*//* USER CODE BEGIN PD */#define BOOT// #define APP#define APP_ADDRESS 0x08010000/* USER CODE END PD *//* Private macro -------------------------------------------------------------*//* USER CODE BEGIN PM */typedef void (*pFunction)(void);typedef struct {    uint32_t stack_ptr;    pFunction reset_handler;} VectorTable_t;/* USER CODE END PM *//* Private variables ---------------------------------------------------------*//* USER CODE BEGIN PV */LED_Device_t LED;KEY_Device_t K1;/* USER CODE END PV *//* Private function prototypes -----------------------------------------------*/void SystemClock_Config(void);static void MPU_Config(void);/* USER CODE BEGIN PFP */uint8_t is_application_valid(void);void jump_to_application(void);void bootloader_mode(void);/* USER CODE END PFP *//* Private user code ---------------------------------------------------------*//* USER CODE BEGIN 0 *//* USER CODE END 0 */#if defined(BOOT)// start:0x0800 0000 size:0x20000/** * @brief  The application entry point. * @retval int */int main(void) {    /* USER CODE BEGIN 1 */    /* USER CODE END 1 */    /* MPU     * Configuration--------------------------------------------------------*/    // MPU_Config();    /* MCU     * Configuration--------------------------------------------------------*/    /* Reset of all peripherals, Initializes the Flash interface and the     * Systick. */    HAL_Init();    /* USER CODE BEGIN Init */    /* USER CODE END Init */    /* Configure the system clock */    SystemClock_Config();    /* USER CODE BEGIN SysInit */    /* USER CODE END SysInit */    /* Initialize all configured peripherals */    MX_GPIO_Init();    MX_QUADSPI_Init();    /* USER CODE BEGIN 2 */    LED_InitDev(&amp;LED, LED_GPIO_Port, LED_Pin, 1);    KEY_InitDev(&amp;K1, K1_GPIO_Port, K1_Pin, 1);    printf(&quot;test&quot;);    LED_On(&amp;LED);    if (is_application_valid()) {        jump_to_application();    } else {        bootloader_mode();    }    /* USER CODE END 2 */    /* Infinite loop */    /* USER CODE BEGIN WHILE */    while (1) {        /* USER CODE END WHILE */        /* USER CODE BEGIN 3 */    }    /* USER CODE END 3 */}#endif#if defined(APP)// start:0x0801 0000 size:0x10000/** * @brief  The application entry point. * @retval int */int main(void) {    /* USER CODE BEGIN 1 */    SCB-&gt;VTOR = APP_ADDRESS;    __enable_irq();    /* USER CODE END 1 */    /* MPU     * Configuration--------------------------------------------------------*/    // MPU_Config();    /* MCU     * Configuration--------------------------------------------------------*/    /* Reset of all peripherals, Initializes the Flash interface and the     * Systick. */    HAL_Init();    /* USER CODE BEGIN Init */    /* USER CODE END Init */    /* Configure the system clock */    SystemClock_Config();    /* USER CODE BEGIN SysInit */    /* USER CODE END SysInit */    /* Initialize all configured peripherals */    MX_GPIO_Init();    MX_QUADSPI_Init();    /* USER CODE BEGIN 2 */    LED_InitDev(&amp;LED, LED_GPIO_Port, LED_Pin, 1);    KEY_InitDev(&amp;K1, K1_GPIO_Port, K1_Pin, 1);    printf(&quot;test&quot;);    /* USER CODE END 2 */    /* Infinite loop */    /* USER CODE BEGIN WHILE */    while (1) {        /* USER CODE END WHILE */        LED_Blink(&amp;LED, 100);        /* USER CODE BEGIN 3 */    }    /* USER CODE END 3 */}#endif/** * @brief System Clock Configuration * @retval None */void SystemClock_Config(void) {    RCC_OscInitTypeDef RCC_OscInitStruct = {0};    RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};    /** Supply configuration update enable     */    HAL_PWREx_ConfigSupply(PWR_LDO_SUPPLY);    /** Configure the main internal regulator output voltage     */    __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);    while (!__HAL_PWR_GET_FLAG(PWR_FLAG_VOSRDY)) {    }    /** Initializes the RCC Oscillators according to the specified parameters     * in the RCC_OscInitTypeDef structure.     */    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;    RCC_OscInitStruct.HSEState = RCC_HSE_ON;    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;    RCC_OscInitStruct.PLL.PLLM = 5;    RCC_OscInitStruct.PLL.PLLN = 160;    RCC_OscInitStruct.PLL.PLLP = 2;    RCC_OscInitStruct.PLL.PLLQ = 2;    RCC_OscInitStruct.PLL.PLLR = 2;    RCC_OscInitStruct.PLL.PLLRGE = RCC_PLL1VCIRANGE_2;    RCC_OscInitStruct.PLL.PLLVCOSEL = RCC_PLL1VCOWIDE;    RCC_OscInitStruct.PLL.PLLFRACN = 0;    if (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK) {        Error_Handler();    }    /** Initializes the CPU, AHB and APB buses clocks     */    RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK |                                  RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2 |                                  RCC_CLOCKTYPE_D3PCLK1 | RCC_CLOCKTYPE_D1PCLK1;    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;    RCC_ClkInitStruct.SYSCLKDivider = RCC_SYSCLK_DIV1;    RCC_ClkInitStruct.AHBCLKDivider = RCC_HCLK_DIV2;    RCC_ClkInitStruct.APB3CLKDivider = RCC_APB3_DIV2;    RCC_ClkInitStruct.APB1CLKDivider = RCC_APB1_DIV2;    RCC_ClkInitStruct.APB2CLKDivider = RCC_APB2_DIV2;    RCC_ClkInitStruct.APB4CLKDivider = RCC_APB4_DIV2;    if (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK) {        Error_Handler();    }}/* USER CODE BEGIN 4 */uint8_t is_application_valid(void) {    // RAM_size = 20000; // DTCMRAM    // FLASH_size = 20000;    const VectorTable_t *app_vector_table = (VectorTable_t *)APP_ADDRESS;    // check stack ptr is in valid addr scoop    // stm32 RAM usually start 0x2000 0000    if ((app_vector_table-&gt;stack_ptr &lt; 0x20000000) ||        (app_vector_table-&gt;stack_ptr &gt; 0x20020000)) {        return 0;    }    // check reset handle ptr is in valid addr scoop    uint32_t reset_handler = (uint32_t)app_vector_table-&gt;reset_handler;    if (reset_handler &lt; APP_ADDRESS ||        reset_handler &gt; FLASH_END) { /* &#x5FC5;&#x987B;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F; Flash &#x533A;&#x57DF;&#x5185; */        return 0;    }    // check irq table is 0 or 1 (esare state)    uint32_t *app_start = (uint32_t *)APP_ADDRESS;    for (int i = 0; i &lt; 16; i++) // check the first 16 word    {        if (app_start[i] != 0xFFFFFFFF &amp;&amp; app_start[i] != 0x00000000) {            // not empty data, app exit            // printf(&quot;Application validation passed\\r\\n&quot;);            return 1;        }    }    return 0;}void jump_to_application(void) {    const VectorTable_t *app_vector_table = (VectorTable_t *)APP_ADDRESS;    // disabel irq    __disable_irq();    // set top stack pointer    __set_MSP(app_vector_table-&gt;stack_ptr);    // set irq table offset    SCB-&gt;VTOR = APP_ADDRESS;    // jump to app reset handle programe    app_vector_table-&gt;reset_handler();    // if jump defeated, programe don&apos;t run to here    while (1)        ;}void bootloader_mode(void) {    // app addr is no programe    while (1) {        LED_Blink(&amp;LED, 1000);    }}/* USER CODE END 4 *//* MPU Configuration */void MPU_Config(void) {    MPU_Region_InitTypeDef MPU_InitStruct = {0};    /* Disables the MPU */    HAL_MPU_Disable();    /** Initializes and configures the Region and the memory to be protected     */    MPU_InitStruct.Enable = MPU_REGION_ENABLE;    MPU_InitStruct.Number = MPU_REGION_NUMBER0;    MPU_InitStruct.BaseAddress = 0x0;    MPU_InitStruct.Size = MPU_REGION_SIZE_4GB;    MPU_InitStruct.SubRegionDisable = 0x87;    MPU_InitStruct.TypeExtField = MPU_TEX_LEVEL0;    MPU_InitStruct.AccessPermission = MPU_REGION_NO_ACCESS;    MPU_InitStruct.DisableExec = MPU_INSTRUCTION_ACCESS_DISABLE;    MPU_InitStruct.IsShareable = MPU_ACCESS_SHAREABLE;    MPU_InitStruct.IsCacheable = MPU_ACCESS_NOT_CACHEABLE;    MPU_InitStruct.IsBufferable = MPU_ACCESS_NOT_BUFFERABLE;    HAL_MPU_ConfigRegion(&amp;MPU_InitStruct);    /* Enables the MPU */    HAL_MPU_Enable(MPU_PRIVILEGED_DEFAULT);}/** * @brief  This function is executed in case of error occurrence. * @retval None */void Error_Handler(void) {    /* USER CODE BEGIN Error_Handler_Debug */    /* User can add his own implementation to report the HAL error return state     */    __disable_irq();    while (1) {    }    /* USER CODE END Error_Handler_Debug */}#ifdef USE_FULL_ASSERT/** * @brief  Reports the name of the source file and the source line number *         where the assert_param error has occurred. * @param  file: pointer to the source file name * @param  line: assert_param error line source number * @retval None */void assert_failed(uint8_t *file, uint32_t line) {    /* USER CODE BEGIN 6 */    /* User can add his own implementation to report the file name and line       number, ex: printf(&quot;Wrong parameters value: file %s on line %d\\r\\n&quot;,       file, line) */    /* USER CODE END 6 */}#endif /* USE_FULL_ASSERT */\n","categories":["Bootloader"],"tags":["STM32","BootLoader"]},{"title":"大学生想兼职赚钱就别指望还能学技术","url":"/2025/05/25/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%83%B3%E5%85%BC%E8%81%8C%E8%B5%9A%E9%92%B1%E5%B0%B1%E5%88%AB%E6%8C%87%E6%9C%9B%E8%BF%98%E8%83%BD%E5%AD%A6%E6%8A%80%E6%9C%AF/","content":"&#x524D;&#x8A00;&#x5728;5&#x6708;21&#x65E5;&#xFF0C;&#x6211;&#x6B63;&#x5F0F;&#x7ED3;&#x675F;&#x4E86;&#x6211;&#x5728;&#x5C11;&#x513F;&#x7F16;&#x7A0B;&#x57F9;&#x8BAD;&#x73ED;&#xFF08;&#x4EE5;&#x4E0B;&#x7B80;&#x79F0;&#x673A;&#x6784;&#xFF09;&#x7684;&#x517C;&#x804C;&#x5408;&#x8BA1;&#x4E09;&#x6B21;&#x4EA4;&#x4F5C;&#x54C1;&#x2014;&#x2014;350+650+150=1150&#xFF0C;&#x4E00;&#x5171;&#x4E03;&#x4E2A;&#xFF0C;&#x5386;&#x65F6;&#x4E09;&#x4E2A;&#x6708;&#xFF0C;&#x8BB0;&#x4E00;&#x4E0B;&#x8FD9;&#x6B21;&#x7684;&#x7ECF;&#x5386;&#x3002;&#x5148;&#x8BF4;&#x7ED3;&#x8BBA;&#xFF1A;&#x5927;&#x5B66;&#x751F;&#x5982;&#x679C;&#x662F;&#x4E3A;&#x4E86;&#x8D5A;&#x94B1;&#x5C31;&#x76F4;&#x63A5;&#x53BB;&#x8D5A;&#x94B1;&#x6700;&#x591A;&#x7684;&#x517C;&#x804C;&#xFF0C;&#x6BD4;&#x5982;&#x5BB6;&#x6559;&#x4E4B;&#x7C7B;&#x7684;&#xFF0C;&#x522B;&#x60F3;&#x7740;&#x53BB;&#x5E72;&#x81EA;&#x5DF1;&#x4E13;&#x4E1A;&#x76F8;&#x5173;&#x7684;&#x517C;&#x804C;&#x8FD8;&#x80FD;&#x8D5A;&#x94B1;&#xFF0C;&#x4F60;&#x7684;&#x65F6;&#x95F4;&#x5F88;&#x5B9D;&#x8D35;&#xFF0C;&#x800C;&#x4E14;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x5927;&#x6982;&#x7387;&#x4E0D;&#x662F;&#x4F60;&#x60F3;&#x7684;&#x90A3;&#x6837;&#x3002;\n\n\n&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;2&#x6708;21&#x65E5;&#x4ECE;&#x7FA4;&#x91CC;&#x770B;&#x5230;&#x6709;&#x4E2A;&#x673A;&#x6784;&#x9700;&#x8981;&#x4EBA;&#xFF0C;&#x8D1F;&#x8D23;&#x5236;&#x4F5C;&#x5D4C;&#x5165;&#x5F0F;&#x5C0F;&#x4F5C;&#x54C1;&#x548C;&#x53EF;&#x80FD;&#x7684;&#x6388;&#x8BFE;&#xFF0C;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x7684;&#x6211;&#x5F88;&#x5F00;&#x5FC3;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x517C;&#x804C;&#x548C;&#x6211;&#x7684;&#x4E13;&#x4E1A;&#x5F88;&#x5951;&#x5408;&#xFF0C;&#x4E8E;&#x662F;&#x5174;&#x51B2;&#x51B2;&#x7684;&#x8054;&#x7CFB;&#x5B66;&#x957F;&#x3002;&#x4EA4;&#x4E86;&#x4E00;&#x4E2A;&#x5C0F;&#x7B80;&#x5386;&#xFF0C;25&#x53F7;&#x7ED9;&#x4E86;&#x6211;&#x673A;&#x6784;&#x8D1F;&#x8D23;&#x4EBA;&#x8001;&#x5E08;&#x7684;&#x5FAE;&#x4FE1;&#xFF08;&#x4EE5;&#x4E0B;&#x7B80;&#x79F0;h&#x8001;&#x5E08;&#xFF09;  \n2&#x6708;25&#x65E5;&#x52A0;&#x4E0A;&#x5FAE;&#x4FE1;&#xFF0C;&#x786E;&#x8BA4;&#x4E86;&#x9762;&#x8BD5;&#x65F6;&#x95F4;&#x5728;2&#x6708;28&#x65E5;\n2&#x6708;28&#x65E5;&#x6211;&#x53BB;&#x7684;&#x524D;&#x4E00;&#x5929;&#xFF08;2.27&#xFF09;&#x6CA1;&#x6709;&#x518D;&#x548C;h&#x8001;&#x5E08;&#x786E;&#x8BA4;&#xFF0C;&#x4E8E;&#x662F;&#x88AB;&#x653E;&#x9E3D;&#x5B50;&#x4E86;&#x4E0D;&#x8FC7;h&#x8001;&#x5E08;&#x8BF4;&#x673A;&#x6784;&#x6709;&#x522B;&#x7684;&#x8001;&#x5E08;&#x5728;&#xFF0C;&#x8BA9;&#x6211;&#x4E0A;&#x53BB;&#x8FD8;&#x662F;&#x53BB;&#x641E;&#x4E86;&#x4E00;&#x6B21;&#x4E0D;&#x4F26;&#x4E0D;&#x7C7B;&#x7684;&#x201C;&#x9762;&#x8BD5;&#x201D;&#x3002;&#x6700;&#x540E;&#x53EA;&#x786E;&#x8BA4;&#x4E86;&#x4E0A;&#x73ED;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x6211;&#x4E3B;&#x8981;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x7ED9;&#x5C0F;&#x5B66;&#x751F;&#x505A;&#x79D1;&#x521B;&#x6BD4;&#x8D5B;&#x4F5C;&#x54C1;&#x3002;&#x4F46;&#x5176;&#x5B9E;&#x540E;&#x9762;&#x5C31;&#x662F;&#x6709;&#x65F6;&#x95F4;&#x8981;&#x505A;&#x4E1C;&#x897F;&#x624D;&#x53BB;&#x3002;\n\n&#x4E00;&#x5F00;&#x59CB;&#x53BB;&#x65E9;&#x4E86;&#xFF0C;&#x8FD8;&#x548C;&#x697C;&#x4E0B;&#x4FDD;&#x5B89;&#x804A;&#x4E86;&#x4E00;&#x4F1A;&#xFF0C;&#x6700;&#x540E;&#x4F1A;&#x63D0;&#x5230;\n\n3&#x6708;3&#x65E5;&#x665A;&#x4E0A;&#x548C;h&#x8001;&#x5E08;&#x5728;&#x5FAE;&#x4FE1;&#x4E0A;&#x786E;&#x8BA4;&#x4E86;&#x8981;&#x5E72;&#x5565;&#xFF0C;&#x7528;Arduino&#xFF0C;&#x8FD9;&#x4E2A;h&#x8001;&#x5E08;&#x975E;&#x5E38;&#x5728;&#x610F; &#x201C;&#x5F00;&#x6E90;&#x201D;&#xFF0C;&#x4ED6;&#x7ED9;&#x6211;&#x4E00;&#x4E9B;&#x5173;&#x4E8E;&#x6BD4;&#x8D5B;&#x7684;&#x8D44;&#x6599;&#x548C;&#x505A;&#x7684;&#x9879;&#x76EE;&#x90FD;&#x662F;&#x4ED6;&#x8BF4;&#x7684; &#x201C;&#x5F00;&#x6E90;&#x201D;&#x3002;&#x540E;&#x9762;&#x4F1A;&#x56DE;&#x6536;&#x4F0F;&#x7B14;&#x8FD8;&#x6709;&#x505A;&#x9879;&#x76EE;&#x9700;&#x8981;&#x7684;&#x786C;&#x4EF6;&#x6211;&#x5148;&#x81EA;&#x5DF1;&#x4E70;&#xFF0C;&#x540E;&#x9762;&#x4ED6;&#x5728;&#x8865;&#x7ED9;&#x6211;\n\ns&#x6240;&#x8C13;&#x5F00;&#x6E90;&#xFF0C;&#x70B9;&#x8FDB;&#x53BB;&#x4E00;&#x770B;&#xFF0C;&#x6709;&#x60F3;&#x6CD5;&#xFF0C;&#x4EE3;&#x7801;&#x2014;&#x2014;&#x53EA;&#x6709;&#x622A;&#x56FE;&#xFF0C;&#x56FE;&#x7EB8;&#x2014;&#x2014;&#x53EA;&#x8981;&#x56FE;&#x7247;&#xFF0C;&#x4EC0;&#x4E48;&#x6E90;&#x6587;&#x4EF6;&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x7136;&#x540E; &#x201C;&#x5F00;&#x6E90;&#x201D;\n\n&#x6B63;&#x5F0F;&#x5F00;&#x5DE5;&#x6B63;&#x5F0F;&#x5F00;&#x5DE5;&#x524D;&#x6B63;&#x5F0F;&#x548C;h&#x8001;&#x5E08;&#x89C1;&#x4E86;&#x4E00;&#x9762;&#xFF0C;&#x4EBA;&#x5F88;&#x4E0D;&#x9519;&#xFF0C;&#x8BF4;&#x8BDD;&#x4E5F;&#x5BA2;&#x6C14;&#xFF0C;&#x6CA1;&#x6709;&#x56E0;&#x4E3A;&#x6211;&#x662F;&#x5B66;&#x751F;&#x5C31;&#x600E;&#x4E48;&#x6837;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x867D;&#x7136;&#x5410;&#x69FD;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x8BA4;&#x771F;&#x5E72;&#x6211;&#x8BE5;&#x5E72;&#x7684;&#x6D3B;&#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;&#x786E;&#x8BA4;&#x4E0B;&#x6765;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x8D77;&#x4EF7;150&#xFF0C;&#x6839;&#x636E;&#x96BE;&#x5EA6;&#x4E0A;&#x8C03;&#x4EF7;&#x683C;&#x3002;  \n3&#x6708;11&#x65E5;&#x5F00;&#x59CB;&#x505A;&#xFF0C;&#x53BB;&#x4E86;&#x673A;&#x6784;&#xFF0C;&#x8BF4;&#x662F;&#x7ED9;&#x6211;&#x5206;&#x914D;&#x7535;&#x8111;&#xFF08;&#x8FD9;&#x4E2A;&#x6211;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x95EE;&#x8FC7;&#x4ED6;&#x4E86;&#xFF0C;&#x4ED6;&#x7ED9;&#x6211;&#x8BF4;&#x4E1C;&#x897F;&#x90FD;&#x6709;&#xFF09;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x673A;&#x6784;&#x6388;&#x8BFE;&#x7684;&#x8001;&#x5E08;&#x7684;&#x7B14;&#x8BB0;&#x672C;&#xFF0C;&#x8C01;&#x4E0D;&#x5728;&#x5C31;&#x628A;&#x8C01;&#x7684;&#x7ED9;&#x6211;&#xFF0C;&#x800C;&#x4E14;&#x95EE;&#x7684;&#x65F6;&#x5019;&#x54EA;&#x91CC;&#x7684;&#x8001;&#x5E08;&#x4E5F;&#x4E0D;&#x6E05;&#x695A;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x3002;&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x5C31;&#x662F;&#x72EC;&#x7ACB;&#x51FA;&#x6765;&#x5E72;&#x6D3B;&#xFF0C;&#x548C;&#x4ED6;&#x4EEC;&#x6CA1;&#x6709;&#x4EA4;&#x96C6;&#x975E;&#x5E38;&#x53E4;&#x8001;&#x7684;&#x8054;&#x60F3;&#x5546;&#x52A1;&#x672C;&#xFF0C;&#x6CA1;&#x6709;&#x7535;&#x6C60;&#xFF0C;&#x5361;&#x7684;&#x6279;&#x7206;&#x3002;&#x6839;&#x672C;&#x6CA1;&#x6CD5;&#x7528;&#xFF0C;&#x78E8;&#x8E6D;&#x4E86;&#x4E00;&#x4E0B;&#x5348;&#x6211;&#x5C31;&#x8D70;&#x4E86;&#xFF0C;&#x540E;&#x9762;&#x5C31;&#x662F;&#x5E26;&#x81EA;&#x5DF1;&#x7684;&#x7535;&#x8111;\n3&#x6708;19&#x65E5;&#x505A;&#x5B8C;&#x4E86;&#x4E24;&#x4E2A;&#xFF0C;h&#x8001;&#x5E08;&#x6765;&#x770B;&#x5B8C;&#x8981;&#x7ED9;&#x6211;&#x7ED3;&#x94B1;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x641E;&#xFF0C;&#x600E;&#x4E48;&#x8981;&#x4EF7;&#x6211;&#x4E5F;&#x4E0D;&#x597D;&#x5F00;&#x53E3;&#xFF0C;&#x6700;&#x540E;&#x662F;&#x4E24;&#x4E2A;&#x4E00;&#x5171;350&#x3002;&#x4E03;&#x70B9;&#x949F;&#x4ECE;&#x673A;&#x6784;&#x79BB;&#x5F00;&#xFF0C;&#x6211;&#x975E;&#x5E38;&#x5174;&#x594B;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8D5A;&#x5230;&#x94B1;&#xFF0C;&#x811A;&#x6B65;&#x90FD;&#x662F;&#x8F7B;&#x7684;&#x3002;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x6211;&#x6BCF;&#x5929;&#x4E0B;&#x5348;&#x4E09;&#x70B9;&#x5230;&#xFF0C;&#x516D;&#x70B9;&#x591A;&#x5FEB;&#x4E03;&#x70B9;&#x8D70;&#x3002;\n\n&#x5728;&#x8FD9;&#x91CC;&#x505A;&#x9879;&#x76EE;&#xFF0C;&#x9898;&#x76EE;&#x90FD;&#x662F;&#x81EA;&#x5DF1;&#x60F3;&#xFF0C;&#x9664;&#x4E86;&#x5199;&#x7A0B;&#x5E8F;&#xFF0C;&#x8C03;&#x786C;&#x4EF6; &#x8FD8;&#x8981;&#x8D1F;&#x8D23;&#x5236;&#x4F5C;&#x5916;&#x89C2;&#xFF0C;&#x64B0;&#x5199;&#x6587;&#x6863; &#x4E0D;&#x8FC7;&#x662F;&#x7ED9;&#x5C0F;&#x5B66;&#x751F;&#x505A;&#x7684;&#xFF0C;&#x90FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x53EF;&#x662F;&#x67B6;&#x4E0D;&#x4F4F;&#x5B83;&#x4E8B;&#x591A;&#x3002;&#x6211;&#x4E5F;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x5B66;&#x5EFA;&#x6A21;&#x548C;3d&#x6253;&#x5370;\n\n&#x4E2D;&#x95F4;&#x8FD8;&#x6709;&#x6BB5;&#x5C0F;&#x63D2;&#x66F2;&#xFF0C;h&#x8001;&#x5E08;&#x95EE;&#x6211;&#x600E;&#x4E48;&#x4F7F;&#x7528;3d&#x6253;&#x5370;&#x673A;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4E5F;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;&#x554A;&#xFF0C;&#x8FD9;&#x79CD;&#x4E1C;&#x897F;&#x770B;&#x770B;&#x5B98;&#x65B9;&#x7684;&#x4F7F;&#x7528;&#x6587;&#x6863;&#x4E0D;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#x5417;&#x3002;&#x4E8E;&#x662F;&#x665A;&#x4E0A;&#x7ED9;&#x6211;&#x6253;&#x89C6;&#x9891;&#x8BA9;&#x6211;&#x6559;&#x600E;&#x4E48;&#x7528;&#x1F636;\n3&#x6708;23&#x65E5;&#x524D;&#x9762;&#x6B47;&#x4E86;&#x51E0;&#x5929;&#x4E4B;&#x524D;&#x63D0;&#x8FC7;&#xFF0C;&#x8FD9;&#x91CC;&#x505A;&#x4E1C;&#x897F;&#x9898;&#x76EE;&#x8981;&#x81EA;&#x5DF1;&#x60F3;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x5230;&#x5904;&#x67E5;&#x521B;&#x5BA2;&#x7F51;&#x7AD9;&#x548C;&#x79D1;&#x521B;&#x6BD4;&#x8D5B;&#x83B7;&#x5956;&#x540D;&#x5355;&#x60F3;&#x4E86;&#x4E09;&#x4E2A;&#x6BD9;&#x4E86;&#x4E24;&#x4E2A;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x4E1C;&#x897F;&#x3002;h&#x8001;&#x5E08;&#x8BA9;&#x6211;&#x5148;&#x505A;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x4E70;&#x4E86;&#x4E1C;&#x897F;&#x51C6;&#x5907;&#x5FEB;&#x9012;&#x5230;&#x4E86;&#x5C31;&#x53BB;&#x505A;&#xFF0C;&#x5728;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x5019;h&#x8001;&#x5E08;&#x544A;&#x8BC9;&#x6211;&#xFF1A;&#x641C;&#x4E00;&#x4E0B;&#x8BA9;&#x751F;&#x6D3B;&#x66F4;&#x7F8E;&#x597D;&#x4E3B;&#x9898;&#xFF0C;&#x627E;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x6211;:&#x1F613;&#xFF0C;&#x6211;&#x9760;&#xFF0C;&#x8FD9;&#x79CD;&#x5BBD;&#x6CDB;&#x7684;&#x4E3B;&#x9898;&#x8BF4;&#x4E86;&#x548C;&#x6CA1;&#x8BF4;&#x6709;&#x5565;&#x4E24;&#x6837;&#x4E0D;&#x8FC7;&#x6700;&#x540E;&#x8FD8;&#x662F;&#x51D1;&#x4E86;&#x4FE9;&#x4E0A;&#x53BB;&#xFF0C;&#x4E2D;&#x95F4;&#x4ED6;&#x548C;&#x6211;&#x8BF4;&#xFF0C;&#x505A;&#x4E1C;&#x897F;&#x8981;&#x5F80;&#x5927;&#x505A;\n4&#x6708;15&#x65E5;&#x8FD9;&#x4E09;&#x4E2A;&#x505A;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#xFF0C;&#x4ED6;&#x544A;&#x8BC9;&#x6211;&#x518D;&#x505A;&#x4E00;&#x4E2A;&#x505C;&#x8F66;&#x573A;&#x7684;&#xFF0C;&#x8FD9;&#x6B21;&#x5916;&#x89C2;&#x4E0D;&#x662F;3d&#x6253;&#x5370;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x73BB;&#x7EA4;&#x677F;&#x5207;&#x5272;&#x7EC4;&#x88C5;&#xFF0C;&#x4E3A;&#x4E86;&#x8FD9;&#x4E2A;&#x6211;&#x53C8;&#x53BB;&#x5B66;&#x4E60;&#x5F00;&#x6E90;&#x7684;CAD&#x8F6F;&#x4EF6;libreCAD\n4&#x6708;25&#x65E5;&#x4E2D;&#x95F4;&#x65F6;&#x95F4;&#x8981;&#x7EC4;&#x88C5;&#x524D;&#x4E09;&#x4E2A;&#xFF0C;&#x8FD8;&#x8981;&#x8C03;&#x8BD5;&#x7B2C;&#x56DB;&#x4E2A;&#x7684;&#x786C;&#x8F6F;&#x4EF6;&#xFF0C;&#x8FD9;&#x5929;&#x6211;&#x624D;&#x628A;&#x56FE;&#x7EB8;&#x753B;&#x51FA;&#x6765;&#xFF0C;&#x53C8;&#x6B63;&#x9022;&#x4E94;&#x4E00;&#x5047;&#x671F;&#xFF0C;&#x7B49;&#x5230;&#x5207;&#x5272;&#x7684;&#x6837;&#x677F;&#x5230;&#xFF0C;&#x5DF2;&#x7ECF;&#x662F;5.5&#x4E86;\n5&#x6708;5&#x65E5;&#x6211;&#x5230;&#x673A;&#x6784;&#x4E00;&#x770B;&#x6837;&#x677F;&#xFF08;&#x6728;&#x677F;&#x5207;&#x5272;&#x7684;&#xFF09;&#x53D1;&#x73B0;h&#x8001;&#x5E08;&#x628A;&#x6211;&#x7684;&#x56FE;&#x5C42;&#x90FD;&#x5408;&#x5E76;&#x5728;&#x4E00;&#x8D77;&#x4E86;&#xFF0C;&#x5BFC;&#x81F4;&#x5927;&#x90E8;&#x5206;&#x5730;&#x65B9;&#x90FD;&#x5207;&#x9519;&#x4E86;&#xFF0C;&#x6211;&#x4E5F;&#x6CA1;&#x8BF4;&#xFF0C;&#x5927;&#x6982;&#x7EC4;&#x88C5;&#x4E86;&#x4E00;&#x4E0B;&#x53D1;&#x73B0;&#x6CA1;&#x5927;&#x95EE;&#x9898;&#xFF0C;&#x518D;&#x628A;&#x5C0F;&#x95EE;&#x9898;&#x4FEE;&#x6539;&#x4E86;&#x4E00;&#x4E0B;&#x3002;&#x540E;&#x9762;&#x6211;&#x95EE;&#x4ED6;&#x4F7F;&#x7528;&#x73BB;&#x7EA4;&#x677F;&#x5207;&#x5272;&#x7684;&#x8BDD;&#x516C;&#x5DEE;&#x8981;&#x7559;&#x591A;&#x5C11;&#x5408;&#x9002;&#xFF0C;&#x7B54;&#x6848;&#x662F;&#x6CA1;&#x6709;\n\n&#x56DB;&#x6708;&#x4E2D;&#x65EC;&#x7684;&#x65F6;&#x5019;&#x6211;&#x8BF4;&#x6211;&#x6691;&#x5047;&#x8981;&#x53BB;&#x5B9E;&#x4E60;&#xFF0C;h&#x8001;&#x5E08;&#x8BF4;&#x672C;&#x6765;&#x662F;&#x60F3;&#x8BA9;&#x6211;&#x6691;&#x5047;&#x628A;&#x6211;&#x505A;&#x7684;&#x9879;&#x76EE;&#x6559;&#x7ED9;&#x5C0F;&#x670B;&#x53CB;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5F00;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;3d&#x6253;&#x5370;&#x673A;&#x7684;&#x8BFE;&#x7A0B;&#x3002;&#x6211;&#x8868;&#x793A;&#x6691;&#x5047;&#x5E94;&#x8BE5;&#x4E0D;&#x7559;&#xFF0C;&#x4ED6;&#x8BF4;&#x5230;&#x65F6;&#x5019;&#x518D;&#x8BF4;&#x5427;\n\n5&#x6708;7&#x65E5;h&#x8001;&#x5E08;&#x95EE;&#x6211;&#x4E94;&#x6708;&#x662F;&#x4E0D;&#x662F;&#x518D;&#x505A;&#x4E00;&#x4E9B;&#xFF0C;&#x6211;&#x7B54;&#x5E94;&#x4E86;&#xFF0C;&#x540E;&#x9762;&#x770B;&#x6765;&#x5176;&#x5B9E;&#x975E;&#x5E38;&#x4E0D;&#x5E94;&#x8BE5;&#xFF0C;&#x505A;&#x5B8C;&#x624B;&#x5934;&#x7684;&#x5C31;&#x5E94;&#x8BE5;&#x76F4;&#x63A5;&#x544A;&#x8F9E;&#xFF0C;&#x540E;&#x9762;&#x5C31;&#x662F;&#x6298;&#x78E8;&#x3002;&#x7136;&#x540E;&#x6211;&#x53C8;&#x60F3;&#x4E86;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD8;&#x662F;&#x4E70;&#x4E1C;&#x897F;&#x7B49;&#x5FEB;&#x9012;\n\n&#x8FD9;&#x4E2D;&#x95F4;&#x53D1;&#x751F;&#x4E86;&#x5F88;&#x641E;&#x7B11;&#x7684;&#x4E8B;&#xFF0C;&#x6211;&#x8BF4;&#x4E86;&#x4E00;&#x4E2A;&#x53CC;&#x4EBA;&#x5BF9;&#x6218;&#x53E3;&#x7B97;&#x673A;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x4ED6;&#x5148;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;&#x5E74;&#x5E74;&#x6709;&#x4EBA;&#x505A;&#xFF0C;&#x5F53;&#x6211;&#x8BF4;&#x8FD9;&#x4E2A;&#x6211;&#x641C;&#x4E86;&#x6CA1;&#x89C1;&#x8FC7;&#x548C;&#x7C7B;&#x4F3C;&#x7684;&#x4E1C;&#x897F;&#x540E;&#xFF0C;&#x4ED6;&#x53C8;&#x6539;&#x53E3;&#xFF1A;&#x786E;&#x5B9E;&#x4E0D;&#x5E38;&#x89C1;&#xFF0C;&#x7136;&#x540E;&#x95EE;&#x6211;&#x662F;&#x4E0D;&#x662F; &#x201C;&#x5F00;&#x6E90;&#x201D; &#x7684;&#x3002;&#x6211;&#x662F;&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x60F3;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x4E4B;&#x524D;&#x505A;&#x7684;&#x4E5F;&#x90FD;&#x662F;&#x53EA;&#x6709;&#x60F3;&#x6CD5;&#xFF0C;&#x6CA1;&#x6709;&#x6E90;&#x7801;&#x548C;&#x5916;&#x58F3;&#x6587;&#x4EF6;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x505A;&#x3002;&#x4ED6;&#x56DE;&#x6211;&#x2014;&#x2014;&#x201C;&#x1F44D;&#xFF0C;&#x4EBA;&#x624D;&#x201D;\n\n5&#x6708;13&#x65E5;&#x73BB;&#x7EA4;&#x677F;&#x7EC8;&#x4E8E;&#x56DE;&#x6765;&#x4E86;&#xFF0C;&#x6211;&#x88C5;&#x4E86;&#x4E24;&#x4E2A;&#x4E0B;&#x5348;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x6211;&#x6CA1;&#x52A0;&#x516C;&#x5DEE;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x90A3;&#x79CD;&#x5C31;&#x8981;&#x7559;&#x4E00;&#x70B9;&#x4F59;&#x91CF;&#x3002;&#x7136;&#x540E;&#x548C;&#x4ED6;&#x8BF4;&#x4E86;&#x540E;&#x9762;&#x7684;&#x5B89;&#x6392;&#xFF0C;&#x660E;&#x786E;&#x4E86;&#x6211;&#x4E94;&#x6708;&#x5E72;&#x5B8C;&#x5C31;&#x8981;&#x8D70;&#x3002;&#x7136;&#x540E;&#x7ED9;&#x6211;&#x7ED3;&#x4E86;&#x94B1;&#xFF0C;&#x524D;&#x4E09;&#x4E2A;&#x5404;150&#xFF0C;&#x7B2C;&#x56DB;&#x4E2A;200&#x3002;&#x7ED3;&#x5B8C;&#x94B1;&#x548C;&#x6211;&#x8BF4;&#x4E0B;&#x6B21;&#x6765;&#x505A;&#x4E2A;&#x5C0F;&#x8F66;&#xFF0C;&#x5177;&#x4F53;&#x5F53;&#x9762;&#x548C;&#x6211;&#x8BF4;\n5&#x6708;19&#x65E5;&#x548C;h&#x8001;&#x5E08;&#x89C1;&#x4E86;&#x4E00;&#x9762;&#xFF0C;&#x6211;&#x8868;&#x793A;&#x5982;&#x679C;&#x5C0F;&#x8F66;&#x592A;&#x96BE;&#x641E;&#x6211;&#x53EF;&#x80FD;&#x6CA1;&#x65F6;&#x95F4;&#x505A;&#x4E86;&#xFF0C;&#x4ED6;&#x8868;&#x793A;&#x7406;&#x89E3;&#x7136;&#x540E;&#x665A;&#x4E0A;&#x7ED9;&#x6211;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;&#x6211;&#x5F53;&#x65F6;&#x770B;&#x5B8C;&#x90FD;&#x50BB;&#x773C;&#x4E86;&#xFF0C;&#x544A;&#x8BC9;&#x4ED6;&#x6211;&#x505A;&#x4E0D;&#x4E86;\n5&#x6708;20&#x65E5;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4E5F;&#x505A;&#x5B8C;&#x4E86;&#x3002;&#x628A;&#x6E90;&#x7801;&#xFF0C;&#x5916;&#x58F3;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#xFF0C;&#x624B;&#x518C;&#x5565;&#x7684;&#x90FD;&#x6574;&#x7406;&#x597D;&#x4E86;&#x3002;&#x9A8C;&#x6536;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x7ED9;&#x6211;&#x7ED3;&#x5B8C;&#x6700;&#x540E;&#x4E00;&#x4E2A;150&#xFF0C;&#x6211;&#x5C31;&#x8D70;&#x4E86;&#x3002;&#x8D70;&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x548C;&#x697C;&#x4E0B;&#x4FDD;&#x5B89;&#x804A;&#x4E86;&#x51E0;&#x53E5;&#xFF0C;&#x603B;&#x7ED3;&#x5C31;&#x662F;&#x8FD9;&#x91CC;&#x6323;&#x4E0D;&#x5230;&#x4EC0;&#x4E48;&#x94B1;&#x8FD8;&#x6D6A;&#x8D39;&#x65F6;&#x95F4;\n&#x56DE;&#x987E;&#x4E0E;&#x603B;&#x7ED3;&#x5386;&#x65F6;&#x5DEE;&#x4E0D;&#x591A;&#x4E09;&#x4E2A;&#x6708;&#xFF0C;&#x6211;&#x53BB;&#x6BCF;&#x6B21;&#x53BB;&#x673A;&#x6784;&#x90FD;&#x662F;&#x516C;&#x4EA4;&#x901A;&#x52E4;&#xFF0C;&#x8DEF;&#x4E0A;&#x8981;&#x5012;&#x8F66;&#xFF0C;&#x6765;&#x56DE;&#x4E00;&#x6B21;4&#x5757;&#x3002;&#x4E24;&#x70B9;&#x591A;&#x4ECE;&#x5B66;&#x6821;&#x8D70;&#xFF0C;&#x4E09;&#x70B9;&#x5230;&#x673A;&#x6784;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x505A;&#x5230;&#x516D;&#x70B9;&#x591A;&#x624D;&#x8D70;&#xFF0C;&#x7B49;&#x56DE;&#x5B66;&#x6821;&#x65F6;&#x90FD;&#x4E03;&#x516B;&#x70B9;&#x4E86;&#xFF0C;&#x6709;&#x51E0;&#x6B21;&#x641E;&#x5FD8;&#x65F6;&#x95F4;&#xFF0C;&#x7B49;&#x56DE;&#x5B66;&#x6821;&#x5DF2;&#x7ECF;&#x4E5D;&#x70B9;&#x4E86;&#x3002;&#x5728;&#x90A3;&#x91CC;&#x4E0D;&#x80FD;&#x8BF4;&#x5565;&#x4E5F;&#x6CA1;&#x5B66;&#x5230;&#xFF0C;&#x4E3A;&#x4E86;&#x505A;&#x4E1C;&#x897F;&#x8FD8;&#x662F;&#x81EA;&#x5B66;&#x4E86;&#x4E00;&#x70B9;&#x6280;&#x80FD;&#xFF0C;&#x4E0D;&#x8FC7;&#x548C;&#x6211;&#x6D6A;&#x8D39;&#x6389;&#x7684;&#x65F6;&#x95F4;&#x6BD4;&#x771F;&#x4E0D;&#x7B97;&#x4EC0;&#x4E48;&#x3002;&#x4E3A;&#x4E86;&#x505A;&#x673A;&#x6784;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x95F2;&#x7740;&#x8FD8;&#x60F3;&#x60F3;&#x9898;&#x76EE;&#xFF0C;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x6298;&#x78E8;&#x7684;&#x3002;&#x4E94;&#x6708;&#x4E2D;&#x6211;&#x8FD8;&#x51C6;&#x5907;&#x6691;&#x5047;&#x5B9E;&#x4E60;&#xFF0C;&#x5176;&#x5B9E;&#x5DF2;&#x7ECF;&#x6709;&#x70B9;&#x665A;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x4E5F;&#x6CA1;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x7B80;&#x5386;&#x4E0A;&#x7A7A;&#x7A7A;&#x8361;&#x8361;&#x7684;&#x54C8;&#x54C8;&#x54C8;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8981;&#x51C6;&#x5907;&#x5B9E;&#x4E60;&#x7684;&#x8BDD;&#x8FD8;&#x662F;&#x4E0D;&#x8981;&#x6D6A;&#x8D39;&#x65F6;&#x95F4;&#xFF0C;&#x505A;&#x4E00;&#x4E9B;&#x80FD;&#x5C55;&#x73B0;&#x6C34;&#x5E73;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x7ED9;&#x5C0F;&#x5B66;&#x751F;&#x505A;&#x7684;&#x5C0F;&#x4E1C;&#x897F;&#x6CA1;&#x5565;&#x7528;&#x3002;\n&#x6700;&#x540E;&#xFF0C;&#x94B1;&#x4E5F;&#x6CA1;&#x6323;&#x5230;&#xFF0C;&#x65F6;&#x95F4;&#x6D6A;&#x8D39;&#x8BB8;&#x591A;&#xFF0C;&#x867D;&#x7136;&#x6709;&#x4E00;&#x70B9;&#x6536;&#x83B7;&#xFF0C;&#x4F46;&#x603B;&#x4F53;&#x662F;&#x4E8F;&#x7684;\n&#x6587;&#x7AE0;&#x6807;&#x9898;&#x5176;&#x5B9E;&#x662F;&#x66B4;&#x8BBA;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E5F;&#x53EF;&#x80FD;&#x6CA1;&#x90A3;&#x4E48;&#x7CDF;&#x3002;\n","categories":["日常生活"],"tags":["日常生活","兼职","大学生","随想"]},{"title":"嵌入式boot开发（二）","url":"/2025/10/28/%E5%B5%8C%E5%85%A5%E5%BC%8Fboot%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89/","content":"&#x524D;&#x8A00;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5D4C;&#x5165;&#x5F0F;boot&#x5F00;&#x53D1;&#xFF08;&#x4E00;&#xFF09;&#x4E2D;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x6700;&#x57FA;&#x7840;&#x7684;boot&#x8DF3;&#x8F6C;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x673A;&#x6765;&#x7BA1;&#x7406;boot&#x7684;&#x51E0;&#x79CD;&#x60C5;&#x51B5;\n&#x72B6;&#x6001;&#x673A;&#x72B6;&#x6001;&#x673A;&#x5C31;&#x662F;&#x6761;&#x4EF6;&#x8F6C;&#x79FB;&#xFF0C;&#x4E0D;&#x540C;&#x6761;&#x4EF6;&#x8FDB;&#x5165;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;boot&#x7A0B;&#x5E8F;&#xFF1A;\n\n&#x4E0A;&#x7535;&#x65F6;&#x6309;&#x4F4F;K1&#x6309;&#x952E;&#x4E0D;&#x653E;3s&#x8FDB;&#x5165;boot&#xFF0C;&#x5426;&#x4FA7;3s&#x8D85;&#x65F6;&#x540E;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;app\n&#x518D;&#x6B21;&#x6309;&#x4E0B;&#x8DF3;&#x8F6C;&#x5230;app&#x601D;&#x8003;&#x4E00;&#x4E0B;&#x8FD9;&#x5176;&#x4E2D;&#x6709;&#x54EA;&#x4E9B;&#x72B6;&#x6001;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x800C;&#x72B6;&#x6001;&#x8F6C;&#x6362;&#x53C8;&#x8981;&#x6EE1;&#x8DB3;&#x4EC0;&#x4E48;&#x6761;&#x4EF6;&#xFF0C;\n\n&#x72B6;&#x6001;&#x5236;&#x5B9A;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7B49;&#x5F85;&#x6309;&#x952E;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x4E0A;&#x7535;3s&#x5185;(&#x53BB;&#x6296;)&#x6309;&#x4E0B;&#x5C31;&#x8FDB;&#x5165;bootloader&#x72B6;&#x6001;&#xFF0C;&#x5426;&#x4FA7;&#x8D85;&#x65F6;&#x8DF3;&#x8F6C;app&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;bootloader&#x72B6;&#x6001;&#x65F6;&#x6309;&#x4E0B;&#x6309;&#x952E;&#x8DF3;&#x8F6C;app&#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E09;&#x4E2A;&#x72B6;&#x6001;&#xFF1A;&#x7B49;&#x5F85;&#xFF0C;boot&#x72B6;&#x6001;&#xFF0C;&#x8DF3;&#x8F6C;app\ntypedef enum {    BOOTMODE_WAIT,          // &#x7B49;&#x5F85;    BOOTMODE_BOOTLOADER,    // bootloader&#x72B6;&#x6001;    BOOTMODE_APP_JUMP       // &#x8DF3;&#x8F6C;app} BootMode_t;\n&#x8DF3;&#x8F6C;&#x6761;&#x4EF6;&#x4E0E;&#x72B6;&#x6001;&#x673A;&#x5B9E;&#x73B0;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x8F6C;&#x6362;&#x6761;&#x4EF6;&#x662F;&#x6309;&#x952E;&#x5728;&#x4E0A;&#x7535;&#x65F6;&#x662F;&#x5426;&#x6309;&#x4E0B;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x8F6C;&#x6362;&#x6761;&#x4EF6;&#x662F;&#x6309;&#x952E;&#x662F;&#x5426;&#x6309;&#x4E0B;\n&#x6240;&#x4EE5;&#x7F16;&#x5199;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF0C;&#x4F7F;&#x7528;switch-case&#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x65B9;&#x4FBF;&#x68C0;&#x67E5;\n#define BOOT_WAIT_TIME 3000                         //3000msBootMode_t BootMode = BOOTMODE_WAIT;                //&#x521D;&#x59CB;&#x72B6;&#x6001;\n\nswitch (BootMode) {case BOOTMODE_WAIT:    if (HAL_GetTick() &gt; BOOT_WAIT_TIME) {           //&#x68C0;&#x67E5;&#x65F6;&#x95F4;3s        BootMode = BOOTMODE_APP_JUMP;               //&#x8D85;&#x65F6;&#x8FDB;&#x5165;&#x8DF3;&#x8F6C;app&#x72B6;&#x6001;    } else if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {   //&#x6309;&#x952E;&#x6309;&#x4E0B;        BootMode = BOOTMODE_BOOTLOADER;                 //&#x8FDB;&#x5165;bootloader&#x72B6;&#x6001;    }    break;case BOOTMODE_BOOTLOADER:                           if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {      //&#x6309;&#x952E;&#x6309;&#x4E0B;        BootMode = BOOTMODE_APP_JUMP;               //&#x8FDB;&#x5165;&#x8DF3;&#x8F6C;app&#x72B6;&#x6001;    } else {        bootloader_mode();    }    break;case BOOTMODE_APP_JUMP:    if (is_application_valid()) {        jump_to_application();    } else {        BootMode = BOOTMODE_BOOTLOADER;    }    break;default:    BootMode = BOOTMODE_BOOTLOADER;    break;}\n\n&#x6CE8;&#xFF1A;&#x5728;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x4E2D;&#x8FD0;&#x884C;&#x6B64;&#x72B6;&#x6001;&#x673A;\n\nbootloader_mode()&#x76F8;&#x8F83;&#x4E8E;&#x4E0A;&#x4E00;&#x7BC7;&#x6709;&#x4E00;&#x70B9;&#x53D8;&#x52A8;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x5C55;&#x793A;bootloader&#x72B6;&#x6001;\nvoid bootloader_mode(void) {    // app addr is no programe    LED_Blink(&amp;LED, 1000);}\njump_to_application()&#x4E5F;&#x6709;&#x6240;&#x8C03;&#x6574;&#xFF0C;&#x5728;&#x53C2;&#x8003;&#x4E86;&#x5B89;&#x5BCC;&#x83B1;&#x7684;boot&#x6559;&#x7A0B;&#x540E;\nvoid jump_to_application()(void) {    const VectorTableType *app_vector_table =        (VectorTableType *)APP_ADDRESS;    // &#x7981;&#x7528;irq&#x4E2D;&#x65AD;&#xFF0C;&#x4EC5;&#x5173;&#x95ED;IRQ&#xFF08;&#x666E;&#x901A;&#x4E2D;&#x65AD;&#xFF09;&#xFF0C;&#x4F46;&#x4E0D;&#x5173;&#x95ED;FIQ&#xFF08;&#x5FEB;&#x901F;&#x4E2D;&#x65AD;&#xFF09;    __disable_irq();    // &#x7981;&#x7528;&#x5168;&#x90E8;&#x4E2D;&#x65AD;    __set_PRIMASK(1);    // &#x590D;&#x4F4D;&#x6240;&#x6709;&#x65F6;&#x949F;&#x5230;&#x9ED8;&#x8BA4;    HAL_RCC_DeInit();    // &#x590D;&#x4F4D;&#x6240;&#x7528;&#x5230;&#x7684;&#x5916;&#x8BBE;    // HAL_XX_DeInit();    // &#x5173;&#x95ED;systick&#xFF0C;&#x590D;&#x4F4D;&#x5230;&#x9ED8;&#x8BA4;&#x503C;    SysTick-&gt;CTRL = 0;    SysTick-&gt;LOAD = 0;    SysTick-&gt;VAL = 0;    // &#x5173;&#x95ED;&#x6240;&#x6709;&#x4E2D;&#x65AD;&#xFF0C;&#x6E05;&#x9664;&#x6240;&#x6709;&#x4E2D;&#x65AD;&#x6302;&#x8D77;&#x6807;&#x5FD7;    for (uint32_t i = 0; i &lt; 8; i++) {        NVIC-&gt;ICER[i] = 0xFFFFFFFF;        NVIC-&gt;ICPR[i] = 0xFFFFFFFF;    }    // &#x8BBE;&#x7F6E;&#x4E2D;&#x65AD;&#x5411;&#x91CF;&#x8868;&#x504F;&#x79FB;    SCB-&gt;VTOR = APP_ADDRESS;    // &#x8BBE;&#x7F6E;&#x4E3B;&#x6808;&#x6307;&#x9488;    __set_MSP(app_vector_table-&gt;stack_pointer);    // &#x4F7F;&#x7528;RTOS&#x65F6;&#xFF0C;&#x8FD9;&#x53E5;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;&#x7279;&#x6743;&#x7EA7;&#x6A21;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528;MSP&#x6307;&#x9488;    __set_CONTROL(0);    // &#x5728;&#x8DF3;&#x8F6C;&#x524D;&#x5F00;&#x542F;&#x5168;&#x5C40;&#x4E2D;&#x65AD;&#xFF0C;&#x8BA9;APP&#x53EF;&#x4EE5;&#x54CD;&#x5E94;&#x4E2D;&#x65AD;    __set_PRIMASK(0);    __enable_irq();    // &#x8DF3;&#x8F6C;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x590D;&#x4F4D;&#x5904;&#x7406;&#x51FD;&#x6570;    app_vector_table-&gt;reset_handler();    // &#x5982;&#x679C;&#x8DF3;&#x8F6C;&#x6210;&#x529F;&#xFF0C;&#x7A0B;&#x5E8F;&#x4E0D;&#x4F1A;&#x8FD0;&#x884C;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x6DFB;&#x52A0;&#x5904;&#x7406;&#x4EE3;&#x7801;    while (1)        ;}\n\n&#x70E7;&#x5F55;&#x4E0A;&#x7535;app&#x7A0B;&#x5E8F;&#x4E0D;&#x53D8;&#xFF0C;&#x4E0A;&#x7535;&#x65F6;&#x6309;&#x4F4F;K1&#x6309;&#x952E;&#x5F85;LED&#x7F13;&#x6162;&#x95EA;&#x70C1;&#x65F6;&#x8BF4;&#x660E;&#x8FDB;&#x5165;&#x4E86;boot&#xFF0C;&#x6B64;&#x65F6;&#x518D;&#x6309;&#x4E0B;K1&#x8FDB;&#x5165;app(&#x5982;&#x6709;)LED&#x5FEB;&#x95EA;\n&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x8DDD;&#x79BB;&#x7B2C;&#x4E00;&#x7BC7;&#x65F6;&#x9694;&#x56DB;&#x5341;&#x5929;&#xFF0C;&#x8FD9;&#x56DB;&#x5341;&#x5929;&#x4E3B;&#x8981;&#x662F;&#x5B66;&#x4E60;C#&#x548C;WPF&#x6765;&#x5F00;&#x53D1;&#x914D;&#x5957;&#x7684;boot&#x4E0A;&#x4F4D;&#x673A;boot&#x4E0A;&#x4F4D;&#x673A;&#x5305;&#x542B;&#x5E38;&#x89C1;&#x7684;&#x4E32;&#x53E3;&#x529F;&#x80FD;&#x548C;boot&#x6A21;&#x5F0F;&#x3002;&#x4E0A;&#x4F4D;&#x673A;&#x6CA1;&#x6709;&#x505A;&#x5B8C;&#x4E3B;&#x8981;&#x662F;&#x540E;&#x9762;&#x7684;&#x8981;&#x548C;MCU&#x540C;&#x6B65;&#x5F00;&#x53D1;&#x6765;&#x6D4B;&#x8BD5;&#x529F;&#x80FD;&#x4E0B;&#x4E00;&#x7BC7;&#x4F1A;&#x4ECB;&#x7ECD;boot&#x7684;&#x547D;&#x4EE4;&#x5E27;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;&#x4E0B;&#x4F4D;&#x673A;&#x63A5;&#x6536;&#x76F8;&#x5173;&#x7A0B;&#x5E8F;&#x7684;&#x7F16;&#x5199;\n&#x4EE3;&#x7801;&#x4E00;&#x89C8;\nboot&#x7684;mainint main(void) {    /* USER CODE BEGIN 1 */    /* USER CODE END 1 */    /* MPU     * Configuration--------------------------------------------------------*/    MPU_Config();    /* MCU     * Configuration--------------------------------------------------------*/    /* Reset of all peripherals, Initializes the Flash interface and the     * Systick. */    HAL_Init();    /* USER CODE BEGIN Init */    /* USER CODE END Init */    /* Configure the system clock */    SystemClock_Config();    /* USER CODE BEGIN SysInit */    /* USER CODE END SysInit */    /* Initialize all configured peripherals */    MX_GPIO_Init();    // MX_QUADSPI_Init();    MX_CRC_Init();    /* USER CODE BEGIN 2 */    LED_InitDev(&amp;LED, LED_GPIO_Port, LED_Pin, 1);    KEY_InitDev(&amp;K1, K1_GPIO_Port, K1_Pin, 1);    /* USER CODE END 2 */    /* Infinite loop */    /* &#x4E3B;&#x8981;&#x4FEE;&#x6539;&#x70B9; */    /* USER CODE BEGIN WHILE */    while (1) {        /* USER CODE END WHILE */        /* USER CODE BEGIN 3 */        switch (BootMode) {        case BOOTMODE_WAIT:            if (HAL_GetTick() &gt; BOOT_WAIT_TIME) {                BootMode = BOOTMODE_APP_JUMP;            } else if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {                BootMode = BOOTMODE_BOOTLOADER;            }            break;        case BOOTMODE_BOOTLOADER:            if (KEY_GetState(&amp;K1) == KEY_State_DOWN) {                BootMode = BOOTMODE_APP_JUMP;            } else {                bootloader_mode();            }            break;        case BOOTMODE_APP_JUMP:            if (is_application_valid()) {                jump_to_application();            } else {                BootMode = BOOTMODE_BOOTLOADER;            }            break;        default:            BootMode = BOOTMODE_BOOTLOADER;            break;        }    }    /* USER CODE END 3 */}\n&#x4EE5;&#x53CA;bootloader_mode()void bootloader_mode(void) {    // app addr is no programe    LED_Blink(&amp;LED, 1000);}\n\n","categories":["Bootloader"],"tags":["STM32","BootLoader"]},{"title":"嵌入式boot开发（四）","url":"/2025/11/19/%E5%B5%8C%E5%85%A5%E5%BC%8Fboot%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89/","content":"&#x524D;&#x8A00;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x5D4C;&#x5165;&#x5F0F;boot&#x5F00;&#x53D1;&#xFF08;&#x4E09;&#xFF09;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63A2;&#x8BA8;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x673A;&#x8FDB;&#x884C;&#x4E86;&#x8C03;&#x6574;&#x5728;&#x8FD9;&#x4E00;&#x7AE0;&#x4E2D;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x4E0A;&#x4F4D;&#x673A;&#x5BF9;&#x4E0B;&#x4F4D;&#x673A;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x7684;&#x8BF7;&#x6C42;&#x548C;&#x4E0B;&#x4F4D;&#x673A;&#x63A5;&#x6536;&#x56FA;&#x4EF6;&#x3002;\n&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x67E5;&#x8BE2;&#x5148;&#x5B9A;&#x4E49;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;boot_cfg.h&#x6765;&#x7BA1;&#x7406;\n// boot_cfg.h#ifndef _BOOT_CFG_H_#define _BOOT_CFG_H_#include &quot;stm32h7xx.h&quot;// &#x57FA;&#x7840;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x81EA;&#x5B9A;&#x4E49;// app&#x52A0;&#x8F7D;&#x5730;&#x5740;#define BOOT_APP_ADDRESS (0x08010000)// &#x56FA;&#x4EF6;&#x5206;&#x5305;&#x5927;&#x5C0F;#define BOOT_FIRMWARE_PACKET_SIZE (512)// &#x547D;&#x4EE4;&#x5E27;&#x4E2D;&#x6570;&#x636E;&#x7684;&#x5927;&#x5C0F;#define BOOT_FRAME_DATA_SIZE 2048 // &#x547D;&#x4EE4;&#x5E27;&#x6570;&#x636E;&#x957F;&#x5EA6;// flash&#x7ED3;&#x675F;&#x5730;&#x5740;#define BOOT_FLASH_END_ADDRESS FLASH_END // &#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;hal&#x5E93;&#x5B9A;&#x4E49;// flash&#x5927;&#x5C0F;#define BOOT_FLASH_SIZE FLASH_SIZE // &#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;hal&#x5E93;&#x5B9A;&#x4E49;// &#x8BBE;&#x5907;&#x540D;&#x79F0;#define BOOT_DEVICE_NAME &quot;STM32H750&quot;// &#x4E0A;&#x7535;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x9009;&#x62E9;&#x542F;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x6BEB;&#x79D2;#define BOOT_START_WAIT_TIME_MS 2000 // &#x9009;&#x62E9;&#x542F;&#x52A8;&#x6A21;&#x5F0F;&#x7B49;&#x5F85;// boot&#x7248;&#x672C;#define BOOT_VERSION &quot;v0.0.1&quot;#endif\n\n&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x56E0;&#x4E3A;&#x4E0B;&#x4F4D;&#x673A;&#x548C;&#x4E0A;&#x4F4D;&#x673A;&#x7A0B;&#x5E8F;&#x90FD;&#x662F;&#x5C0F;&#x7AEF;&#x5E8F;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x91C7;&#x7528;&#x8054;&#x5408;&#x4F53;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5B8F;&#x5B9A;&#x4E49;&#x4E0E;cfg&#x5BF9;&#x5E94;\n// boot.h// &#x8BBE;&#x5907;&#x4FE1;&#x606F;// &#x8BBE;&#x5907;&#x540D;&#x79F0;#define DEVICE_INFO_MODEL BOOT_DEVICE_NAME// &#x8BBE;&#x5907;flash&#x5927;&#x5C0F;#define DEVICE_INFO_FLASH_SIZE (BOOT_FLASH_SIZE) // byte&#x5927;&#x5C0F;// &#x8BBE;&#x5907;app&#x52A0;&#x8F7D;&#x5730;&#x5740;#define DEVICE_INFO_APP_ADDRESS BOOT_APP_ADDRESS// &#x8BBE;&#x5907;&#x56FA;&#x4EF6;&#x5206;&#x5305;&#x5927;&#x5C0F;#define DEVICE_INFO_FIRMWARE_PACKET_SIZE BOOT_FIRMWARE_PACKET_SIZE// &#x8BBE;&#x5907;boot&#x7248;&#x672C;#define DEVICE_INFO_BOOT_VERSION BOOT_VERSION// &#x8BBE;&#x5907;&#x540D;&#x79F0;&#x957F;&#x5EA6;#define DEVICE_INFO_MODEL_LENGTH 32// &#x8BBE;&#x5907;boot&#x7248;&#x672C;&#x4FE1;&#x606F;&#x957F;&#x5EA6;#define DEVICE_INFO_BOOT_VERSION_LENGTH 16// &#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x7ED3;&#x6784;&#x4F53;&#xFF08;1&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#xFF09;typedef struct {    char model[DEVICE_INFO_MODEL_LENGTH];    uint32_t flashSize;    uint32_t appAddr;    uint32_t firmware_packet;    char bootVersion[DEVICE_INFO_BOOT_VERSION_LENGTH];} ALIGNED(1) deviceInfo_t;  //&#x8FD9;&#x91CC;&#x7684;ALIGNED(1)&#x662F;&#x5355;&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x6E90;&#x7801;&#x4E00;&#x89C8;&#x4F1A;&#x6709;// &#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x8054;&#x5408;&#x4F53;&#xFF0C;&#x7528;&#x4E8E;&#x6253;&#x5305;typedef union {    uint8_t rawData[sizeof(deviceInfo_t)];    deviceInfo_t deviceInfo;} BOOT_DeviceInfo_t;\n\n&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x8BFB;&#x53D6;&#x4E0E;&#x53D1;&#x9001;&#x4E0A;&#x4F4D;&#x673A;&#x5728;&#x786E;&#x8BA4;&#x4E0B;&#x4F4D;&#x673A;&#x72B6;&#x6001;&#x65F6;&#x8BF7;&#x6C42;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;CMD_ENTER_BOOT&#x547D;&#x4EE4;&#x6240;&#x4EE5;&#x5C06;&#x5176;&#x653E;&#x5728;&#x5904;&#x7406;&#x547D;&#x4EE4;&#x7684;Boot_ProcessReceivedCommand&#x4E2D;\ncase CMD_ENTER_BOOT:    // &#x5DF2;&#x7ECF;&#x8FDB;&#x5165;Bootloader&#xFF0C;&#x53D1;&#x9001;&#x786E;&#x8BA4;    Boot_SendEnterBootResponse();    break;\nBoot_SendEnterBootResponse&#x8D1F;&#x8D23;&#x8BFB;&#x53D6;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x5E76;&#x4FDD;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x5411;&#x4E0A;&#x4F4D;&#x673A;&#x53D1;&#x9001;&#x547D;&#x4EE4;&#x5E27;&#xFF0C;&#x4E0A;&#x4F4D;&#x673A;&#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x7C7B;&#x578B;&#x6765;&#x63A5;&#x6536;&#x5E76;&#x4FDD;&#x5B58;&#x5173;&#x952E;&#x4FE1;&#x606F;&#x5982;&#x56FA;&#x4EF6;&#x5305;&#x5927;&#x5C0F;\nstatic void Boot_SendEnterBootResponse(void) {    BOOT_DeviceInfo_t device;    memset(&amp;device, 0, sizeof(BOOT_DeviceInfo_t));    // &#x8BBE;&#x7F6E;&#x8BBE;&#x5907;&#x6A21;&#x578B;&#x540D;    strncpy(device.deviceInfo.model, DEVICE_INFO_MODEL,            DEVICE_INFO_MODEL_LENGTH - 1);    device.deviceInfo.model[DEVICE_INFO_MODEL_LENGTH - 1] = &apos;\\0&apos;; // &#x786E;&#x4FDD;&#x7EC8;&#x6B62;    // &#x8BBE;&#x7F6E;flash&#x5C3A;&#x5BF8;    device.deviceInfo.flashSize = DEVICE_INFO_FLASH_SIZE;    // &#x8BBE;&#x7F6E;app&#x52A0;&#x8F7D;&#x5730;&#x5740;    device.deviceInfo.appAddr = DEVICE_INFO_APP_ADDRESS;    // &#x8BBE;&#x7F6E;&#x56FA;&#x4EF6;&#x5305;&#x5927;&#x5C0F;    device.deviceInfo.firmware_packet = DEVICE_INFO_FIRMWARE_PACKET_SIZE;    // &#x8BBE;&#x7F6E;boot&#x7248;&#x672C;    strncpy(device.deviceInfo.bootVersion, DEVICE_INFO_BOOT_VERSION,            DEVICE_INFO_BOOT_VERSION_LENGTH - 1);    device.deviceInfo.bootVersion[DEVICE_INFO_BOOT_VERSION_LENGTH - 1] =        &apos;\\0&apos;; // &#x786E;&#x4FDD;&#x7EC8;&#x6B62;    Boot_SendFrame(CMD_ENTER_BOOT, device.rawData, sizeof(BOOT_DeviceInfo_t));}\n&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x8BBE;&#x5907;&#x4FE1;&#x606F;\n&#x56FA;&#x4EF6;&#x4E0B;&#x8F7D;&#x56FA;&#x4EF6;&#x5305;&#x7ED3;&#x6784;&#x5FAE;&#x8C03;&#x4E00;&#x5F00;&#x59CB;&#x56FA;&#x4EF6;&#x5305;&#x662F;&#xFF1A;**[&#x5F53;&#x524D;&#x5305;&#x53F7;] [&#x603B;&#x5305;&#x53F7;] [&#x5305;&#x6570;&#x636E;(&#x5047;&#x8BBE;&#x4E3A;1KB)] [&#x5305;&#x6570;&#x636E;&#x7684;CRC32]**&#x6539;&#x4E3A;&#xFF1A; [&#x5F53;&#x524D;&#x5305;&#x53F7;] [&#x603B;&#x5305;&#x53F7;] [&#x5305;&#x6570;&#x636E;&#x7684;CRC32] [&#x5305;&#x6570;&#x636E;(&#x5047;&#x8BBE;&#x4E3A;1KB)]&#x5C06;&#x5305;&#x6570;&#x636E;&#x7F6E;&#x540E;&#x662F;&#x8003;&#x8651;&#x5230;&#x4E24;&#x70B9;\n\n&#x4E0A;&#x4F4D;&#x673A;&#x52A0;&#x8F7D;&#x56FA;&#x4EF6;&#x662F;&#x76F4;&#x63A5;&#x5206;&#x5305;&#x5E76;&#x8BA1;&#x7B97;&#x5404;&#x5305;CRC&#xFF0C;&#x7136;&#x540E;&#x624B;&#x52A8;&#x7EC4;&#x5408;&#x6210;&#x5B57;&#x8282;&#x6570;&#x7EC4;\n&#x6709;&#x4E86;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#x7684;&#x6210;&#x529F;&#x7ECF;&#x9A8C;&#xFF0C;&#x56FA;&#x4EF6;&#x4E0B;&#x8F7D;&#x4E5F;&#x9009;&#x62E9;&#x4E86;&#x4F7F;&#x7528;&#x8054;&#x5408;&#x4F53;\n\n&#x56E0;&#x4E3A;&#x8054;&#x5408;&#x4F53;&#x4E2D;&#x5305;&#x6570;&#x636E;&#x662F;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;crc&#x7ED3;&#x5C3E;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x540E;&#x4E00;&#x5305;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x5C31;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x8054;&#x5408;&#x4F53;&#x8BFB;&#x53D6;&#x65F6;&#x6709;&#x95EE;&#x9898;&#xFF0C;flash&#x7F16;&#x7A0B;&#x65F6;&#x4E5F;&#x8981;&#x8003;&#x8651;&#x6700;&#x540E;&#x4E00;&#x5305;&#xFF0C;&#x6709;&#x70B9;&#x9EBB;&#x70E6;&#x3002;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x6539;&#x53D8;&#x56FA;&#x4EF6;&#x5305;&#x7ED3;&#x6784;&#xFF0C;&#x5C06;&#x5305;&#x6570;&#x636E;&#x653E;&#x5728;&#x6700;&#x540E;&#xFF0C;&#x524D;&#x4E09;&#x4E2A;&#x4FE1;&#x606F;&#x662F;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#xFF0C;&#x5305;&#x6570;&#x636E;&#x4F4D;&#x7F6E;&#x56FA;&#x5B9A;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x800C;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x6700;&#x540E;&#x4E00;&#x5305;&#x7684;&#x7279;&#x6B8A;&#x60C5;&#x51B5;\n&#x56FA;&#x4EF6;&#x5305;&#x6570;&#x636E;&#x7C7B;&#x578B;// boot.h// &#x56FA;&#x4EF6;&#x4FE1;&#x606F;&#x5355;&#x4E2A;&#x957F;&#x5EA6; &#x5305;&#x53F7; &#x5305;&#x6570; CRC32&#x90FD;&#x662F;4&#x5B57;&#x8282;#define FIRMWARE_PACKET_INFO_SIZE 4// &#x56FA;&#x4EF6;&#x7ED3;&#x6784;&#x4F53;typedef struct {    uint32_t packetNum;    uint32_t packetTotalNum;    uint32_t packetCRC32;    uint8_t firmware[DEVICE_INFO_FIRMWARE_PACKET_SIZE];} ALIGNED(1) firmwareInfo_t;// &#x56FA;&#x4EF6;&#x8054;&#x5408;&#x4F53;&#xFF0C;&#x7528;&#x4E8E;&#x8BFB;&#x53D6;typedef union {    uint8_t rawDate[sizeof(firmwareInfo_t)];    firmwareInfo_t firmwareInfo;} BOOT_FirmwareInfo_t;\n&#x56FA;&#x4EF6;&#x4FE1;&#x606F;&#x7C7B;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5C06;&#x547D;&#x4EE4;&#x5E27;&#x7684;&#x56FA;&#x4EF6;&#x5305;&#x62F7;&#x8D1D;&#x5230;&#x91CC;&#x9762;&#x518D;&#x5904;&#x7406;&#xFF0C;&#x9632;&#x6B62;&#x5199;&#x5165;&#x65F6;&#x56FA;&#x4EF6;&#x5305;&#x88AB;&#x7834;&#x574F;\n&#x56FA;&#x4EF6;&#x5305;&#x8BFB;&#x53D6;&#x4E0E;&#x5199;&#x5165;&#x4E0A;&#x4F4D;&#x673A;&#x5728;&#x53D1;&#x9001;&#x4E0A;&#x4F20;&#x547D;&#x4EE4;&#x65F6;&#x643A;&#x5E26;&#x4E86;&#x56FA;&#x4EF6;&#x5305;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;CMD_UPLOAD&#x547D;&#x4EE4;&#x6240;&#x4EE5;&#x5C06;&#x5176;&#x653E;&#x5728;&#x5904;&#x7406;&#x547D;&#x4EE4;&#x7684;Boot_ProcessReceivedCommand&#x4E2D;\ncase CMD_UPLOAD:    // &#x5904;&#x7406;&#x56FA;&#x4EF6;&#x4E0A;&#x4F20;    bootErrorCode = Boot_ProcessUploadCommand(&amp;current_frame);    if (bootErrorCode == ERROR_CODE_NO_ERROR) {        // &#x6CA1;&#x9519;&#x8BEF;&#x56DE;&#x590D;ack        Boot_SendAckResponse();    }    break;\nBoot_ProcessUploadCommand&#x8D1F;&#x8D23;&#x63A5;&#x6536;&#x56FA;&#x4EF6;&#xFF0C;&#x5199;&#x5165;&#x56FA;&#x4EF6;\n/** * @brief &#x5904;&#x7406;&#x56FA;&#x4EF6;&#x5347;&#x7EA7;&#x6307;&#x4EE4; * @param frame &#x547D;&#x4EE4;&#x5E27; * @return &#x9519;&#x8BEF;&#x7801; */BootErrorCode_t Boot_ProcessUploadCommand(command_frame_t *frame) {    // &#x9A8C;&#x8BC1;&#x547D;&#x4EE4;&#x5E27;&#x6216;&#x8005;&#x547D;&#x4EE4;&#x5E27;&#x4E2D;&#x56FA;&#x4EF6;&#x6570;&#x636E;&#x662F;&#x5426;&#x4E3A;&#x7A7A;    //  (sizeof(firmwareInfo_t) - DEVICE_INFO_FIRMWARE_PACKET_SIZE)==12    // &#x5305;&#x53F7;+&#x603B;&#x5305;&#x6570;+crc32&#x7684;==12&#x5B57;&#x8282;    if (frame == NULL ||        frame-&gt;data_length &lt;            (sizeof(firmwareInfo_t) - DEVICE_INFO_FIRMWARE_PACKET_SIZE)) {        return ERROR_CODE_FIRMWARE_INVALID_DATA;    }    // &#x521D;&#x59CB;&#x5316;&#x56FA;&#x4EF6;&#x7F13;&#x51B2;&#x533A;&#x4E3A;0xFF&#xFF08;Flash&#x64E6;&#x9664;&#x72B6;&#x6001;&#xFF09;    memset(firmwareInfo.rawDate, 0xFF, sizeof(firmwareInfo_t));    // &#x5185;&#x5B58;&#x62F7;&#x8D1D;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x5BF9;&#x9F50;&#xFF0C;&#x6309;&#x5B9E;&#x9645;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x5199;&#x5165;    memcpy(firmwareInfo.rawDate, frame-&gt;data, frame-&gt;data_length);    // &#x5FEB;&#x901F;&#x9A8C;&#x8BC1;&#x5305;&#x5E8F;&#x53F7;    if (firmwareInfo.firmwareInfo.packetNum &gt;=        firmwareInfo.firmwareInfo.packetTotalNum) {        return ERROR_CODE_FIRMWARE_INVALID_DATA;    }    // &#x9A8C;&#x8BC1;CRC32    // todo &#x9A8C;&#x8BC1;crc32 &#x8FD9;&#x91CC;&#x8981;&#x5B9E;&#x73B0;crc&#x6821;&#x9A8C;    return Boot_FlashProgram();    // return ERROR_CODE_NO_ERROR;}BootErrorCode_t Boot_FlashProgram() {    // &#x8BA1;&#x7B97;flash&#x5730;&#x5740;    uint32_t flashAddr = (firmwareInfo.firmwareInfo.packetNum *                          DEVICE_INFO_FIRMWARE_PACKET_SIZE) +                         APPLICATION_START_ADDRESS;    // &#x9A8C;&#x8BC1;&#x5730;&#x5740;&#x5BF9;&#x9F50;&#xFF08;&#x95EA;&#x5B58;&#x5B57;&#x9700;&#x8981;32&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#xFF09;    if ((flashAddr &amp; 0x1F) != 0) {        return ERROR_CODE_FIRMWARE_FLASH_ERROR;    }    // &#x89E3;&#x9501;Flash    if (HAL_FLASH_Unlock() != HAL_OK) {        return ERROR_CODE_FIRMWARE_FLASH_ERROR;    }    uint8_t *data_ptr = firmwareInfo.firmwareInfo.firmware;    // flash&#x7F16;&#x7A0B;&#x7684;&#x95EA;&#x5B58;&#x5B57;&#x6570;&#xFF08;256&#x4F4D; = 32&#x5B57;&#x8282;&#xFF09;    for (uint32_t byte_offset = 0;         byte_offset &lt; DEVICE_INFO_FIRMWARE_PACKET_SIZE;         byte_offset += 32) { // &#x6BCF;&#x6B21;&#x6B65;&#x8FDB;32&#x5B57;&#x8282;        // &#x7F16;&#x7A0B;&#x6570;&#x636E;        if (HAL_FLASH_Program(FLASH_TYPEPROGRAM_FLASHWORD,                              flashAddr + byte_offset, // &#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5B57;&#x8282;&#x504F;&#x79FB;                              (uint32_t)(data_ptr + byte_offset)) != HAL_OK) {            HAL_FLASH_Lock();            return ERROR_CODE_FIRMWARE_FLASH_ERROR;        }    }    HAL_FLASH_Lock();    return ERROR_CODE_NO_ERROR;}\n&#x8FD9;&#x91CC;&#x5F00;&#x59CB;&#x5C31;&#x8981;&#x548C;&#x4E0A;&#x4F4D;&#x673A;&#x914D;&#x5408;&#x4E86;&#xFF0C;&#x672C;&#x6587;&#x53EA;&#x662F;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x56FA;&#x4EF6;&#x4E0B;&#x8F7D;&#x65B9;&#x6CD5;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x5177;&#x4F53;&#x4E0B;&#x8F7D;&#x600E;&#x4E48;&#x65B9;&#x4FBF;&#x600E;&#x4E48;&#x6765;\n&#x6E90;&#x7801;&#x4E00;&#x89C8;&#x4EE3;&#x7801;&#x5F00;&#x6E90;&#x5730;&#x5740;&#x76F4;&#x63A5;&#x514B;&#x9686;&#x4E0B;&#x6765;&#x770B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x7C98;&#x8D34;&#x4E86;\n","categories":["Bootloader"],"tags":["STM32","BootLoader"]}]